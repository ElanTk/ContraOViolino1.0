<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>O VIOLINO</title>
    <meta http-equiv="Content-Language" content="English" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" href="styleFeverDream.css" media="screen" />
    <link rel="icon" href="violinoFavicon2.png" type="image/x-icon">

    <script type="text/javascript">


        function ResetProgress() {
            var choice = prompt("Você tem certeza que quer resetar TODO seu progresso? se quiser, escreva: 'QUEROSIMCARAI'");
            if (choice == 'QUEROSIMCARAI') {
                alert("AH... Certo, vou resetar você aqui, só não reclame depois.");
                localStorage.beatEsqueletinho = 'no';
                EsqueletinhoTheme.controls = false;
                localStorage.beatGlobo = 'no';
                GloboTheme.controls = false;
                estiloFesta.style.display = "none";

                localStorage.beatGuardian = 'no';
                GuardianTheme.controls = false;
                salaGuardiao.style.display = "none";

                localStorage.beatArco = 'no';
                ArcoPhase1.controls = false;
                ArcoPhase2.controls = false;
                calorDragao.style.display = "none";

                localStorage.tubaroEnding = 'no';
                Violino1.controls = false;
                ViolinPhase3.controls = false;
                localStorage.setItem('tubaroEnding', 'no');
                localStorage.setItem('tubaroEndingEX', 'no');
                laminaTubaro.style.display = "none";

                localStorage.CrownEnding = 'no';
                Violino1.controls = false;
                ViolinPhase3.controls = false;

                localStorage.setItem('CrownEnding', 'no');
                localStorage.setItem('CrownEndingEX', 'no');
                coroaLuz.style.display = "none";


                localStorage.normalEnding = 'no';
                Violino1.controls = false;
                ViolinPhase3.controls = false;

                localStorage.setItem('normalEnding', 'no');
                localStorage.setItem('normalEndingEX', 'no');
                vitoriaComum.style.display = "none";

                localStorage.setItem('darkness', 'no');
                localStorage.setItem('darknessEnding', 'no');
                localStorage.setItem('darknessEndingEX', 'no');
                localStorage.setItem('calamityLevel', null);
                calamityText.innerHTML = "?????:???";

                localStorage.beatLunin = 'no';
                LuninPhase1.controls = false;
                alert("Acabei aqui, parceiro.");
            }
            else {
                alert("Ah, que bom que não quer, sinceramente!");
            }
        }
        function Changebackground(background) {
            if (background == 'padrao') {
                document.body.style.backgroundColor = "#c0bfbf";
                discobg.style.display = "none";
                dragonheatbg.style.display = "none";
                lightbg.style.display = "none";
                left.style.background = "#ebebeb";
                right.style.background = "#ebebeb";
                songs.style.background = "#ebebeb";
            }
            if (background == 'marrom') {
                document.body.style.backgroundColor = "#65563f";
                discobg.style.display = "none";
                dragonheatbg.style.display = "none";
                lightbg.style.display = "none";
                left.style.background = "#d7c7ae";
                right.style.background = "#d7c7ae";
                songs.style.background = "#d7c7ae";
            }
            else if (background == 'estiloFesta') {
                discobg.style.display = "block";
                dragonheatbg.style.display = "none";
                lightbg.style.display = "none";
                left.style.background = "#ebebebb4";
                right.style.background = "#ebebebb4";
                songs.style.background = "#ebebebb4";
            }
            else if (background == 'salaGuardiao') {

            }
            else if (background == 'calorDragao') {
                discobg.style.display = "none";
                dragonheatbg.style.display = "block";
                lightbg.style.display = "none";
                left.style.background = "#ebebebb4";
                right.style.background = "#ebebebb4";
                songs.style.background = "#ebebebb4";
            }
            else if (background == 'luz') {
                discobg.style.display = "none";
                dragonheatbg.style.display = "none";
                lightbg.style.display = "block";
                left.style.background = "#ebebebb4";
                right.style.background = "#ebebebb4";
                songs.style.background = "#ebebebb4";
            }
            if (background == 'escuro') {
                document.body.style.backgroundColor = "#000000";
                discobg.style.display = "none";
                dragonheatbg.style.display = "none";
                lightbg.style.display = "none";
                left.style.background = "#1a1a1a";
                right.style.background = "#1a1a1a";
                songs.style.background = "#1a1a1a";
            }
        }
        function Interact(what) {
            if (what == 'violino') {
                EsqueletinhoTheme.currentTime = 0;
                GloboTheme.currentTime = 0;
                GuardianTheme.currentTime = 0;
                ArcoPhase1.currentTime = 0;
                ArcoPhase2.currentTime = 0;
                Phase1.currentTime = 0;
                Phase2.currentTime = 0;
                LuninPhase1.currentTime = 0;
                ViolinPhase3.currentTime = 0;
                Violino1.currentTime = 0;
                darkness1.currentTime = 0;
                darkness2.currentTime = 0;
                darkness3.currentTime = 0;
                var violinoPhase1 = document.getElementById("Phase1");
                var violinoPhase2 = document.getElementById("Phase2");
                var guardianTheme = document.getElementById("GuardianTheme");
                var arcoPhase1 = document.getElementById("ArcoPhase1");
                var arcoPhase2 = document.getElementById("ArcoPhase2");
                violinoPhase1.loop = true;
                violinoPhase2.loop = true;
                alert("O malvado violino vem terrorizando a vila, e matou todos os heróis que tentaram entrar em sua torre e o matar.");
                alert("Fazem 200 anos que ele reina a terra com um punho de aço, fazendo o que desejar.");
                alert("No aniversário de 200 anos, um herói surge, pronto para parar o mal. Ele ouviu que o violino mora no andar 50 da torre infinita.");
                alert("Esse herói é você.");
                alert("A graça dos deuses te deu uma poção de vida. Use quando precisar!");

                if (localStorage.getItem('calamityLevel') > -1) {
                    alert("Você escuta um conjunto de sussuros de tonalidades diferentes. Estranhamente, isso parece ser meio familiar para você.");
                    alert("'hahahahaha...'");
                    alert("'claro, você devolveu o poder a mim...'");
                    alert("'infelizmente, você ter me derrotado causou alguns problemas nessa realidade...'");
                    alert("'chamo isso de nível de calamidade...'");
                    alert("'apesar de ser algo ruim, tenho certeza que vai te entreter...'");
                    alert("'basicamente, sua vida fica mais difícil com cada nível...'");
                    alert("'eu espero que isso faça você me entreter por mais tempo...'");
                    alert("'em todo caso, vou te listar tudo o que piorou...'");
                }
                if (localStorage.getItem('calamityLevel') > 0) {
                    alert("CL 1: inimigos normais defensivos tem sua defesa aumentada.");
                }
                if (localStorage.getItem('calamityLevel') > 1) {
                    alert("CL 2: o encontro do nivel 10 está mais desafiador.");
                }
                if (localStorage.getItem('calamityLevel') > 2) {
                    alert("CL 3: inimigos normais ofensivos tem seu ataque aumentado.");
                }
                if (localStorage.getItem('calamityLevel') > 3) {
                    alert("CL 4: o encontro do nivel 20 está mais desafiador.");
                }
                if (localStorage.getItem('calamityLevel') > 4) {
                    alert("CL 5: inimigos normais tem sua vida aumentada.");
                }
                if (localStorage.getItem('calamityLevel') > 5) {
                    alert("CL 6: o encontro do nivel 30 está mais desafiador.");
                }
                if (localStorage.getItem('calamityLevel') > 6) {
                    alert("CL 7: alguns inimigos normais tem ataques carregados mais fortes.");
                }
                if (localStorage.getItem('calamityLevel') > 7) {
                    alert("CL 8: o encontro do nivel 40 está mais desafiador, e a luz está mais forte.");
                }
                if (localStorage.getItem('calamityLevel') > 8) {
                    alert("CL 9: todas as maquinas estão mais desafiadoras.");
                }
                if (localStorage.getItem('calamityLevel') > 9) {
                    alert("CL 10: o violino está mais desafiador e a escuridão está mais assustadora.");
                }
                if (localStorage.getItem('calamityLevel') > 10) {
                    alert("CL 11+: para cada nível acima de 10, todos os bosses ganham vida adicional dependendo do andar.");
                }
                if (localStorage.getItem('calamityLevel') > 19) {
                    alert("Ah... Não pensei que era possível mas você conseguiu chegar no CL 20... Essa é a última melhora única, o resto é só vida adicional aos bosses...");
                    alert("CL 20: TODOS os inimigos ganham uma mecânica adicional, específica a ele.");
                }
                if (localStorage.getItem('calamityLevel') == 0) {
                    alert("'na verdade, nada mudou até agora...'");
                    alert("'o nível de calamidade está zero...'");
                }
                if (localStorage.getItem('calamityLevel') < 11) {
                    alert("'No momento, você pode derrotar o violino ou eu, e o nível de calamidade vai aumentar...'");
                }
                if (localStorage.getItem('calamityLevel') > 10) {
                    alert("'Parece que você só vai aumentar mais o nível de calamidade se me derrotar novamente...'");
                }

                var win = 'false';

                var totalHP = 10;
                var HP = 10;
                var ultraDefense = 'false';
                var dead = 'false';

                var defense = 1;
                var attack = 3;
                var staminaMax = 100;
                var stamina = 100;
                var critChance = 2;
                var critMult = 2;
                var gold = 20;
                //level 30: 6076 level 39: 9226 level 1:20
                var hpPotions = 1;
                var lightInf = 0;
                var tubaroPieces = 0;
                var ritualRelic = 0;
                var stairs = 0;

                var tubaroBlade = 0;
                var lightCrown = 0;

                var buyChoice;
                var defenseUpgradePrice = 14;
                var attackUpgradePrice = 14;
                var staminaMaxUpgradePrice = 23;
                var critChanceUpgradePrice = 10;

                var oquefazer;

                var towerLevel = 0;



                var combatChoice;
                var enemyChoice;
                var enemyFinalDamage;
                var finalDamage;
                var totalBlock;

                var enemyName;
                var enemyTotalHP;
                var enemyHP;
                var enemyAttack;
                var enemyDefense;
                var attackReadied;
                var attackReadiedBonus;
                var enemyLives;
                var enemyGold;

                do {

                    var hpPotionPrice = Math.round((5 * totalHP + (10 * Math.round(towerLevel / 20))) * (1 + hpPotions));
                    alert("Sua vida : " + HP + " / " + totalHP + "\r\n"
                        + "Sua defesa : " + defense + "\r\n"
                        + "Seu ataque : " + attack + "\r\n"
                        + "Sua stamina atual : " + stamina + "\r\n"
                        + "Chance de crítico : " + critChance + "%\r\n"
                        + "Multiplicador de crítico : " + critMult + "x\r\n"
                        + "Poções de vida : " + hpPotions);

                    oquefazer = prompt("Onde você vai? Você pode ir para:\r\n" +
                        "A [estadia], para recuperar alguma vida perdida em batalha, por 5 dinheiros. \r\n" +
                        "A [loja], para comprar alguma melhoria, caso consiga comprar, claro. \r\n" +
                        "Ou subir para o próximo andar da [torre] - andar atual: " + towerLevel + "\r\n" +
                        "Para escolher, escreva (estadia/loja/torre). Se quiser uma ajudinha, escreva [dica]. Ela se adapta para " +
                        "o andar que você está, então cheque sempre que tiver dificuldades! - Dinheiro atual : " + gold);

                    if (oquefazer == 'estadia') {
                        if (HP < totalHP && gold >= 5) {
                            gold = gold - 5;
                            alert("Você vai para a estadia.");
                            HP = totalHP * 1.5;
                            alert("Após dormir um pouco, se sente refrescado! - Sua vida : " + HP + " / " + totalHP);
                        }
                        else {
                            alert("Você não está com sono!");
                        }
                    }

                    else if (oquefazer == 'loja') {
                        do {
                            hpPotionPrice = Math.round(4 * totalHP * (towerLevel / 10) * (1 + hpPotions));
                            buyChoice = prompt("'Bem vindo a loja!' diz uma mulher musculosa, 'Quer comprar algo?' \r\n \r\n" +
                                "[1] - Uma armadura melhor. preço: " + defenseUpgradePrice + "\r\n" +
                                "[2] - Uma espada melhor. preço: " + attackUpgradePrice + "\r\n" +
                                "[3] - Uma sessão na esteira. preço: " + staminaMaxUpgradePrice + "\r\n" +
                                "[5] - Pedra de amolar 'ataques precisos'. preço: " + critChanceUpgradePrice + "\r\n" +
                                "[6] - Poção de vida :). preço: " + hpPotionPrice + "\r\n" +
                                "Dinheiro atual : " + gold + ", Sair da loja: [sair]");
                            if (buyChoice == 1) {
                                if (gold >= defenseUpgradePrice) {
                                    defense = defense + 1;
                                    gold = gold - defenseUpgradePrice;
                                    defenseUpgradePrice = Math.round(defenseUpgradePrice * 1.1) + 4;
                                    alert("nova defesa: " + defense);
                                }
                                else {
                                    alert('Eu não faço descontos...');
                                }
                            }
                            else if (buyChoice == 2) {
                                if (gold >= attackUpgradePrice) {
                                    attack = attack + 1;
                                    gold = gold - attackUpgradePrice;
                                    attackUpgradePrice = Math.round(attackUpgradePrice * 1.1) + 4;
                                    alert("novo ataque: " + attack);
                                }
                                else {
                                    alert('Eu não faço descontos...');
                                }
                            }
                            else if (buyChoice == 3) {
                                if (gold >= staminaMaxUpgradePrice) {
                                    staminaMax = staminaMax + 10;
                                    gold = gold - staminaMaxUpgradePrice;
                                    staminaMaxUpgradePrice = Math.round(staminaMaxUpgradePrice * 1.05) + 4;
                                    alert("nova stamina máxima: " + staminaMax);
                                }

                                else {
                                    alert('Eu não faço descontos...');
                                }
                            }
                            else if (buyChoice == 4) {
                                alert('Eu meio que tirei esse.');
                            }
                            else if (buyChoice == 5) {
                                if (gold >= critChanceUpgradePrice) {
                                    critChance = critChance + 1;
                                    gold = gold - critChanceUpgradePrice;
                                    critChanceUpgradePrice = Math.round(critChanceUpgradePrice * 1.05) + 3;
                                    alert("nova chance de crítico: " + critChance + "x");
                                }
                            }
                            else if (buyChoice == 6) {
                                if (gold >= hpPotionPrice) {
                                    hpPotions = hpPotions + 1;
                                    gold = gold - hpPotionPrice;
                                    alert("Suas poções de vida: " + hpPotions);

                                }
                                else {
                                    alert('Eu não faço descontos...');
                                }
                            }
                            else if (buyChoice == 'sair') {
                                alert("'Boa sorte na subida!'");
                            }
                            else {
                                alert("'Ai ai, eu não tenho isso aqui...'");
                            }
                        } while (buyChoice != 'sair');
                    }

                    else if (oquefazer == 'torre') {
                        if (towerLevel == 0 && localStorage.getItem('calamityLevel') == null) {
                            alert("Antes de qualquer coisa, precisa saber como lutar. Em uma luta, você pode ATACAR, " +
                                "DEFENDER ou usar algum item, se tiver.");
                            alert("ATACAR: a eficiencia do seu ataque depende de sua stamina atual: aos 100, você dá " +
                                "100% do seu ataque, aos 50, 50% do seu ataque, e por diante. Entretanto, você nunca gastará " +
                                "mais que 100 de stamina por ataque, logo, nunca usará mais que 100% do seu ataque." +
                                "Além disso, você sempre tem uma chance de dar crítico, indicado por sua 'chance de crítico." +
                                " Ao dar crítico, seu dano é multiplicado pelo seu 'multiplicador de crítico.");
                            alert("=> stamina: A stamina e usada, em sua maior parte, para atacar. Nisso, lea prediz quão eficiente " +
                                "seu ataque será. Em seus outros usos, serve como um custo a ser pago. O interessante da stamina é que " +
                                "ela sempre recuperará 10% do seu total no final do seu turno, independentemente de quanto é. Ao defender, " +
                                "você ganha 20% adicionais.")
                            alert("DEFENDER: Ao defender, você típicamente ganha o dobro de sua defesa ao receber o " +
                                "próximo ataque, possibilitando que você leve muito menos dano. Isso costuma ser útil " +
                                "para deixar sua barra de stamina recarregar, já que na maioria das vezes, é melhor você " +
                                "levar metade do dano enquanto carrega até 100% do que dar 10% várias vezes enquanto leva " +
                                "mais dano. Ainda mais, você recupera mais stamina ao bloquear.");
                            alert("Além disso, temos os inimigos: estes costumam ter somente duas ações: atacar ou preparar um ataque." +
                                "O ataque é simples: o inimigo tenta dar dano igual seu ataque. O preparar ataque, entretanto, é diferente: " +
                                "Ao preparar um ataque, a criatura não faz nada no turno, para depois usar um ataque bem mais forte que o normal." +
                                "Além disso, algumas criaturas especiais tem algumas outras ações, mas elas são explicadas ao serem ultilizadas.");
                            alert("Bom, é basicamente isso! Boa sorte!");
                        }
                        towerLevel = towerLevel + 1;
                        alert("Certo! Hora de avançar na torre, para o andar " + (towerLevel) + "!");
                        if (towerLevel < 10) {
                            var enemyType = Math.floor(Math.random() * 3);
                            if (enemyType == 0) {
                                enemyName = 'Rato Guerreiro';
                                enemyHP = 5;
                                enemyTotalHP = 5;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 1;
                                    enemyTotalHP = enemyTotalHP + 1;
                                }
                                enemyAttack = 3;
                                if (localStorage.getItem('calamityLevel') > 2) {
                                    enemyAttack = enemyAttack + 1;
                                }
                                enemyDefense = 0;
                                attackReadied = 'false';
                                attackReadiedBonus = 2;
                                enemyLives = 0;
                                enemyGold = 14;
                            }
                            else if (enemyType == 1) {
                                enemyName = 'Besouro Gigante';
                                enemyHP = 5;
                                enemyTotalHP = 5;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 2;
                                    enemyTotalHP = enemyTotalHP + 2;
                                }
                                enemyAttack = 2;
                                enemyDefense = 1;
                                if (localStorage.getItem('calamityLevel') > 0) {
                                    enemyDefense = enemyDefense + 1;
                                }
                                attackReadied = 'false';
                                attackReadiedBonus = 2.5;
                                enemyLives = 0;
                                enemyGold = 14;
                            }
                            else if (enemyType == 2) {
                                enemyName = 'Gosmo Verde';
                                enemyHP = 9;
                                enemyTotalHP = 9;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 3;
                                    enemyTotalHP = enemyTotalHP + 3;
                                }
                                enemyAttack = 2;
                                enemyDefense = 0;
                                attackReadied = 'false';
                                attackReadiedBonus = 2.5;
                                if (localStorage.getItem('calamityLevel') > 6) {
                                    attackReadiedBonus = attackReadiedBonus + 0.5;
                                }
                                enemyLives = 0;
                                enemyGold = 14;
                            }
                            alert("Assim que você entra no andar, você vê um " + enemyName + ", e ele está pronto para uma briga!");
                        }
                        else if (towerLevel == 10) {
                            enemyName = 'Esqueletinho, o gentil';
                            enemyHP = 25;
                            enemyTotalHP = 25;
                            if (localStorage.getItem('calamityLevel') > 1) {
                                enemyHP = 35;
                                enemyTotalHP = 35;
                            }
                            if (localStorage.getItem('calamityLevel') > 10) {
                                enemyHP = enemyHP + (1 * (localStorage.getItem('calamityLevel') - 10));
                                enemyTotalHP = enemyTotalHP + (1 * (localStorage.getItem('calamityLevel') - 10));
                            }
                            enemyAttack = 5;
                            enemyDefense = 1;
                            attackReadied = 'false';
                            attackReadiedBonus = 2.2;
                            enemyLives = 0;
                            enemyGold = 450;
                            alert("No momento que você abre a porta, vê algo diferente: a sala é decorada como uma arena, e ao entrar, a porta atrás de você é trancada.");
                            alert("Em seguida, uma figura sai das sombras e fala com você:");
                            alert("'Olá!! Eu sou o pré-general do Violino, e ainda falta derrotar um aventureiro para concluir meu curso!!'");
                            alert("'Ele me colocou mais para baixo para deixar seus recursos mais fortes prontos e preparados para coisas mais importantes, ou aventureiros fortes que entram aqui!!!!'");
                            alert("'Bom, de qualquer forma, poucos passaram até do andar 20, então eu acho que consigo...'");
                            alert("'Ah! Acho que eu me distraí um pouco!! A batalha, certo!'");
                            EsqueletinhoTheme.play();
                            alert("now playing: Eternal Eclipse - Shape of Lies");
                        }
                        else if (towerLevel < 20) {
                            var enemyType = Math.floor(Math.random() * 3);
                            if (enemyType == 0) {
                                enemyName = 'Cobra Coral Falsa de Armadura';
                                enemyHP = 16;
                                enemyTotalHP = 16;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 4;
                                    enemyTotalHP = enemyTotalHP + 4;
                                }
                                enemyAttack = 11;
                                if (localStorage.getItem('calamityLevel') > 2) {
                                    enemyAttack = enemyAttack + 2;
                                }
                                enemyDefense = 2;
                                attackReadied = 'false';
                                attackReadiedBonus = 1.5;
                                if (localStorage.getItem('calamityLevel') > 6) {
                                    attackReadiedBonus = attackReadiedBonus + 0.2;
                                }
                                enemyLives = 0;
                                enemyGold = 50;
                            }
                            else if (enemyType == 1) {
                                enemyName = 'Recruta do Violino';
                                enemyHP = 25;
                                enemyTotalHP = 25;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 10;
                                    enemyTotalHP = enemyTotalHP + 10;
                                }
                                enemyAttack = 7;
                                enemyDefense = 3;
                                attackReadied = 'false';
                                attackReadiedBonus = 2.4;
                                enemyLives = 0;
                                enemyGold = 50;
                            }
                            else if (enemyType == 2) {
                                enemyName = 'leal Lobo-Pedra';
                                enemyHP = 15;
                                enemyTotalHP = 15;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 5;
                                    enemyTotalHP = enemyTotalHP + 5;
                                }
                                enemyAttack = 7;
                                enemyDefense = 4;
                                if (localStorage.getItem('calamityLevel') > 0) {
                                    enemyDefense = enemyDefense + 1;
                                }
                                attackReadied = 'false';
                                attackReadiedBonus = 2.5;
                                enemyLives = 0;
                                enemyGold = 50;
                            }
                            alert("Assim que você entra na sala, " + enemyName + ", já olha para você. Parece que este guarda o andar.");
                        }
                        else if (towerLevel == 20) {
                            enemyName = 'Globo de Festa!!';
                            enemyHP = 100;
                            enemyTotalHP = 100;
                            if (localStorage.getItem('calamityLevel') > 3) {
                                enemyHP = enemyHP + 50;
                                enemyTotalHP = enemyTotalHP + 50;
                            }
                            if (localStorage.getItem('calamityLevel') > 10) {
                                enemyHP = enemyHP + (2 * (localStorage.getItem('calamityLevel') - 10));
                                enemyTotalHP = enemyTotalHP + (2 * (localStorage.getItem('calamityLevel') - 10));
                            }
                            enemyAttack = 11;
                            enemyDefense = 2;
                            attackReadied = 'false';
                            attackReadiedBonus = 2;
                            enemyLives = 0;
                            enemyGold = 1100;
                            alert("Essa sala também parece diferente: uma sala de festa, com um globo acima de um piso festivo?");
                            alert("Você não acha ninguém lá dentro, até que algo fala com você:");
                            alert("'Olha, parece que alguém chegou aqui, cara.'");
                            alert("'Esse vai ser o sexto morto pelo globo de festa, cara.'");
                            alert("'O Violino podia me dar um trabalho mais legal, cara. Eu odeio lutar, cara.'");
                            GloboTheme.play();
                            alert("now playing: Darude - Sandstorm");
                        }
                        else if (towerLevel < 30) {
                            var enemyType = Math.floor(Math.random() * 3);
                            if (enemyType == 0) {
                                enemyName = 'Cobra Coral Verdadeira de Armadura';
                                enemyHP = 34;
                                enemyTotalHP = 34;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 6;
                                    enemyTotalHP = enemyTotalHP + 6;
                                }
                                enemyAttack = 15;
                                if (localStorage.getItem('calamityLevel') > 2) {
                                    enemyAttack = enemyAttack + 3;
                                }
                                enemyDefense = 5;
                                attackReadied = 'false';
                                attackReadiedBonus = 1.7;
                                enemyLives = 0;
                                enemyGold = 170;
                            }
                            else if (enemyType == 1) {
                                enemyName = 'Guerreiro Flauta';
                                enemyHP = 35;
                                enemyTotalHP = 35;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 10;
                                    enemyTotalHP = enemyTotalHP + 10;
                                }
                                enemyAttack = 11;
                                enemyDefense = 5;
                                attackReadied = 'false';
                                attackReadiedBonus = 2;
                                enemyLives = 0;
                                enemyGold = 170;
                            }
                            else if (enemyType == 2) {
                                enemyName = 'Estátua Guarda';
                                enemyHP = 40;
                                enemyTotalHP = 40;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 12;
                                    enemyTotalHP = enemyTotalHP + 12;
                                }
                                enemyAttack = 11;
                                enemyDefense = 13;
                                if (localStorage.getItem('calamityLevel') > 0) {
                                    enemyDefense = enemyDefense + 2;
                                }
                                attackReadied = 'false';
                                attackReadiedBonus = 2;
                                enemyLives = 0;
                                enemyGold = 170;
                            }
                            alert("Assim que você entra na sala, " + enemyName + ", já olha para você. Parece que este guarda o andar.");
                        }
                        else if (towerLevel == 30) {
                            enemyName = 'O Guardião.';
                            enemyHP = 150;
                            enemyTotalHP = 150;
                            if (localStorage.getItem('calamityLevel') > 5) {
                                enemyHP = enemyHP + 75;
                                enemyTotalHP = enemyTotalHP + 75;
                            }
                            if (localStorage.getItem('calamityLevel') > 10) {
                                enemyHP = enemyHP + (4 * (localStorage.getItem('calamityLevel') - 10));
                                enemyTotalHP = enemyTotalHP + (4 * (localStorage.getItem('calamityLevel') - 10));
                            }
                            enemyAttack = 16;
                            enemyDefense = 13;
                            attackReadied = 'false';
                            attackReadiedBonus = 2.5;
                            enemyLives = 0;
                            enemyGold = 2400;
                            alert("Essa sala é gigantesca, com grandes pilastras suportando um teto pelo menos 25 metros acima de sua cabeça.");
                            alert("Antes de dar tempo de pensar sobre, porém, você vê uma estatua com uma armadura gigantesca, na frente da próxima porta.");
                            alert("'OLÁ. RECEIO QUE VOCÊ NÃO POSSA SE PASSAR DAQUI. SUGIRO QUE VOCÊ VÁ EMBORA.'");
                            alert("Espera, é um ser vivo??? Você pensou que era uma estátua pelo tamanho, mas parece que não...");
                            alert("Eu tenho a impressão que só vai piorar, se continuar a subir.");
                            alert("'AH, PARECE QUE VOCÊ VAI QUERER PASSAR MESMO? ISSO É INCOMUM... BOM, ENTÃO NÃO TENHO OUTRA OPÇÃO.'");
                            alert("A figura armadurada gigantesca Pega uma guitarra (de algum lugar?) e prepara para começar a tocar.");
                            alert("'ENTÃO VAMOS, UM DUELO.'");
                            alert("Amigo, eu tenho a impressão que meus ouvidos vão ficar doloridos depois disso..");
                            guardianTheme.play();
                            alert("Now playing: In the Final - Gametal cover (versão solo único)");
                        }
                        else if (towerLevel < 40) {
                            var enemyType = Math.floor(Math.random() * 3);
                            if (enemyType == 0) {
                                enemyName = 'Espada flutuante';
                                enemyHP = 50;
                                enemyTotalHP = 50;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 5;
                                    enemyTotalHP = enemyTotalHP + 5;
                                }
                                enemyAttack = 21;
                                enemyDefense = 12;
                                attackReadied = 'false';
                                attackReadiedBonus = 2.0;
                                if (localStorage.getItem('calamityLevel') > 6) {
                                    attackReadiedBonus = attackReadiedBonus + 0.5;
                                }
                                enemyLives = 0;
                                enemyGold = 350;
                            }
                            else if (enemyType == 1) {
                                enemyName = 'Clone junior dracônico';
                                enemyHP = 55;
                                enemyTotalHP = 55;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 10;
                                    enemyTotalHP = enemyTotalHP + 10;
                                }
                                enemyAttack = 18;
                                if (localStorage.getItem('calamityLevel') > 2) {
                                    enemyAttack = enemyAttack + 2;
                                }
                                enemyDefense = 8;
                                attackReadied = 'false';
                                attackReadiedBonus = 2.0;
                                enemyLives = 0;
                                enemyGold = 350;
                            }
                            else if (enemyType == 2) {
                                enemyName = 'Golem de ferro';
                                enemyHP = 70;
                                enemyTotalHP = 70;
                                if (localStorage.getItem('calamityLevel') > 4) {
                                    enemyHP = enemyHP + 15;
                                    enemyHP = enemyHP + 15;
                                }
                                enemyAttack = 14;
                                enemyDefense = 15;
                                if (localStorage.getItem('calamityLevel') > 0) {
                                    enemyDefense = enemyDefense + 2;
                                }
                                attackReadied = 'false';
                                attackReadiedBonus = 3;
                                enemyLives = 0;
                                enemyGold = 350;
                            }
                            alert("Assim que você entra na sala, você vê " + enemyName + ". Parece que o único caminho é por cima do mesmo.");
                        }
                        else if (towerLevel == 40) {
                            enemyName = 'O grande Dragão Metálico, Arco do Violino';
                            enemyHP = 150;
                            enemyTotalHP = 150;
                            if (localStorage.getItem('calamityLevel') > 10) {
                                enemyHP = enemyHP + (3 * (localStorage.getItem('calamityLevel') - 10));
                                enemyTotalHP = enemyTotalHP + (3 * (localStorage.getItem('calamityLevel') - 10));
                            }
                            enemyAttack = 21;
                            if (localStorage.getItem('calamityLevel') > 7) {
                                enemyAttack = enemyAttack + 1;
                            }
                            enemyDefense = 16;
                            attackReadied = 'false';
                            attackReadiedBonus = 2.5;
                            enemyLives = 1;
                            enemyGold = 4000;
                            alert("Ao entrar nesta sala, você percebe que apesar de gigantesca igual a do Guardião, ela tem metade das paredes somente, a outra metade se dando como um gigante buraco aos céus.");
                            alert("Você resolve não pensar nisso, e já vai direto para a escada de mão, mas antes de começar a escalar...");
                            alert("Você escuta um estridente rujido.");
                            alert("Ao olhar para trás, ao invés de ver os céus, você vê algo diferente: um dragão, quase tão grande quanto O Guardião.");
                            alert("Com escamas metálicas, Um rabo como espada e asas cobertas de lâminas, você não consegue evitar a tremer sua mão um pouco ao levantar sua espada.");
                            alert("Enquanto o Dragão começa a descer para o chão, você não consegue evitar se não o achar um pouco familiar, até que você lembra:");
                            alert("Você lembra de histórias que você escutava quando era pequeno, histórias de quando o violino tomou controle...");
                            alert("Enquanto o Violino matava os líderes das cidades, e eventualmente da capital, o dragão incinerava o exército das mesmas, saindo desses embates intocado.");
                            alert("Felizmente, antes de você perceber que vai ter que vencer de algo assim, o Dragão desce no chão, e prepara para lutar contra você!");
                            arcoPhase1.play();
                            alert("Now playing: Unholy Insurgency - DM Dokuro - Calamity mod");
                        }
                        else if (towerLevel < 50) {
                            var enemyType = Math.floor(Math.random() * 3);
                            if (enemyType == 0) {
                                enemyName = 'Torreta magica';
                                enemyHP = 120;
                                enemyTotalHP = 120;
                                enemyAttack = 22 + towerLevel - 40;
                                if (localStorage.getItem('calamityLevel') > 8) {
                                    enemyHP = enemyHP + 55;
                                    enemyTotalHP = enemyTotalHP + 55;
                                    enemyAttack = enemyAttack + 3;
                                }
                                enemyDefense = -10;
                                attackReadied = 'false';
                                attackReadiedBonus = 2.0;
                                enemyLives = 0;
                                enemyGold = 0;
                            }
                            else if (enemyType == 1) {
                                enemyName = 'Torreta atira lancas';
                                enemyHP = 80;
                                enemyTotalHP = 80;
                                if (localStorage.getItem('calamityLevel') > 8) {
                                    enemyHP = enemyHP + 60;
                                    enemyTotalHP = enemyTotalHP + 60;
                                }
                                enemyAttack = 22;
                                enemyDefense = 3 + towerLevel - 40;
                                attackReadied = 'false';
                                attackReadiedBonus = 2.0;
                                enemyLives = 0;
                                enemyGold = 0;
                            }
                            else if (enemyType == 2) {
                                enemyName = 'Armadilha 1000 bracos';
                                enemyHP = 65 + towerLevel - 40;
                                enemyTotalHP = 65 + towerLevel - 40;
                                enemyAttack = 17;
                                enemyDefense = 17;
                                attackReadied = 'false';
                                attackReadiedBonus = 2;
                                if (localStorage.getItem('calamityLevel') > 8) {
                                    attackReadiedBonus = attackReadiedBonus + 0.5;
                                }
                                enemyLives = 0;
                                enemyGold = 0;
                            }
                            alert("Um passo dentro da sala, e uma " + enemyName + ". Quase te acerta. Parece que você vai ter que a destruir para continuar.");
                        }
                        else if (towerLevel == 50) {
                            enemyName = 'O Violino';
                            enemyHP = 250;
                            enemyTotalHP = 250;
                            if (localStorage.getItem('calamityLevel') > 10) {
                                enemyHP = enemyHP + (5 * (localStorage.getItem('calamityLevel') - 10));
                                enemyTotalHP = enemyTotalHP + (5 * (localStorage.getItem('calamityLevel') - 10));
                            }
                            enemyAttack = 22;
                            enemyDefense = 14;
                            if (localStorage.getItem('calamityLevel') > 9) {
                                enemyAttack = enemyAttack + 2;
                            }
                            attackReadied = 'false';
                            attackReadiedBonus = 2.0;
                            enemyLives = 2;
                            enemyGold = 0;
                            alert("Bom, parece que essas são as últimas escadas que você vai precisar subir.");
                            alert("Mas enquanto você sobe, eu gostaria de falar algo para você.");
                            alert("Foi uma grande jornada chegar até aqui. Você devia se orgulhar disso.");
                            alert("Você conseguiu passar por tudo que entrou na sua frente. Até um Dragão!");
                            alert("Ninguém sabe o que está por vir, mas eu sei de algo: ");
                            alert("Você não vai desistir.");
                            alert("Você vai tentar o seu melhor.");
                            alert("Você vai fazer tudo o que conseguir.");
                            alert("E se você falhar, bem...");
                            alert("Você deu o seu melhor, não? Não é isso que importa?");
                            alert("E de qualquer forma, você sempre pode tentar de novo!");
                            alert("Então, por favor, faça o seu melhor.");
                            alert("Eu acredito em você.");
                            alert("Nossa! Parece que o final da escada já chegou!");
                            alert("Muito bem, você respira fundo, e já abre os gigantes portões.");
                            alert("Ao os abrir, você vê algo peculiar:");
                            Violino1.play();
                            alert("Ao abrir a porta, você já sente e escuta um forte vento.");
                            alert("O final da torre. O último andar é não tem paredes, mas tem um telhado, sustentado por quatro pilares. Você " +
                                "vê um trono, com pilhas de crânios em volta. Em cima do trono, Um violino.");
                            alert("Ao ver o Violino, você rápidamente tira sua espada de sua bainha e a aponta em direção " +
                                "do intrumento.");
                            if (localStorage.getItem('calamityLevel') > 10) {
                                alert("'Ah, não vai falar nada? Nenhuma ameaça vazia, história trágica ou algo do tipo?'");
                                alert("'Talvez você já saiba que vai perder.'");
                                alert("'Essa manhã, todo o poder que eu precisava para o meu plano...'");
                                alert("'Tudo isso veio até mim, estranhamente, sem motivo aparente.'");
                                alert("'E agora, você vai ter que lutar contra mim com todo esse poder.'");
                                alert("'Entende agora? Você não tem nenhuma chance.'");
                                alert("'Mesmo assim, eu julgo que pelo seu maneirismo, isso vai ser divertido.'");
                            }
                            else {
                                alert("'Ah, não vai falar nada? Nenhuma ameaça vazia, história trágica ou algo do tipo? Você é " +
                                    "o primeiro calado assim.'");
                                alert("'Bom, eu não vou lhe encher de palavras então. Espero que nossa luta seja tão interessante " +
                                    "como você.'");
                            }
                        }
                        else if (towerLevel > 50) {
                            enemyName = 'A escuridão.';
                            enemyHP = 1000;
                            enemyTotalHP = 1000;
                            enemyAttack = '?';
                            enemyDefense = 35;
                            enemyLives = 1;
                            attackReadied = 'false';
                            attackReadiedBonus = 2.0;
                            enemyGold = 0;
                            Violino1.play();
                            alert("Huh, isso é verdadeiramente peculiar.");
                            alert("Você está no telhado da torre.");
                            alert("Parece que sua escada te teleportou aqui, o único lugar acima do nível 50.");
                            alert("O telhado é nem grande, mas bem vazio.");
                            alert("Algo mais interessante, em sua opinião, é a noite.");
                            alert("A lua não está presente, e o céu estaria completamente escuro se não pelas estrelas...");
                            alert("...");
                            alert("...Honestamente, é bem bonito.");
                            alert("Mesmo assim, está bem escuro...");
                            alert("...");
                            alert("Sem nenhum caminho nem nada pra fazer, você senta por um minuto e aprecia a vista.");
                            alert("...");
                            alert(".....");
                            alert(".......");
                            alert("..!");
                            alert("'Não pode ser!' você pensa, enquanto as estrelas começam a sumir uma por uma, vai ficando...");
                            alert("...cada vez...");
                            alert("...mais escuro.");
                            alert("E continua cada vez pior.");
                            alert("Até que a última estrela se apaga.");
                            darkness1.play();
                            darkness1.volume = 0.5;
                        }
                        //Combate(separado por encounters normais e encounters de boss(programação distinta))
                        if (towerLevel < 10) {
                            do {
                                var choiced = 'false';
                                do {
                                    combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                        + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                        enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                        "\r\n \r\n Você pode: atacar(a), defender(d) ou usar uma poção de vida(p), caso tenha.");

                                    if (combatChoice == 'a' || combatChoice == 'A') {
                                        choiced = 'true';
                                        if (stamina >= 100) {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = attack * critMult - enemyDefense;
                                                alert("CRÍTICO!");
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                finalDamage = attack - enemyDefense;
                                                stamina = stamina - 100;
                                            }
                                        }
                                        else {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                alert("CRÍTICO!");
                                            }
                                            else {
                                                finalDamage = (attack * (stamina / 100)) - enemyDefense;
                                                stamina = 0;
                                            }
                                        }
                                        if (finalDamage <= 0) {
                                            alert("Seu braço dorme antes de chegar no inimigo.");
                                        }
                                        else if (finalDamage <= 2) {
                                            alert("Você soca o inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else if (finalDamage <= 10) {
                                            alert("Você corta seu inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else {
                                            alert("Você dá um estrondoso ataque no inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        totalBlock = defense;

                                    }
                                    if (combatChoice == 'd' || combatChoice == 'D') {
                                        choiced = 'true';
                                        totalBlock = defense * 2;
                                        stamina = stamina + (staminaMax * 0.2);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'p' || combatChoice == 'P') {
                                        if (hpPotions > 0 && HP < totalHP) {
                                            choiced = 'true';
                                            hpPotions = hpPotions - 1;
                                            HP = totalHP;
                                            alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                            totalBlock = defense * 3;
                                        }
                                        else if (HP < totalHP && hpPotions == 0) {
                                            alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                        }
                                        else if (HP > totalHP) {
                                            alert("Você não recuperaria vida alguma.");
                                        }
                                    }
                                } while (choiced == 'false');
                                stamina = stamina + (staminaMax * 0.1);
                                if (stamina > staminaMax) {
                                    stamina = staminaMax;
                                }

                                if (enemyHP > 0) {
                                    if (localStorage.getItem('calamityLevel') > 19) {
                                        if (enemyType == 0) {
                                            alert("O olho do rato brilha com raiva, e sua boca espuma mais um pouco. +0.5 ataque.");
                                            enemyAttack = enemyAttack + 0.5;
                                        }
                                        else if (enemyType == 2) {
                                            enemyName = 'Gosmo Verde';
                                            alert("A gosma do gosmo começa a se moldar de volta em sua forma original. +0.5 vida.");
                                            enemyHP = enemyHP + 0.5;
                                        }
                                    }
                                    enemyChoice = Math.floor(Math.random() * 2) + 1;
                                    if (attackReadied == 'true') {
                                        alert(enemyName + " Solta um forte ataque em sua direção!");
                                        enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock;
                                        attackReadied = 'false';
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                    }
                                    else if (enemyChoice == 1) {
                                        alert(enemyName + " te ataca!");
                                        enemyFinalDamage = enemyAttack - totalBlock;
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                    }
                                    else if (enemyChoice == 2) {
                                        alert(enemyName + " dá um passo para trás, preparando um ataque!");
                                        if (enemyType == 1 && localStorage.getItem('calamityLevel') > 19) {
                                            alert("O besouro esconde a face dele na casca, o que faz dificil saber de onde vai sair a mordida, deixando o ataque a chegar mais potente.");
                                            attackReadiedBonus = attackReadiedBonus + 0.5;
                                        }
                                        attackReadied = 'true';
                                    }
                                    else {
                                        alert("ISSO É UM ERRO!");
                                    }

                                }
                                totalBlock = 0;
                            } while (enemyHP > 0 && HP > 0)
                        }
                        else if (towerLevel == 10) {
                            var giroEsqueleto = 0;
                            do {
                                var choiced = 'false';
                                do {
                                    combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                        + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                        enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                        "\r\n \r\n Você pode: atacar(a), defender(d) ou usar uma poção de vida(p), caso tenha.");

                                    if (combatChoice == 'a' || combatChoice == 'A') {
                                        choiced = 'true';
                                        if (stamina >= 100) {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = attack * critMult;
                                                alert("CRÍTICO!");
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                finalDamage = attack - enemyDefense;
                                                stamina = stamina - 100;
                                            }
                                        }
                                        else {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                alert("CRÍTICO!");
                                            }
                                            else {
                                                finalDamage = (attack * (stamina / 100)) - enemyDefense;
                                                stamina = 0;
                                            }
                                        }
                                        if (finalDamage <= 0) {
                                            alert("'Hehehehe, que ataque fraco! Nem me machucou!'");
                                        }
                                        else if (finalDamage <= 2) {
                                            alert("Seu ataque acerta o esqueleto, porém parece não ser muito efetivo...");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else if (finalDamage <= 10) {
                                            alert("Seu ataque dá um um dano visível ao Esqueletinho.");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else {
                                            alert("Seu ataque é estrondoso. 'AI! PENSEI QUE FOSSE MAIS FÁCIL!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        totalBlock = defense;

                                    }
                                    if (combatChoice == 'd' || combatChoice == 'D') {
                                        choiced = 'true';
                                        totalBlock = defense * 2;
                                        stamina = stamina + (staminaMax * 0.2);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'p' || combatChoice == 'P') {
                                        if (hpPotions > 0 && HP < totalHP) {
                                            choiced = 'true';
                                            hpPotions = hpPotions - 1;
                                            HP = totalHP;
                                            alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                            totalBlock = defense * 3;
                                        }
                                        else if (HP < totalHP && hpPotions == 0) {
                                            alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                        }
                                        else if (HP > totalHP) {
                                            alert("Você não recuperaria vida alguma.");
                                        }
                                    }
                                } while (choiced == 'false');
                                stamina = stamina + (staminaMax * 0.1);
                                if (stamina > staminaMax) {
                                    stamina = staminaMax;
                                }

                                if (enemyHP > 0) {
                                    enemyChoice = Math.floor(Math.random() * 4) + 1;
                                    if (attackReadied == 'true') {
                                        alert(enemyName + " Solta um forte ataque em sua direção!");
                                        enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock;
                                        attackReadied = 'false';
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                    }
                                    else if (giroEsqueleto > 0) {
                                        alert(enemyName + " Gira com sua espada, tentando se aproximar de você!");
                                        enemyFinalDamage = (enemyAttack * 1.5) - totalBlock;
                                        giroEsqueleto = giroEsqueleto - 1;
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Apesar de previsíveis, os ataques do giro são pesados, e você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Felizmente, você consegue defender os ataques previsíveis.");
                                        }
                                        if (giroEsqueleto == 0) {
                                            alert("O Esqueletinho perde a velocidade e para de girar. Ele parece decentemente tonto.");
                                            if (HP > 0) { alert('Impossível, você não morreu com esse giro?!!?!'); }
                                        }
                                    }
                                    else if (enemyChoice == 1) {
                                        alert(enemyName + " te ataca!");
                                        enemyFinalDamage = enemyAttack - totalBlock;
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                    }
                                    else if (enemyChoice == 2) {
                                        if (localStorage.getItem('calamityLevel') > 1) {
                                            alert("O Esqueletinho come uma barra de cereal de marca, ganhando 2 de vida!");
                                            alert("Além disso, ele prepara um ataque.");
                                            enemyHP = enemyHP + 2;
                                        }
                                        else {
                                            alert("O Esqueletinho pega uma barra de cereal do bolso e come, ganhando 1 de vida!");
                                            alert("Ah, e ele prepara um ataque.");
                                            enemyHP = enemyHP + 1;
                                        }
                                        attackReadied = 'true';
                                    }
                                    else if (enemyChoice == 3) {
                                        alert(enemyName + " grita: 'GIRO ESQUELETO, PREPARAR!'");
                                        giroEsqueleto = 3;
                                    }
                                    else if (enemyChoice == 4) {
                                        alert("O Esqueletinho faz anotações em seu caderno.");
                                        if (localStorage.getItem('calamityLevel') > 19) {
                                            alert("Após te analizar, ele resolve fazer uma pose mais agressiva. +1 ataque, -1 defesa.");
                                            enemyAttack = enemyAttack + 1;
                                            enemyDefense = enemyDefense - 1;
                                        }
                                    }
                                    else {
                                        alert("ISSO É UM ERRO!");
                                    }

                                }
                                totalBlock = 0;

                            } while (enemyHP > 0 && HP > 0);
                        }
                        else if (towerLevel < 20) {
                            enemyStanced = 0;
                            do {
                                var choiced = 'false';
                                do {
                                    combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                        + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                        enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                        "\r\n \r\n Você pode: atacar(a), defender(d) ou usar uma poção de vida(p), caso tenha.");

                                    if (combatChoice == 'a' || combatChoice == 'A') {
                                        choiced = 'true';
                                        if (stamina >= 100) {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                if (enemyStanced > 0) { finalDamage = attack * critMult - (enemyDefense * 1.3); }
                                                else { finalDamage = attack * critMult - enemyDefense; }
                                                alert("CRÍTICO!");
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = attack - (enemyDefense * 1.3); }
                                                else { finalDamage = attack - enemyDefense; }
                                                stamina = stamina - 100;
                                            }
                                        }
                                        else {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                alert("CRÍTICO!");
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                stamina = 0;
                                            }
                                        }
                                        if (finalDamage <= 0) {
                                            alert("Seu braço dorme antes de chegar no inimigo.");
                                        }
                                        else if (finalDamage <= 2) {
                                            alert("Você soca o inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else if (finalDamage <= 10) {
                                            alert("Você corta seu inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else {
                                            alert("Você dá um estrondoso ataque no inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        totalBlock = defense;

                                    }
                                    if (combatChoice == 'd' || combatChoice == 'D') {
                                        choiced = 'true';
                                        totalBlock = defense * 2;
                                        stamina = stamina + (staminaMax * 0.2);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'p' || combatChoice == 'P') {
                                        if (hpPotions > 0 && HP < totalHP) {
                                            choiced = 'true';
                                            hpPotions = hpPotions - 1;
                                            HP = totalHP;
                                            alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite.");
                                            totalBlock = defense;
                                        }
                                        else if (HP < totalHP && hpPotions == 0) {
                                            alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                        }
                                        else if (HP > totalHP) {
                                            alert("Você não recuperaria vida alguma.");
                                        }
                                    }
                                } while (choiced == 'false');
                                stamina = stamina + (staminaMax * 0.1);
                                if (stamina > staminaMax) {
                                    stamina = staminaMax;
                                }

                                if (enemyHP > 0) {
                                    enemyStanced = enemyStanced - 1;
                                    enemyChoice = Math.floor(Math.random() * 3) + 1;
                                    if (attackReadied == 'true') {
                                        alert(enemyName + " Solta um forte ataque em sua direção!");

                                        if (enemyStanced > 0) { enemyFinalDamage = (enemyAttack * attackReadiedBonus * 1.3) - totalBlock; }
                                        else { enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock; }

                                        attackReadied = 'false';
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                    }
                                    else if (enemyChoice == 1) {
                                        alert(enemyName + " te ataca!");
                                        if (enemyStanced > 0) { enemyFinalDamage = (enemyAttack * 1.3) - totalBlock; }
                                        else { enemyFinalDamage = enemyAttack - totalBlock; }
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                    }
                                    else if (enemyChoice == 2) {
                                        alert(enemyName + " dá um passo para trás, preparando um ataque!");
                                        attackReadied = 'true';
                                    }
                                    else if (enemyChoice == 3 && enemyStanced < 1) {
                                        alert(enemyName + " muda a postura. Nos próximos 2 turnos, o mesmo receberá um bonús de 30% em ataque e defesa!");
                                        enemyStanced = 2;
                                    }
                                    else {
                                        if (localStorage.getItem('calamityLevel') > 19) {
                                            if (enemyType == 0) {
                                                alert("A cobra digere um rato que estava em sua barriga, recuperando vida. +7 HP");
                                                enemyHP = enemyHP + 7;
                                            }
                                            else if (enemyType == 1) {
                                                alert("O recruta toca uma música simples, deixando ele mais concentrado. +1 ataque, +1 defesa.");
                                                enemyAttack = enemyAttack + 1;
                                                enemyDefense = enemyDefense + 1;
                                            }
                                            else if (enemyType == 2) {
                                                alert("A lobo uiva alto, mas quando ninguém vem, ele fica raivoso. +1.5 ataque.");
                                                enemyAttack = enemyAttack + 1.5;
                                            }
                                        }
                                        alert("O inimigo recupera seu fôlego.");
                                    }

                                }
                                totalBlock = 0;
                            } while (enemyHP > 0 && HP > 0)
                        }
                        else if (towerLevel == 20) {
                            var quadradosSoltos = 0;
                            var redAttackTimer = 0;
                            var blueAttackTimer = 0;
                            var orangeAttackTimer = 0;
                            var quadradoReleases = 4;
                            do {
                                var choiced = 'false';
                                do {
                                    combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                        + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                        enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                        "\r\n \r\n Você pode: atacar(a), defender(d) ou usar uma poção de vida(p), caso tenha.");

                                    if (combatChoice == 'a' || combatChoice == 'A') {
                                        choiced = 'true';
                                        if (stamina >= 100) {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = attack * critMult - (enemyDefense);
                                                alert("CRÍTICO!");
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                finalDamage = attack - (enemyDefense);
                                                stamina = stamina - 100;
                                            }
                                        }
                                        else {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = ((attack * critMult) * (stamina / 100)) - (enemyDefense);
                                                alert("CRÍTICO!");
                                            }
                                            else {
                                                finalDamage = (attack * (stamina / 100)) - (enemyDefense);
                                                stamina = 0;
                                            }
                                        }
                                        if (quadradosSoltos > 0 && finalDamage > 0) {
                                            finalDamage = finalDamage - 3;
                                            quadradosSoltos = quadradosSoltos - 1;
                                            alert("Um quadrado voa na frente do globo, se sacrificando para remover 3 de dano.");
                                            alert(quadradosSoltos + " quadrados continuam soltos.");
                                            if (finalDamage < 0) {
                                                finalDamage = 0;
                                            }
                                        }
                                        if (finalDamage <= 0 && quadradosSoltos == 0) {
                                            alert("'Você é meio fraco, não, cara?'");
                                        }
                                        else if (finalDamage <= 4) {
                                            alert("Seu ataque acerta o Globo, porém parece não ser muito efetivo...");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else if (finalDamage <= 15) {
                                            alert("Seu ataque acerta o Globo.");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else {
                                            alert("Seu ataque dá um dano visívelmente grande ao Globo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        totalBlock = defense;

                                    }
                                    if (combatChoice == 'd' || combatChoice == 'D') {
                                        choiced = 'true';
                                        totalBlock = defense * 2;
                                        stamina = stamina + (staminaMax * 0.2);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'p' || combatChoice == 'P') {
                                        if (hpPotions > 0 && HP < totalHP) {
                                            choiced = 'true';
                                            hpPotions = hpPotions - 1;
                                            HP = totalHP;
                                            alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                            totalBlock = defense * 3;
                                        }
                                        else if (HP < totalHP && hpPotions == 0) {
                                            alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                        }
                                        else if (HP > totalHP) {
                                            alert("Você não recuperaria vida alguma.");
                                        }
                                    }
                                } while (choiced == 'false');
                                stamina = stamina + (staminaMax * 0.1);
                                if (stamina > staminaMax) {
                                    stamina = staminaMax;
                                }

                                if (enemyHP > 0) {
                                    enemyChoice = Math.floor(Math.random() * 4) + 1;

                                    if (localStorage.getItem('calamityLevel') > 3 && quadradoReleases > 0) {
                                        if ((enemyTotalHP / 4) * 3 > enemyHP && quadradoReleases == 4) {
                                            quadradosSoltos = quadradosSoltos + 4;
                                            alert("O seu ataque solta 4 quadrados refletores do globo! Estes auxiliam no ataque e na defesa do mesmo.");
                                            alert("Felizmente, eles precisam se sacrificar para ajudar na defesa, efetivamente eliminando um quadrado a cada ataque.");
                                            quadradoReleases = quadradoReleases - 1;
                                        }
                                        else if (enemyTotalHP / 2 > enemyHP && quadradoReleases == 3) {
                                            quadradosSoltos = quadradosSoltos + 6;
                                            alert("O seu ataque solta 6 quadrados refletores do globo! Estes auxiliam no ataque e na defesa do mesmo.");
                                            alert("Felizmente, eles precisam se sacrificar para ajudar na defesa, efetivamente eliminando um quadrado a cada ataque.");
                                            quadradoReleases = quadradoReleases - 1;
                                        }
                                        else if (enemyTotalHP / 4 > enemyHP && quadradoReleases == 2) {
                                            quadradosSoltos = quadradosSoltos + 8;
                                            alert("O seu ataque solta 8 quadrados refletores do globo! Estes auxiliam no ataque e na defesa do mesmo.");
                                            alert("Felizmente, eles precisam se sacrificar para ajudar na defesa, efetivamente eliminando um quadrado a cada ataque.");
                                            quadradoReleases = quadradoReleases - 1;
                                        }
                                        else if (5 > enemyHP && quadradoReleases == 1) {
                                            quadradosSoltos = quadradosSoltos + 12;
                                            alert("Com o seu ataque, saem 12 quadrados de uma vez!");
                                            alert("É melhor acabar com o globo rápido, antes que ele te mate!");
                                            quadradoReleases = quadradoReleases - 1;
                                        }
                                    }
                                    else if (quadradoReleases > 0) {

                                        if ((enemyTotalHP / 4) * 3 > enemyHP && quadradoReleases == 4) {
                                            quadradosSoltos = quadradosSoltos + 3;
                                            alert("O seu ataque solta 3 quadrados refletores do globo! Estes auxiliam no ataque e na defesa do mesmo.");
                                            alert("Felizmente, eles precisam se sacrificar para ajudar na defesa, efetivamente eliminando um quadrado a cada ataque.");
                                            quadradoReleases = quadradoReleases - 1;
                                        }
                                        else if (enemyTotalHP / 2 > enemyHP && quadradoReleases == 3) {
                                            quadradosSoltos = quadradosSoltos + 4;
                                            alert("O seu ataque solta 4 quadrados refletores do globo! Estes auxiliam no ataque e na defesa do mesmo.");
                                            alert("Felizmente, eles precisam se sacrificar para ajudar na defesa, efetivamente eliminando um quadrado a cada ataque.");
                                            quadradoReleases = quadradoReleases - 1;
                                        }
                                        else if (enemyTotalHP / 4 > enemyHP && quadradoReleases == 2) {
                                            quadradosSoltos = quadradosSoltos + 4;
                                            alert("O seu ataque solta 4 quadrados refletores do globo! Estes auxiliam no ataque e na defesa do mesmo.");
                                            alert("Felizmente, eles precisam se sacrificar para ajudar na defesa, efetivamente eliminando um quadrado a cada ataque.");
                                            quadradoReleases = quadradoReleases - 1;
                                        }
                                        else if (5 > enemyHP && quadradoReleases == 1) {
                                            quadradosSoltos = quadradosSoltos + 6;
                                            alert("Com o seu ataque, saem 6 quadrados de uma vez!");
                                            alert("É melhor acabar com o globo rápido, antes que ele te mate!");
                                            quadradoReleases = quadradoReleases - 1;
                                        }

                                    }
                                    if (localStorage.getItem('calamityLevel') > 19 && enemyHP < enemyTotalHP / 2) {
                                        alert("Por virtude dos ferimentos, mais um quadrado sai do globo sem nenhuma interferência sua.");
                                        quadradosSoltos = quadradosSoltos + 1;
                                    }
                                    if (attackReadied > 0) {
                                        if (attackReadied == 1) {
                                            alert("As luzes AMARELAS ficam ainda mais intensas!");
                                            attackReadied = 2;
                                        }
                                        else if (attackReadied == 2) {
                                            alert(enemyName + " gira rapidamente, soltanto luzes AMARELAS!");
                                            if (quadradosSoltos > 0) {
                                                alert(quadradosSoltos + " quadrado(s) está(ão) separado(s) do globo, e auxilia(m) no ataque.");
                                                enemyFinalDamage = (enemyAttack * attackReadiedBonus) + (quadradosSoltos * 0.5) - totalBlock - 1;
                                            }
                                            else {
                                                enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock;
                                            }
                                            attackReadied = 'false';

                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você bloqueia completamente as luzes.");
                                            }
                                        }
                                    }
                                    else if (redAttackTimer > 0) {
                                        alert(enemyName + " gira, soltando luzes vermelhas!");
                                        if (quadradosSoltos > 0) {
                                            alert(quadradosSoltos + " quadrado(s) está(ão) separado(s) do globo, e auxilia(m) no ataque.");
                                            enemyFinalDamage = (enemyAttack * (redAttackTimer * 0.57)) + quadradosSoltos - totalBlock;
                                        }
                                        else {
                                            enemyFinalDamage = (enemyAttack * (redAttackTimer * 0.57)) - totalBlock;
                                        }

                                        redAttackTimer = redAttackTimer - 1;
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Os raios penetram sua defesa, te dando " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Por sorte, você defende com sucesso os raios-luzes.");
                                        }
                                        if (redAttackTimer == 0) {
                                            alert("As luzes vermelhas param de sair do Globo.");
                                        }
                                        else {
                                            alert("As luzes FRAQUEJAM.");
                                        }
                                    }
                                    else if (blueAttackTimer > 0) {
                                        alert(enemyName + " solta raios de luz azuis em sua direção!");
                                        if (quadradosSoltos > 0) {
                                            alert(quadradosSoltos + " quadrado(s) está(ão) separado(s) do globo, e auxilia(m) no ataque.");
                                            enemyFinalDamage = (enemyAttack * ((4 - blueAttackTimer) * 0.57)) + quadradosSoltos - totalBlock;
                                        }
                                        else {
                                            enemyFinalDamage = (enemyAttack * ((4 - blueAttackTimer) * 0.57)) - totalBlock;
                                        }
                                        blueAttackTimer = blueAttackTimer - 1;
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Os raios penetram sua defesa, te dando " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Por sorte, você defende com sucesso os raios-luzes.");
                                        }
                                        if (blueAttackTimer == 0) {
                                            alert("As luzes azuis param de sair do Globo.");
                                        }
                                        else {
                                            alert("As luzes estão FICANDO MAIS INTENSAS com o tempo!");
                                        }
                                    }
                                    else if (orangeAttackTimer > 0) {
                                        alert(enemyName + " O Globo gira com luzes laranjas!");
                                        if (quadradosSoltos > 0) {
                                            alert(quadradosSoltos + " quadrado(s) está(ão) separado(s) do globo, e auxilia(m) no ataque.");
                                            enemyFinalDamage = (enemyAttack * 1.3) + quadradosSoltos - totalBlock;
                                        }
                                        else {
                                            enemyFinalDamage = (enemyAttack * 1.3) - totalBlock;
                                        }

                                        orangeAttackTimer = orangeAttackTimer - 1;
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Os raios penetram sua defesa, te dando " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Por sorte, você defende com sucesso os raios-luzes.");
                                        }
                                        if (orangeAttackTimer == 0) {
                                            alert("As luzes laranjas param de sair do Globo.");
                                        }
                                        else {
                                            alert("As luzes laranjas se MANTÉM na mesma velocidade e intensidade.");
                                        }
                                    }
                                    else if (enemyChoice == 1) {
                                        redAttackTimer = 3;
                                        alert("O Globo começa a carregar uma luz VERMELHA dentro de si.");

                                    }
                                    else if (enemyChoice == 2) {
                                        blueAttackTimer = 3;
                                        alert("O Globo brilha em AZUL... Em momentos, começará um ataque.");
                                    }
                                    else if (enemyChoice == 3) {
                                        orangeAttackTimer = 3;
                                        alert("O Globo começa a absorver a luz LARANJA em sua volta...");

                                    }
                                    else if (enemyChoice == 4) {
                                        alert("O Globo começa a brilhar em AMARELO!");
                                        attackReadied = 1;
                                    }
                                    else {
                                        alert("ISSO É UM ERRO!");
                                    }

                                }
                                totalBlock = 0;
                                HP = Math.floor(HP * 100) / 100;
                                enemyHP = Math.floor(enemyHP * 100) / 100;

                            } while (enemyHP > 0 && HP > 0);
                        }
                        else if (towerLevel < 30) {
                            enemyStanced = 0;
                            do {
                                var choiced = 'false';
                                do {
                                    combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                        + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                        enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                        "\r\n \r\n Você pode: atacar(a), defender(d), Ultra defender(ud) ou usar uma poção de vida(p), caso tenha.");

                                    if (combatChoice == 'a' || combatChoice == 'A') {
                                        choiced = 'true';
                                        if (stamina >= 100) {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                if (enemyStanced > 0) { finalDamage = attack * critMult - (enemyDefense * 1.3); }
                                                else { finalDamage = attack * critMult - enemyDefense; }
                                                alert("CRÍTICO!");
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = attack - (enemyDefense * 1.3); }
                                                else { finalDamage = attack - enemyDefense; }
                                                stamina = stamina - 100;
                                            }
                                        }
                                        else {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                alert("CRÍTICO!");
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                stamina = 0;
                                            }
                                        }
                                        if (finalDamage <= 0) {
                                            alert("Seu braço dorme antes de chegar no inimigo.");
                                        }
                                        else if (finalDamage <= 4) {
                                            alert("Você soca o inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else if (finalDamage <= 15) {
                                            alert("Você corta seu inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else {
                                            alert("Você dá um estrondoso ataque no inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        totalBlock = defense;

                                        stamina = stamina + (staminaMax * 0.1);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'd' || combatChoice == 'D') {
                                        choiced = 'true';
                                        totalBlock = defense * 2;
                                        stamina = stamina + (staminaMax * 0.3);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'ud' || combatChoice == 'UD' || combatChoice == 'Ud' || combatChoice == 'uD') {
                                        choiced = 'true';
                                        if (stamina >= 100) {
                                            alert("Você concentra a sua energia em sua armadura e escudo e se prepara para um ataque!");
                                            totalBlock = defense * 3;
                                            stamina = stamina - 100;
                                        }
                                        else {
                                            totalBlock = defense * 3 * (stamina / 100);
                                            stamina = 0;
                                        }
                                    }
                                    if (combatChoice == 'p' || combatChoice == 'P') {
                                        if (hpPotions > 0 && HP < totalHP) {
                                            choiced = 'true';
                                            hpPotions = hpPotions - 1;
                                            HP = totalHP;
                                            alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                            totalBlock = defense * 3;
                                        }
                                        else if (HP < totalHP && hpPotions == 0) {
                                            alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                        }
                                        else if (HP > totalHP) {
                                            alert("Você não recuperaria vida alguma.");
                                        }
                                    }
                                } while (choiced == 'false');

                                if (enemyHP > 0) {
                                    if (localStorage.getItem('calamityLevel') > 19) {
                                        if (enemyType == 2) {
                                            alert("Algo está causando a estátua a derreter constantemente! -1 HP, +0.5 ataque.");
                                            enemyHP = enemyHP - 1;
                                            enemyAttack = enemyAttack + 0.5;
                                        }
                                    }
                                    enemyStanced = enemyStanced - 1;
                                    enemyChoice = Math.floor(Math.random() * 3) + 1;
                                    if (attackReadied == 'true') {
                                        alert(enemyName + " Solta um forte ataque em sua direção!");

                                        if (enemyStanced > 0) { enemyFinalDamage = (enemyAttack * attackReadiedBonus * 1.3) - totalBlock; }
                                        else { enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock; }

                                        attackReadied = 'false';
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                    }
                                    else if (enemyChoice == 1) {
                                        alert(enemyName + " te ataca!");
                                        if (enemyStanced > 0) { enemyFinalDamage = (enemyAttack * 1.3) - totalBlock; }
                                        else { enemyFinalDamage = enemyAttack - totalBlock; }
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                        if (localStorage.getItem('calamityLevel') > 19) {
                                            if (enemyType == 1) {
                                                alert("A batida da flauta em você faz com que normaliza a respiração, recuperando 3 de vida e fazendo um barulho engraçado.");
                                                enemyHP = enemyHP + 3;
                                            }
                                        }
                                    }
                                    else if (enemyChoice == 2) {
                                        alert(enemyName + " dá um passo para trás, preparando um ataque!");
                                        attackReadied = 'true';
                                    }
                                    else {
                                        if (enemyName == 'Guerreiro Flauta') {
                                            alert("A flauta normaliza sua respiração, recuperando 3 de vida e fazendo um barulho engraçado.");
                                            enemyHP = enemyHP + 3;
                                            if (enemyHP > enemyTotalHP) {
                                                enemyHP = enemyTotalHP;
                                            }
                                        }
                                        else if (enemyName == 'Estátua Guarda') {
                                            alert("A estatua quebra uma parte própria, diminuindo sua defesa, mas melhorando seu ataque.");
                                            enemyAttack = enemyAttack + 2;
                                            enemyDefense = enemyDefense - 3;
                                        }
                                        else {
                                            alert("A cobra aplica uma dose de veneno em sua veia. Ela ganha ataque e defesa, em troca de uma vida saudável! +2 ataque, +0.5 defesa.");
                                            enemyAttack = enemyAttack + 2;
                                            enemyDefense = enemyDefense + 0.5;
                                            if (localStorage.getItem('calamityLevel') > 19) {
                                                alert("O veneno solta fumos intoxicantes que te cansam um pouco. -50 stamina atual.");
                                                stamina = stamina - 50;
                                            }
                                        }
                                    }

                                }
                                totalBlock = 0;
                            } while (enemyHP > 0 && HP > 0)
                        }
                        else if (towerLevel == 30) {
                            var enemyActualDefense = enemyDefense;

                            var bassBoosts = 0;
                            var axeReadied = 0;
                            var soundWaves = 0;
                            var soundCloud = 0;
                            var guardianArmor = 4;
                            do {
                                do {
                                    guardianTheme.play();
                                    combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                        + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                        enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                        "||bass Boosts: " + bassBoosts + " / 5 " +
                                        "\r\n \r\n Você pode: atacar(a), defender(d), Ultra defender(ud) ou usar uma poção de vida(p), caso tenha.");

                                    if (combatChoice == 'a' || combatChoice == 'A') {
                                        choiced = 'true';
                                        if (stamina >= 100) {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = attack * critMult - enemyDefense;
                                                alert("CRÍTICO!");
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                finalDamage = attack - enemyDefense;
                                                stamina = stamina - 100;
                                            }
                                        }
                                        else {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                alert("CRÍTICO!");
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                stamina = 0;
                                            }
                                        }
                                        if (finalDamage <= 0) {
                                            alert("'COMO VOCÊ CHEGOU AQUI SE NÃO CONSEGUE NEM ME MACHUCAR?'");
                                        }
                                        else if (finalDamage <= 2) {
                                            alert("Você soca o inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else if (finalDamage <= 10) {
                                            alert("Você corta seu inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else {
                                            alert("Você dá um estrondoso ataque no inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        totalBlock = defense;

                                        stamina = stamina + (staminaMax * 0.1);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'd' || combatChoice == 'D') {
                                        choiced = 'true';
                                        totalBlock = defense * 2;
                                        stamina = stamina + (staminaMax * 0.3);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'ud' || combatChoice == 'UD' || combatChoice == 'Ud' || combatChoice == 'uD') {
                                        choiced = 'true';
                                        if (stamina >= 100) {
                                            alert("Você concentra a sua energia em sua armadura e escudo e se prepara para um ataque!");
                                            totalBlock = defense * 3;
                                            stamina = stamina - 100;
                                        }
                                        else {
                                            totalBlock = defense * 3 * (stamina / 100);
                                            stamina = 0;
                                        }
                                    }
                                    if (combatChoice == 'p' || combatChoice == 'P') {
                                        if (hpPotions > 0 && HP < totalHP) {
                                            choiced = 'true';
                                            hpPotions = hpPotions - 1;
                                            HP = totalHP;
                                            alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                            totalBlock = defense * 3;
                                        }
                                        else if (HP < totalHP && hpPotions == 0) {
                                            alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                        }
                                        else if (HP > totalHP) {
                                            alert("Você não recuperaria vida alguma.");
                                        }
                                    }
                                } while (choiced == 'false');

                                if (enemyHP > 0) {
                                    if (localStorage.getItem('calamityLevel') > 19) {
                                        alert("A música está tão alta que ecoa pela sala inteira. Um bass boost é criado quando as ondas batem nas paredes.");
                                        bassBoosts = bassBoosts + 1;
                                    }

                                    if ((enemyTotalHP / 4) * 3 > enemyHP && guardianArmor == 4) {
                                        alert("O seu ataque quebra uma pequena parte da armadura do Guardião, diminuindo sua defesa, mas aumentando a mobilidade do Guardião, ou seja, seu dano.");
                                        enemyDefense = enemyDefense - 1;
                                        enemyActualDefense = enemyActualDefense - 1;
                                        enemyAttack = enemyAttack + 2;
                                        guardianArmor = guardianArmor - 1;
                                    }
                                    else if (enemyTotalHP / 2 > enemyHP && guardianArmor == 3) {
                                        alert("O seu ataque quebra uma decente parte da armadura do Guardião, diminuindo sua defesa, mas aumentando a mobilidade do Guardião, ou seja, seu dano.");
                                        enemyDefense = enemyDefense - 2;
                                        enemyActualDefense = enemyActualDefense - 2;
                                        enemyAttack = enemyAttack + 3;
                                        guardianArmor = guardianArmor - 1;
                                    }
                                    else if (enemyTotalHP / 4 > enemyHP && guardianArmor == 2) {
                                        alert("O seu ataque quebra uma grande parte da armadura do Guardião, diminuindo sua defesa, mas aumentando a mobilidade do Guardião, ou seja, seu dano.");
                                        alert("'VOCÊ É BEM FORTE, NÃO É MESMO?'");
                                        enemyDefense = enemyDefense - 2;
                                        enemyActualDefense = enemyActualDefense - 3;
                                        enemyAttack = enemyAttack + 3;
                                        guardianArmor = guardianArmor - 1;
                                    }
                                    else if (enemyTotalHP / 8 > enemyHP && guardianArmor == 1) {
                                        alert("O seu ataque quebra o a maioria da armadura do Guardião, diminuindo sua defesa, mas aumentando muito a mobilidade do Guardião, ou seja, seu dano.");
                                        alert("'HMMMMM... TALVEZ VOCÊ GANHE? VAMOS VER.'");
                                        enemyDefense = enemyDefense - 5;
                                        enemyActualDefense = enemyActualDefense - 5;
                                        enemyAttack = enemyAttack + 5;
                                        if (localStorage.getItem('calamityLevel') > 5) {
                                            enemyDefense = enemyDefense - 2;
                                            enemyActualDefense = enemyActualDefense - 2;
                                            enemyAttack = enemyAttack + 2;
                                        }
                                        guardianArmor = guardianArmor - 1;
                                    }

                                    if (soundWaves > 0) {
                                        enemyFinalDamage = enemyAttack * 0.9 - totalBlock;
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia com sucesso as ondas sonoras.");
                                        }
                                        soundWaves = soundWaves - 1;

                                        if (soundWaves > 0) {
                                            alert("As ondas continuam.");
                                        }
                                        else if (soundWaves == 0) {
                                            alert("Parece que a arena se acalma, e essas ondas param.");
                                        }
                                    }
                                    enemyChoice = Math.floor(Math.random() * 4) + 1;
                                    if (axeReadied == 1) {
                                        if (bassBoosts > 4) {
                                            axeReadied = 0;
                                            alert("As cordas da guitarra do guardião brilham com a energia guardada dos impactos!");
                                            enemyFinalDamage = (enemyAttack * 1.7 + (bassBoosts * 2)) - totalBlock;
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("De alguma forma, você bloqueia o a guitarrada aprimorada.");
                                                alert("Uma nota fora do comum toca no momento do seu bloqueio, como se tivesse guardado energia do impacto.");
                                                bassBoosts = bassBoosts + 1;
                                            }
                                            bassBoosts = 0;
                                        }
                                        else {
                                            axeReadied = 0;
                                            alert("O Guardião leva a guitarra por cima de sua cabeça, descendo rapidamente em sua direção!");
                                            enemyFinalDamage = (enemyAttack * 1.7) - totalBlock;
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("De alguma forma, você bloqueia o gigantesco ataque.");
                                                alert("Uma nota fora do comum toca no momento do seu bloqueio, como se tivesse guardado energia do impacto.");
                                                bassBoosts = bassBoosts + 1;
                                            }
                                        }
                                    }
                                    else if (enemyChoice == 1) {
                                        alert(enemyName + " Leva a guitarra gigante para trás do corpo...");
                                        if (bassBoosts > 4) {
                                            alert("A Guitarra parece fortalecida pelos bass boosts. Cuidado!");
                                        }
                                        axeReadied = 1;
                                    }
                                    else if (enemyChoice == 2) {
                                        alert("O Guardião tenta o cortar com a parte afiada da guitarra.");
                                        enemyFinalDamage = enemyAttack - totalBlock;
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                            alert("Uma nota fora do comum toca no momento do seu bloqueio, como se tivesse guardado energia do impacto.");
                                            bassBoosts = bassBoosts + 1;
                                        }
                                    }
                                    else if (enemyChoice == 3) {
                                        alert("O Guardião toca intensas notas entre a música, causando ondas de som se formarem.");
                                        soundWaves = soundWaves + 2;
                                    }
                                    else if (enemyChoice == 4) {
                                        if (soundCloud == 0) {
                                            alert("O Guardião acopla notas calmas entre a música, deixando o ar mais pesado, assim deixando seus ataques menos eficientes.");
                                            soundCloud = soundCloud + 2;
                                        }
                                        else {
                                            alert("O Guardião acopla mais notas calmas entre a música, deixando o ar mais pesado, assim deixando seus ataques menos eficientes.");
                                            soundCloud = soundCloud + 1;
                                        }
                                    }

                                    if (soundCloud > 0) {
                                        alert("Densas notas continuam dificultando seus ataques.");
                                        enemyDefense = enemyActualDefense * 1.3;
                                        soundCloud = soundCloud - 1;
                                    }
                                    else {
                                        alert("O ar está calmo, normal.");
                                        enemyDefense = enemyActualDefense;
                                    }
                                }
                                choiced = 'false';
                                totalBlock = 0;
                            } while (enemyHP > 0 && HP > 0)
                        }
                        else if (towerLevel < 40) {
                            enemyStanced = 0;
                            var fogoDraconico = 0;
                            var preparedAttack = 0;
                            var pAMult = 0;
                            do {
                                var choiced = 'false';
                                do {
                                    combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                        + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                        enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                        "\r\n \r\n Você pode: atacar(a), defender(d), Ultra defender(ud) ou usar uma poção de vida(p), caso tenha.");

                                    if (combatChoice == 'a' || combatChoice == 'A') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        if (stamina >= 100) {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                if (enemyStanced > 0) { finalDamage = attack * critMult - (enemyDefense * 1.3); }
                                                else { finalDamage = attack * critMult - enemyDefense; }
                                                alert("CRÍTICO!");
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = attack - (enemyDefense * 1.3); }
                                                else { finalDamage = attack - enemyDefense; }
                                                stamina = stamina - 100;
                                            }
                                        }
                                        else {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                alert("CRÍTICO!");
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                stamina = 0;
                                            }
                                        }
                                        if (finalDamage <= 0) {
                                            alert("Seu braço dorme antes de chegar no inimigo.");
                                        }
                                        else if (finalDamage <= 4) {
                                            alert("Você soca o inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else if (finalDamage <= 15) {
                                            alert("Você corta seu inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else {
                                            alert("Você dá um estrondoso ataque no inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        totalBlock = defense;

                                        stamina = stamina + (staminaMax * 0.1);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'd' || combatChoice == 'D') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        totalBlock = defense * 2;
                                        stamina = stamina + (staminaMax * 0.3);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'ud' || combatChoice == 'UD' || combatChoice == 'Ud' || combatChoice == 'uD') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        if (stamina >= 100) {
                                            alert("Você concentra a sua energia em sua armadura e escudo e se prepara para um ataque!");
                                            totalBlock = defense * 3;
                                            stamina = stamina - 100;
                                        }
                                        else {
                                            totalBlock = defense * 3 * (stamina / 100);
                                            stamina = 0;
                                        }
                                    }
                                    if (combatChoice == 'pa' || combatChoice == 'PA' || combatChoice == 'Pa' || combatChoice == 'pA') {
                                        choiced = 'true';
                                        totalBlock = defense * 1.1;
                                        if (preparedAttack == 1) {
                                            preparedAttack = 0;
                                            finalDamage = (pAMult * attack) - enemyDefense;
                                            if (finalDamage <= 0) {
                                                alert("Hmmm, você não dá dano nenhum. parece que você não carregou energia o suficiente?");
                                            }
                                            else if (finalDamage <= 10) {
                                                alert("Você dá um decente corte no inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else if (finalDamage <= 20) {
                                                alert("Você solta um grande corte no inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else {
                                                alert("Com toda a energia acumulada, você dá um estrondoso corte no inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                        }
                                        else {
                                            preparedAttack = 1;
                                            if (stamina >= 150) {
                                                alert("Você acumula uma gigantesca quantidade de energia em sua espada!");
                                                pAMult = 2;
                                                stamina = stamina - 150;
                                            }
                                            else {
                                                alert("Você coloca a stamina que tinha na sua lâmina...");
                                                pAMult = stamina / 150;
                                                stamina = 0;
                                            }
                                            totalBlock = defense * 1.1;
                                            alert("Se quiser, você pode cancelar o seu ataque no próximo turno se seu " +
                                                "oponente for fazer algo assustador, mas assim você perderá o ataque carregado (pa para continuar, outra coisa caso queira, bem, fazer outra coisa)");
                                        }
                                    }
                                    if (combatChoice == 'p' || combatChoice == 'P') {
                                        if (hpPotions > 0 && HP < totalHP) {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            hpPotions = hpPotions - 1;
                                            HP = totalHP;
                                            alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                            totalBlock = defense * 3;
                                        }
                                        else if (HP < totalHP && hpPotions == 0) {
                                            alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                        }
                                        else if (HP > totalHP) {
                                            alert("Você não recuperaria vida alguma.");
                                        }
                                    }
                                } while (choiced == 'false');

                                if (enemyHP > 0) {
                                    if (localStorage.getItem('calamityLevel') > 19) {
                                        if (enemyType == 2) {
                                            alert("Pedras em volta se asimilam ao golem, recuperando sua vida. +1 HP.");
                                            enemyHP = enemyHP + 1;
                                        }
                                    }

                                    enemyStanced = enemyStanced - 1;
                                    enemyChoice = Math.floor(Math.random() * 3) + 1;
                                    if (fogoDraconico == 1) {
                                        alert(enemyName + " solta um cone gigantesco de fogo na sua direção!");
                                        enemyFinalDamage = (enemyAttack * 4) - totalBlock;
                                        fogoDraconico = 0;
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("De alguma forma, você bloqueia todo aquele fogo chegando a você.");
                                        }
                                    }
                                    else if (attackReadied == 'true') {
                                        alert(enemyName + " Solta um forte ataque em sua direção!");

                                        if (enemyStanced > 0) { enemyFinalDamage = (enemyAttack * attackReadiedBonus * 1.3) - totalBlock; }
                                        else { enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock; }

                                        attackReadied = 'false';
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                    }
                                    else if (enemyChoice == 1) {
                                        alert(enemyName + " te ataca!");
                                        if (enemyStanced > 0) { enemyFinalDamage = (enemyAttack * 1.3) - totalBlock; }
                                        else { enemyFinalDamage = enemyAttack - totalBlock; }
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                    }
                                    else if (enemyChoice == 2) {
                                        alert(enemyName + " dá um passo para trás, preparando um ataque!");
                                        attackReadied = 'true';
                                    }
                                    else {
                                        if (enemyName == 'Espada flutuante') {
                                            alert("A espada começa a fazer movimentos parecidos com uma dança, e parece que o encantamento" +
                                                " da espada fica mais intenso, aumentando o ataque e a defesa da espada em 3!");
                                            enemyAttack = enemyAttack + 3;
                                            enemyDefense = enemyDefense + 3;
                                            if (localStorage.getItem('calamityLevel') > 19) {
                                                alert("A dança revitaliza a espada, recuperando sua vida em 9!");
                                                enemyHP = enemyHP + 9;
                                            }
                                        }
                                        else if (enemyName == 'Clone junior dracônico') {
                                            alert("O Clone começa a juntar muito calor dentro do seu tórax! Por ser um clone, parece que seu corpo se danifica por causa disso, mas este ataque com certeza vai ser gigantesco!");
                                            enemyHP = enemyHP - 10;
                                            fogoDraconico = 1;
                                            if (localStorage.getItem('calamityLevel') > 19) {
                                                alert("Pra piorar, o calor faz com que celulas no ar encrustem na pele de como defesa! +5 defesa.");
                                                enemyDefense = enemyDefense + 5;
                                            }
                                        }
                                        else if (enemyName == 'Golem de ferro') {
                                            alert("O golem derrete uma parte interna para melhorar sua potência em combate! (Perde vida, ganha 3 de ataque!)");
                                            enemyHP = enemyHP - 7;
                                            enemyAttack = enemyAttack + 3;
                                        }
                                    }

                                }
                                totalBlock = 0;
                            } while (enemyHP > 0 && HP > 0)
                        }
                        else if (towerLevel == 40) {
                            var raboMetalico = false;
                            var defesaAlada = 0;
                            var preparedAttack = 0;
                            var staminaMult = 1;
                            var pAMult = 0;
                            var enemyPrep = 0;
                            var enemyStanced = 0;
                            do {
                                do {
                                    var choiced = 'false';
                                    do {
                                        arcoPhase1.play();
                                        combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                            + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                            enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                            "\r\n \r\n Você pode: atacar(a), defender(d), Ultra defender(ud) ou usar uma poção de vida(p), caso tenha.");

                                        if (combatChoice == 'a' || combatChoice == 'A') {
                                            choiced = 'true';
                                            totalBlock = defense * 1;
                                            preparedAttack = 0;
                                            if (enemyPrep == 1) {
                                                alert("O dragão, preparado com seu ataque, defere um pouco de seu ataque para o lado, defendo o resto.");
                                                alert("Apesar de não dar dano algum, o movimento que o Arco fez o tirou do estado de preparo!");
                                                enemyPrep = 0;
                                                stamina = stamina - 100;
                                                if (stamina < 0) {
                                                    stamina = 0;
                                                }
                                            }
                                            else {
                                                if (stamina >= 100) {
                                                    if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                        if (enemyStanced > 0) { finalDamage = attack * critMult - (enemyDefense * 1.3); }
                                                        else { finalDamage = attack * critMult - enemyDefense; }
                                                        alert("CRÍTICO!");
                                                        stamina = stamina - 100;
                                                    }
                                                    else {
                                                        if (enemyStanced > 0) { finalDamage = attack - (enemyDefense * 1.3); }
                                                        else { finalDamage = attack - enemyDefense; }
                                                        stamina = stamina - 100;
                                                    }
                                                }
                                                else {
                                                    if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                        finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                        alert("CRÍTICO!");
                                                    }
                                                    else {
                                                        if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                        else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                        stamina = 0;
                                                    }
                                                }
                                                if (finalDamage <= 0) {
                                                    alert("O seu ataque para nas escamas do dragão, sem causar dano algum.");
                                                }
                                                else if (finalDamage <= 12) {
                                                    alert("Sua espada passa em meio as escamas do Arco, mas não consegue o machucar muito.");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }
                                                else if (finalDamage <= 25) {
                                                    alert("Você ataca bem após ver uma abertura, e consegue dar um dano visível ao Arco!");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }
                                                else {
                                                    alert("Por algum milagre, seu ataque não só sai pesado, mas entra perfeitamente entre as escamas!");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }

                                                stamina = stamina + (staminaMax * 0.1 * staminaMult);
                                                if (stamina > staminaMax) {
                                                    stamina = staminaMax;
                                                }
                                            }
                                        }
                                        if (combatChoice == 'd' || combatChoice == 'D') {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            totalBlock = defense * 2;
                                            stamina = stamina + (staminaMax * 0.3 * staminaMult);
                                            if (stamina > staminaMax) {
                                                stamina = staminaMax;
                                            }
                                        }
                                        if (combatChoice == 'ud' || combatChoice == 'UD' || combatChoice == 'Ud' || combatChoice == 'uD') {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            if (stamina >= 100) {
                                                alert("Você concentra a sua energia em sua armadura e escudo e se prepara para um ataque!");
                                                totalBlock = defense * 3;
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                totalBlock = defense * 3 * (stamina / 100);
                                                stamina = 0;
                                            }
                                        }
                                        if (combatChoice == 'pa' || combatChoice == 'PA' || combatChoice == 'Pa' || combatChoice == 'pA') {
                                            choiced = 'true';
                                            if (preparedAttack == 1) {
                                                preparedAttack = 0;
                                                finalDamage = (pAMult * attack) - enemyDefense;
                                                if (enemyPrep == 1 && finalDamage > 9) {
                                                    alert("Apesar de estar preparado, o seu ataque ainda pelas defesas do Arco, desestabilizando o seu preparo.");
                                                    finalDamage = finalDamage - 9;
                                                    enemyPrep = 0;
                                                }
                                                else if (enemyPrep == 1) {
                                                    finalDamage = 0;
                                                    enemyPrep = 0;
                                                }
                                                if (finalDamage <= 0) {
                                                    alert("O seu ataque para nas escamas do dragão, sem causar dano algum. Parece que você não carregou energia o suficiente?");
                                                }
                                                else if (finalDamage <= 10) {
                                                    alert("Sua espada passa em meio as escamas do Arco, mas não consegue o machucar muito.");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }
                                                else if (finalDamage <= 25) {
                                                    alert("Você ataca bem após ver uma abertura, e consegue dar um dano visível ao Arco!");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }
                                                else {
                                                    alert("Com toda a energia acumulada, seu ataque não só sai pesado, mas entra perfeitamente entre as escamas!");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }
                                                totalBlock = defense;
                                            }
                                            else {
                                                preparedAttack = 1;
                                                if (stamina >= 150) {
                                                    alert("Você acumula uma gigantesca quantidade de energia em sua espada!");
                                                    pAMult = 2;
                                                    stamina = stamina - 150;
                                                }
                                                else {
                                                    alert("Você coloca a stamina que tinha na sua lâmina...");
                                                    pAMult = stamina / 150;
                                                    stamina = 0;
                                                }
                                                totalBlock = defense * 1.1;
                                                alert("Se quiser, você pode cancelar o seu ataque no próximo turno se seu " +
                                                    "oponente for fazer algo assustador, mas assim você perderá o ataque carregado (pa para continuar, outra coisa caso queira, bem, fazer outra coisa)");
                                            }
                                        }
                                        if (combatChoice == 'p' || combatChoice == 'P') {
                                            if (hpPotions > 0 && HP < totalHP) {
                                                choiced = 'true';
                                                hpPotions = hpPotions - 1;
                                                HP = totalHP * 1.5;
                                                alert("Você tira uma poção da sua mochila e a bebe parece que o calor deixou ela melhor! Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                                totalBlock = defense * 3;
                                            }
                                            else if (HP < totalHP && hpPotions == 0) {
                                                alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                            }
                                            else if (HP > totalHP) {
                                                alert("Você não recuperaria vida alguma.");
                                            }
                                        }
                                    } while (choiced == 'false');


                                    if (enemyHP > 0) {
                                        enemyStanced = enemyStanced - 1;
                                        enemyChoice = Math.floor(Math.random() * 4) + 1;
                                        if (staminaMult == 1 && enemyHP < enemyTotalHP / 2) {
                                            alert("O Arco para por um momento. 'Será a dor, ou está pensando em algo?' você pensa.");
                                            alert("Mas não era nada disso. Momentos após ele parar, você percebe que a arena está esquentando!");
                                            alert("Enquanto não quente a ponto de te machucar, você percebe que seus movimentos cansam muito mais.");
                                            alert("Pelo restante da batalha, você recupera muito menos stamina que o normal.");
                                            staminaMult = 0.65;
                                            if (localStorage.getItem('calamityLevel') > 19) {
                                                alert("Para piorar, essa mudança repentina faz com que pedras caem em sua direção!");
                                                enemyFinalDamage = 30 - totalBlock;;
                                                if (enemyFinalDamage > 0) {
                                                    HP = HP - enemyFinalDamage;
                                                    alert("Você leva " + enemyFinalDamage + " de dano.");
                                                }
                                                else {
                                                    alert("Você corta todas as pedras ao meio.");
                                                }
                                            }
                                        }
                                        else if (raboMetalico == true) {
                                            alert("O Arco avança as lâminas de seu rabo na sua direção, como um escorpião!");
                                            if (localStorage.getItem('calamityLevel') > 7) {
                                                enemyFinalDamage = (enemyAttack * attackReadiedBonus) + 3 - totalBlock;
                                            }
                                            else {
                                                enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock;
                                            }

                                            raboMetalico = false;
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você bloqueia completamente o ataque do inimigo.");
                                            }
                                        }
                                        else if (defesaAlada == 1) {
                                            alert("O arco continua com as asas o protegendo. CUIDADO!!");
                                            defesaAlada = 2;

                                        }
                                        else if (defesaAlada == 2) {
                                            alert("O arco abre a guarda, lhe acertando com as asas cortantes e abrindo espaço para uma fúria de mordidas!");
                                            enemyFinalDamage = (enemyAttack * 3) - totalBlock;
                                            enemyDefense = enemyDefense / 2;
                                            defesaAlada = 0;
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você bloqueia completamente o ataque do inimigo.");
                                            }
                                        }
                                        else if (enemyChoice == 1) {
                                            alert("O Dragão te morde vorazmente!");
                                            enemyFinalDamage = enemyAttack - totalBlock;
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você consegue esquivar de algumas mordidas, e defender o resto.");
                                            }
                                            if (localStorage.getItem('calamityLevel') > 19) {
                                                alert("Além disso, ele se prepara para um futuro ataque seu! (sim, ele resolveu fazer duas coisas de uma vez)");
                                                enemyPrep = 1;
                                            }
                                        }
                                        else if (enemyChoice == 2) {
                                            alert("O arco dá um passo para trás e prepara sua cauda! Cuidado!");
                                            raboMetalico = true;
                                        }
                                        else if (enemyChoice == 3) {
                                            alert("O arco posiciona as asas na frente de seu corpo!");
                                            defesaAlada = 1;
                                            enemyDefense = enemyDefense * 2;
                                        }
                                        else if (enemyChoice == 4) {
                                            alert("O dragão reajusta sua posição de acordo com seus movimentos, preparando contra seu próximo ataque.");
                                            enemyPrep = 1;
                                            if (localStorage.getItem('calamityLevel') > 19) {
                                                alert("Além disso, ele prepara sua cauda! (sim, ele resolveu fazer duas coisas de uma vez)");
                                                raboMetalico = true;
                                            }
                                        }

                                    }
                                    totalBlock = 0;
                                } while (enemyHP > 0 && HP > 0);
                                arcoPhase1.pause();
                                enemyHP = 1;
                                if (HP > 0) {
                                    alert("O seu ataque faz o Dragão cambalear para trás...");
                                    alert("...Mas ao invés de cair, a besta metálica dá um rugido e bate as asas, te jogando para trás e erguendo-a no ar, onde você não consegue acertá-la.");
                                    alert("apesar da boca do Arco não se mover, você escuta algo... Uma voz... Na sua cabeça, talvez?");
                                    alert("'Hmmmmm. Bem como eu esperava. Você derrotou o guardião de qualquer forma, então não seria de esperar que eu não usasse o meu total na nossa luta.'");
                                    alert("'Mesmo assim, eu não consigo não me incomodar do meu mestre não o levar a sério. Vamos ver se ele tem razão ou não.'");
                                    alert("O Arco continua voando, longe do seu alcançe!");
                                    var enemyFlying = true;
                                    var healPhase = true;
                                    var heatHealthLoss = 0;
                                    var enemyLives = 1;
                                }
                                if (HP > 0 && enemyLives == 1) {
                                    enemyLives = 0;
                                    do {
                                        do {
                                            var choiced = 'false';
                                            do {
                                                combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                                    + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                                    enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                                    "\r\n \r\n Você pode: atacar(a), defender(d), Ultra defender(ud) ou usar uma poção de vida(p), caso tenha.");

                                                if (combatChoice == 'a' || combatChoice == 'A') {
                                                    choiced = 'true';
                                                    preparedAttack = 0;

                                                    totalBlock = defense;
                                                    if (enemyFlying == true) {
                                                        alert("Ah... Você ataca em direção ao Dragão, até perceber QUE O DRAGÃO ESTÁ VOANDO NO AR, LONGE DO SEU ALCANCE.");
                                                        stamina = stamina - 100;
                                                        if (stamina < 0) {
                                                            stamina = 0;
                                                        }
                                                    }
                                                    else if (enemyPrep == 1) {
                                                        alert("O dragão, preparado com seu ataque, defere um pouco de seu ataque para o lado, defendo o resto.");
                                                        alert("Apesar de não dar dano algum, o movimento que o Arco fez o tirou do estado de preparo!");
                                                        enemyPrep = 0;
                                                    }
                                                    else {
                                                        if (stamina >= 100) {
                                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                                if (enemyStanced > 0) { finalDamage = attack * critMult - (enemyDefense * 1.3); }
                                                                else { finalDamage = attack * critMult - enemyDefense; }
                                                                alert("CRÍTICO!");
                                                                stamina = stamina - 100;
                                                            }
                                                            else {
                                                                if (enemyStanced > 0) { finalDamage = attack - (enemyDefense * 1.3); }
                                                                else { finalDamage = attack - enemyDefense; }
                                                                stamina = stamina - 100;
                                                            }
                                                        }
                                                        else {
                                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                                finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                                alert("CRÍTICO!");
                                                            }
                                                            else {
                                                                if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                                else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                                stamina = 0;
                                                            }
                                                        }
                                                        if (finalDamage <= 0) {
                                                            alert("O seu ataque para nas escamas do dragão, sem causar dano algum.");
                                                        }
                                                        else if (finalDamage <= 8) {
                                                            alert("Sua espada passa em meio as escamas do Arco, mas não consegue o machucar muito.");
                                                            enemyHP = enemyHP - finalDamage;
                                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                        }
                                                        else if (finalDamage <= 22) {
                                                            alert("Você ataca bem após ver uma abertura, e consegue dar um dano visível ao Arco!");
                                                            enemyHP = enemyHP - finalDamage;
                                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                        }
                                                        else {
                                                            alert("Por algum milagre, seu ataque não só sai pesado, mas entra perfeitamente entre as escamas!");
                                                            enemyHP = enemyHP - finalDamage;
                                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                        }

                                                        stamina = stamina + (staminaMax * 0.1 * staminaMult);
                                                        if (stamina > staminaMax) {
                                                            stamina = staminaMax;
                                                        }
                                                    }
                                                }
                                                if (combatChoice == 'd' || combatChoice == 'D') {
                                                    choiced = 'true';
                                                    preparedAttack = 0;
                                                    totalBlock = defense * 2;
                                                    stamina = stamina + (staminaMax * 0.3 * staminaMult);
                                                    if (stamina > staminaMax) {
                                                        stamina = staminaMax;
                                                    }
                                                }
                                                if (combatChoice == 'ud' || combatChoice == 'UD' || combatChoice == 'Ud' || combatChoice == 'uD') {
                                                    choiced = 'true';
                                                    preparedAttack = 0;
                                                    if (stamina >= 100) {
                                                        alert("Você concentra a sua energia em sua armadura e escudo e se prepara para um ataque!");
                                                        totalBlock = defense * 3;
                                                        stamina = stamina - 100;
                                                    }
                                                    else {
                                                        totalBlock = defense * 3 * (stamina / 100);
                                                        stamina = 0;
                                                    }
                                                }
                                                if (combatChoice == 'pa' || combatChoice == 'PA' || combatChoice == 'Pa' || combatChoice == 'pA') {
                                                    choiced = 'true';
                                                    if (preparedAttack == 1) {
                                                        preparedAttack = 0;
                                                        finalDamage = (pAMult * attack) - enemyDefense;
                                                        if (enemyPrep == 1 && finalDamage > 9) {
                                                            alert("Apesar de estar preparado, o seu ataque ainda pelas defesas do Arco, desestabilizando o seu preparo.");
                                                            finalDamage = finalDamage - 9;
                                                            enemyPrep = 0;
                                                        }
                                                        else if (enemyPrep == 1) {
                                                            finalDamage = 0;
                                                            enemyPrep = 0;
                                                        }
                                                        if (finalDamage <= 0) {
                                                            alert("O seu ataque para nas escamas do dragão, sem causar dano algum. Parece que você não carregou energia o suficiente?");
                                                        }
                                                        else if (finalDamage <= 10) {
                                                            alert("Sua espada passa em meio as escamas do Arco, mas não consegue o machucar muito.");
                                                            enemyHP = enemyHP - finalDamage;
                                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                        }
                                                        else if (finalDamage <= 25) {
                                                            alert("Você ataca bem após ver uma abertura, e consegue dar um dano visível ao Arco!");
                                                            enemyHP = enemyHP - finalDamage;
                                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                        }
                                                        else {
                                                            alert("Com toda a energia acumulada, seu ataque não só sai pesado, mas entra perfeitamente entre as escamas!");
                                                            enemyHP = enemyHP - finalDamage;
                                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                        }
                                                        totalBlock = defense;
                                                    }
                                                    else {
                                                        preparedAttack = 1;
                                                        if (stamina >= 150) {
                                                            alert("Você acumula uma gigantesca quantidade de energia em sua espada!");
                                                            pAMult = 2;
                                                            stamina = stamina - 150;
                                                        }
                                                        else {
                                                            alert("Você coloca a stamina que tinha na sua lâmina...");
                                                            pAMult = stamina / 150;
                                                            stamina = 0;
                                                        }
                                                        totalBlock = defense * 1.1;
                                                        alert("Se quiser, você pode cancelar o seu ataque no próximo turno se seu " +
                                                            "oponente for fazer algo assustador, mas assim você perderá o ataque carregado (pa para continuar, outra coisa caso queira, bem, fazer outra coisa)");
                                                    }
                                                }
                                                if (combatChoice == 'p' || combatChoice == 'P') {
                                                    if (hpPotions > 0 && HP < totalHP) {
                                                        choiced = 'true';
                                                        preparedAttack = 0;
                                                        hpPotions = hpPotions - 1;
                                                        HP = totalHP * 1.5;
                                                        alert("Você tira uma poção da sua mochila e a bebe, e parece que a poção está melhor pelo calor! Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                                        totalBlock = defense * 3;
                                                    }
                                                    else if (HP < totalHP && hpPotions == 0) {
                                                        alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                                    }
                                                    else if (HP > totalHP) {
                                                        alert("Você não recuperaria vida alguma.");
                                                    }
                                                }
                                            } while (choiced == 'false');

                                            alert(" Você perde " + heatHealthLoss + " de vida pelo calor.");
                                            HP = HP - heatHealthLoss;
                                            if (localStorage.getItem('calamityLevel') > 19) {
                                                alert("Pedras estão constantemente caindo do teto agora!");
                                                enemyFinalDamage = 35 - totalBlock;;
                                                if (enemyFinalDamage > 0) {
                                                    HP = HP - enemyFinalDamage;
                                                    alert("Você leva " + enemyFinalDamage + " de dano.");
                                                }

                                                else {
                                                    alert("Você corta todas as pedras ao meio.");
                                                }
                                            }

                                            if (enemyHP > 0) {
                                                enemyStanced = enemyStanced - 1;
                                                enemyChoice = Math.floor(Math.random() * 4) + 1;
                                                if (healPhase == true) {
                                                    if (localStorage.getItem('calamityLevel') > 7) {
                                                        enemyHP = enemyHP + (2 * enemyTotalHP / 3);
                                                    }
                                                    else {
                                                        enemyHP = enemyHP + (enemyTotalHP / 3);
                                                    }
                                                    if (enemyHP >= enemyTotalHP) {
                                                        if (localStorage.getItem('calamityLevel') > 7) {
                                                            enemyHP = (4 * enemyTotalHP / 3);
                                                        }
                                                        else {
                                                            enemyHP = enemyTotalHP;
                                                        }
                                                        enemyFlying = false;
                                                        healPhase = false;
                                                        alert("A arena ficou escaldante, e o calor é mais que seu corpo consegue aguentar - por longos períodos de tempo, isso é.");
                                                        alert("A partir de agora, você receberá 0.5 de dano no final de cada turno.");
                                                        heatHealthLoss = 0.5;
                                                        alert("Enquanto isso, o Arco desce ao chão, com sua vitalidade renovada, e com suas escamas metálicas extremamente quentes, deixando os seus ataques mais fortes, mas suas defesas mais fracas.");
                                                        enemyAttack = enemyAttack + 2;
                                                        enemyDefense = enemyDefense - 3;
                                                        arcoPhase2.play();
                                                        alert("'PARECE QUE É HORA DO SEGUNDO ROUND!', você pensa.");
                                                        alert("Now Playing: Roar of the Jungle Dragon - DM DOKURO - Calamity Mod");
                                                    }
                                                    else {
                                                        alert("Enquanto o Dragão está voando, a arena vai ficando cada vez mais quente, e com a arena aquecendo...");
                                                        alert("As escamas metálicas vão ficando mais quentes!");
                                                    }
                                                }
                                                else if (heatHealthLoss == 0.5 && enemyHP < enemyTotalHP / 2) {
                                                    alert("O Arco para novamente. Com um rugido, você sente a arena ficando ainda mais escaldante.");
                                                    alert("As escamas dele ficam brancas de tão quentes, ficando ainda mais potentes no ataque e fracas na defesa.")
                                                    enemyAttack = enemyAttack + 2;
                                                    enemyDefense = enemyDefense - 3;
                                                    alert("'Meu corpo não foi feito para essas temperaturas', você pensa.");
                                                    alert("'Eu devo ir o mais rápido possível, caso não queira morrer pelo calor...'");
                                                    alert("A cada turno, você recebe agora 1 de dano pelo calor!");
                                                    heatHealthLoss = 1;

                                                    if (localStorage.getItem('calamityLevel') > 19) {
                                                        alert("Mais uma vez, essa mudança repentina faz com que pedras caem em sua direção, mas essas estão flamejantes e são maiores!");
                                                        enemyFinalDamage = 35 - totalBlock;
                                                        if (enemyFinalDamage > 0) {
                                                            HP = HP - enemyFinalDamage;
                                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                                        }
                                                        else {
                                                            alert("Você corta todas as pedras ao meio.");
                                                        }
                                                    }
                                                }
                                                else if (raboMetalico == true) {
                                                    alert("O Arco avança as lâminas de seu rabo na sua direção, como um escorpião!");
                                                    enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock;

                                                    raboMetalico = false;
                                                    if (enemyFinalDamage > 0) {
                                                        HP = HP - enemyFinalDamage;
                                                        alert("Você leva " + enemyFinalDamage + " de dano.");
                                                    }
                                                    else {
                                                        alert("Você bloqueia completamente o ataque do inimigo.");
                                                    }
                                                }
                                                else if (defesaAlada == 1) {
                                                    alert("O arco continua com as asas o protegendo. CUIDADO!!");
                                                    defesaAlada = 2;

                                                }
                                                else if (defesaAlada == 2) {
                                                    alert("O arco abre a guarda, lhe acertando com as asas cortantes e abrindo espaço para uma fúria de mordidas!");
                                                    enemyFinalDamage = (enemyAttack * 3) - totalBlock;
                                                    enemyDefense = enemyDefense / 2;
                                                    defesaAlada = 0;
                                                    if (enemyFinalDamage > 0) {
                                                        HP = HP - enemyFinalDamage;
                                                        alert("Você leva " + enemyFinalDamage + " de dano.");
                                                    }
                                                    else {
                                                        alert("Você bloqueia completamente o ataque do inimigo.");
                                                    }
                                                    if (localStorage.getItem('calamityLevel') > 19) {
                                                        alert("Além disso, ele prepara sua cauda mais uma vez, porque sim. (sim, ele resolveu fazer duas coisas de uma vez)");
                                                        raboMetalico = true;
                                                    }
                                                }
                                                else if (enemyChoice == 1) {
                                                    alert("O Dragão te morde vorazmente!");
                                                    enemyFinalDamage = enemyAttack - totalBlock;
                                                    if (enemyFinalDamage > 0) {
                                                        HP = HP - enemyFinalDamage;
                                                        alert("Você leva " + enemyFinalDamage + " de dano.");
                                                    }
                                                    else {
                                                        alert("Você consegue esquivar de algumas mordidas, e defender o resto.");
                                                    }
                                                    if (localStorage.getItem('calamityLevel') > 19) {
                                                        alert("Além disso, ele prepara pasa o seu próximo ataque! (sim, ele resolveu fazer duas coisas de uma vez)");
                                                        enemyPrep = 1;
                                                    }
                                                }
                                                else if (enemyChoice == 2) {
                                                    alert("O arco dá um passo para trás e prepara sua cauda! Cuidado!");
                                                    raboMetalico = true;
                                                }
                                                else if (enemyChoice == 3) {
                                                    alert("O arco posiciona as asas na frente de seu corpo!");
                                                    defesaAlada = 1;
                                                    enemyDefense = enemyDefense * 2;
                                                    if (localStorage.getItem('calamityLevel') > 19) {
                                                        alert("Além disso, ele prepara sua cauda! (sim, ele resolveu fazer duas coisas de uma vez)");
                                                        raboMetalico = true;
                                                    }
                                                }
                                                else if (enemyChoice == 4) {
                                                    alert("O dragão reajusta sua posição de acordo com seus movimentos, preparando contra seu próximo ataque.");
                                                    enemyPrep = 1;
                                                    if (localStorage.getItem('calamityLevel') > 19) {
                                                        alert("Além disso, ele prepara sua cauda! (sim, ele resolveu fazer duas coisas de uma vez)");
                                                        raboMetalico = true;
                                                    }
                                                    
                                                }

                                            }
                                            totalBlock = 0;
                                        } while (enemyHP > 0 && HP > 0)

                                    } while (enemyHP > 0 && HP > 0)
                                }
                            } while (enemyHP > 0 && HP > 0)
                        }
                        else if (towerLevel < 50) {
                            enemyStanced = 0;
                            var fogoDraconico = 0;
                            var preparedAttack = 0;
                            var pAMult = 0;
                            do {
                                var choiced = 'false';
                                do {
                                    combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                        + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                        enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                        "\r\n \r\n Você pode: atacar(a), defender(d), Ultra defender(ud) ou usar uma poção de vida(p), caso tenha.");

                                    if (combatChoice == 'a' || combatChoice == 'A') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        if (stamina >= 100) {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                if (enemyStanced > 0) { finalDamage = attack * critMult - (enemyDefense * 1.3); }
                                                else { finalDamage = attack * critMult - enemyDefense; }
                                                alert("CRÍTICO!");
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = attack - (enemyDefense * 1.3); }
                                                else { finalDamage = attack - enemyDefense; }
                                                stamina = stamina - 100;
                                            }
                                        }
                                        else {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                alert("CRÍTICO!");
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                stamina = 0;
                                            }
                                        }
                                        if (finalDamage <= 0) {
                                            alert("Seu braço dorme antes de chegar no inimigo.");
                                        }
                                        else if (finalDamage <= 4) {
                                            alert("Você soca o inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else if (finalDamage <= 15) {
                                            alert("Você corta seu inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else {
                                            alert("Você dá um estrondoso ataque no inimigo!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        totalBlock = defense;

                                        stamina = stamina + (staminaMax * 0.1);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'd' || combatChoice == 'D') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        totalBlock = defense * 2;
                                        stamina = stamina + (staminaMax * 0.3);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'ud' || combatChoice == 'UD' || combatChoice == 'Ud' || combatChoice == 'uD') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        if (stamina >= 100) {
                                            alert("Você concentra a sua energia em sua armadura e escudo e se prepara para um ataque!");
                                            totalBlock = defense * 3;
                                            stamina = stamina - 100;
                                        }
                                        else {
                                            totalBlock = defense * 3 * (stamina / 100);
                                            stamina = 0;
                                        }
                                    }
                                    if (combatChoice == 'pa' || combatChoice == 'PA' || combatChoice == 'Pa' || combatChoice == 'pA') {
                                        choiced = 'true';
                                        if (preparedAttack == 1) {
                                            totalBlock = defense * 1.1;
                                            preparedAttack = 0;
                                            finalDamage = (pAMult * attack) - enemyDefense;
                                            if (finalDamage <= 0) {
                                                alert("Hmmm, você não dá dano nenhum. parece que você não carregou energia o suficiente?");
                                            }
                                            else if (finalDamage <= 10) {
                                                alert("Você dá um decente corte no inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else if (finalDamage <= 20) {
                                                alert("Você solta um grande corte no inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else {
                                                alert("Com toda a energia acumulada, você dá um estrondoso corte no inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                        }
                                        else {
                                            preparedAttack = 1;
                                            if (stamina >= 150) {
                                                alert("Você acumula uma gigantesca quantidade de energia em sua espada!");
                                                pAMult = 2;
                                                stamina = stamina - 150;
                                            }
                                            else {
                                                alert("Você coloca a stamina que tinha na sua lâmina...");
                                                pAMult = stamina / 150;
                                                stamina = 0;
                                            }
                                            totalBlock = defense * 1.1;
                                            alert("Se quiser, você pode cancelar o seu ataque no próximo turno se seu " +
                                                "oponente for fazer algo assustador, mas assim você perderá o ataque carregado (pa para continuar, outra coisa caso queira, bem, fazer outra coisa)");
                                        }
                                    }
                                    if (combatChoice == 'p' || combatChoice == 'P') {
                                        if (hpPotions > 0 && HP < totalHP) {
                                            preparedAttack = 0;
                                            choiced = 'true';
                                            hpPotions = hpPotions - 1;
                                            HP = totalHP;
                                            alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                            totalBlock = defense * 3;
                                        }
                                        else if (HP < totalHP && hpPotions == 0) {
                                            alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                        }
                                        else if (HP > totalHP) {
                                            alert("Você não recuperaria vida alguma.");
                                        }
                                    }
                                } while (choiced == 'false');

                                if (enemyHP > 0) {
                                    if (localStorage.getItem('calamityLevel') > 19 && enemyName == 'Torreta atira lancas') {
                                        alert("A Torreta atira lancas automaticamente melhora seu ataque carregado com sua computação superior!(+0.5x)");
                                        attackReadiedBonus = attackReadiedBonus + 0.5;
                                    }
                                    enemyStanced = enemyStanced - 1;
                                    enemyChoice = Math.floor(Math.random() * 3) + 1;
                                    if (attackReadied == 'true') {
                                        alert(enemyName + " Solta um forte ataque em sua direção!");

                                        if (enemyStanced > 0) { enemyFinalDamage = (enemyAttack * attackReadiedBonus * 1.3) - totalBlock; }
                                        else { enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock; }

                                        attackReadied = 'false';
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                    }
                                    else if (enemyChoice == 1) {
                                        alert(enemyName + " te ataca!");
                                        if (enemyStanced > 0) { enemyFinalDamage = (enemyAttack * 1.3) - totalBlock; }
                                        else { enemyFinalDamage = enemyAttack - totalBlock; }
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o ataque do inimigo.");
                                        }
                                        if (localStorage.getItem('calamityLevel') > 19 && enemyName == 'Torreta magica') {
                                            alert("A Torreta magica atira em você mais uma vez, visto que não foi com a sua cara!");
                                            enemyFinalDamage = enemyAttack - totalBlock;
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }

                                            else {
                                                alert("Você bloqueia completamente o segundo ataque.");
                                            }
                                        }
                                    }
                                    else if (enemyChoice == 2) {
                                        alert(enemyName + " começa a carregar um ataque forte!");
                                        attackReadied = 'true';
                                    }
                                    else {
                                        if (enemyName == 'Torreta magica') {
                                            alert("A torreta analiza você, procurando pontos fracos em sua armadura. (+4 ataque)");
                                            enemyAttack = enemyAttack + 4;
                                        }
                                        else if (enemyName == 'Torreta atira lancas') {
                                            alert("A torreta prepara mais lanças para serem atiradas, melhorando o ataque carregado dela! (+0.5x)");
                                            attackReadiedBonus = attackReadiedBonus + 0.5;
                                        }
                                        else if (enemyName == 'Armadilha 1000 bracos') {
                                            alert("A armadilha cria outro braco, melhorando seu ataque e defesa em 3!");
                                            enemyDefense = enemyDefense + 3;
                                            enemyAttack = enemyAttack + 3;
                                            if (localStorage.getItem('calamityLevel') > 19) {
                                                alert("Esse braço novo te soca diretamente.");
                                                enemyFinalDamage = enemyAttack - totalBlock;
                                                if (enemyFinalDamage > 0) {
                                                    HP = HP - enemyFinalDamage;
                                                    alert("Você leva " + enemyFinalDamage + " de dano.");
                                                }

                                                else {
                                                    alert("Você corta todas as pedras ao meio.");
                                                }
                                            }
                                        }
                                    }

                                }
                                totalBlock = 0;
                            } while (enemyHP > 0 && HP > 0)
                        }
                        else if (towerLevel == 50) {
                            enemyStanced = 0;
                            var lightWeak = 0;
                            do {
                                do {
                                    var choiced = 'false';
                                    combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                        + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                        enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                        "\r\n \r\n Você pode: atacar(a), defender(d), Ultra defender(ud) ou usar uma poção de vida(p), caso tenha.");

                                    if (combatChoice == 'a' || combatChoice == 'A') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        if (stamina >= 100) {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                if (enemyStanced > 0) { finalDamage = attack * critMult - (enemyDefense * 1.3); }
                                                else { finalDamage = attack * critMult - enemyDefense; }
                                                alert("CRÍTICO!");
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = attack - (enemyDefense * 1.3); }
                                                else { finalDamage = attack - enemyDefense; }
                                                stamina = stamina - 100;
                                            }
                                        }
                                        else {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                alert("CRÍTICO!");
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                stamina = 0;
                                            }
                                        }
                                        if (finalDamage <= 0) {
                                            alert("Seu ataque acerta o Violino, porém não dá dano.");
                                        }
                                        else if (finalDamage <= 5) {
                                            alert("Você acerta o Violino, mas o dano é mínimo.");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else if (finalDamage <= 25) {
                                            alert("Você acerta o Violino.");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        else {
                                            alert("Você acerta um estrondoso ataque no Violino!");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                        }
                                        totalBlock = defense;

                                        stamina = stamina + (staminaMax * 0.1);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'd' || combatChoice == 'D') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        totalBlock = defense * 2;
                                        stamina = stamina + (staminaMax * 0.3);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'ud' || combatChoice == 'UD' || combatChoice == 'Ud' || combatChoice == 'uD') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        if (stamina >= 100) {
                                            alert("Você concentra a sua energia em sua armadura e escudo e se prepara para um ataque!");
                                            totalBlock = defense * 3;
                                            stamina = stamina - 100;
                                        }
                                        else {
                                            totalBlock = defense * 3 * (stamina / 100);
                                            stamina = 0;
                                        }
                                    }
                                    if (combatChoice == 'pa' || combatChoice == 'PA' || combatChoice == 'Pa' || combatChoice == 'pA') {
                                        choiced = 'true';
                                        if (preparedAttack == 1) {
                                            totalBlock = defense * 1.1;
                                            preparedAttack = 0;
                                            finalDamage = (pAMult * attack) - enemyDefense;
                                            if (finalDamage <= 0) {
                                                alert("Hmmm, você não dá dano nenhum. parece que você não carregou energia o suficiente?");
                                            }
                                            else if (finalDamage <= 15) {
                                                alert("Você dá um decente corte no Violino!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else if (finalDamage <= 30) {
                                                alert("Você solta um grande corte no Violino!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else {
                                                alert("Com toda a energia acumulada, você dá um estrondoso corte no Violino!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                        }
                                        else {
                                            preparedAttack = 1;
                                            if (stamina >= 150) {
                                                alert("Você acumula uma gigantesca quantidade de energia em sua espada!");
                                                pAMult = 2;
                                                stamina = stamina - 150;
                                            }
                                            else {
                                                alert("Você coloca a stamina que tinha na sua lâmina...");
                                                pAMult = stamina / 150;
                                                stamina = 0;
                                            }
                                            totalBlock = defense * 1.1;
                                            alert("Se quiser, você pode cancelar o seu ataque no próximo turno se seu " +
                                                "oponente for fazer algo assustador, mas assim você perderá o ataque carregado (pa para continuar, outra coisa caso queira, bem, fazer outra coisa)");
                                        }
                                    }
                                    if (combatChoice == 'p' || combatChoice == 'P') {
                                        if (hpPotions > 0 && HP < totalHP) {
                                            preparedAttack = 0;
                                            choiced = 'true';
                                            hpPotions = hpPotions - 1;
                                            HP = totalHP;
                                            alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                            totalBlock = defense * 3;
                                        }
                                        else if (HP < totalHP && hpPotions == 0) {
                                            alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                        }
                                        else if (HP > totalHP) {
                                            alert("Você não recuperaria vida alguma.");
                                        }
                                    }
                                } while (choiced == 'false');

                                if (enemyHP > 0) {
                                    if (lightWeak > 0) {
                                        lightWeak = lightWeak - 1;
                                        defense = defense + 1;
                                        attack = attack + 1;
                                        alert("Você se recompõe um pouco, recuperando 1 ataque e 1 defesa perdidos.")
                                    }
                                    enemyStanced = enemyStanced - 1;
                                    enemyChoice = Math.floor(Math.random() * 3) + 1;
                                    if (attackReadied == 'true') {
                                        alert("O Violino solta um gancho de esquerda em sua direção.");

                                        if (enemyStanced > 0) { enemyFinalDamage = (enemyAttack * attackReadiedBonus * 1.3) - totalBlock; }
                                        else { enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock; }

                                        attackReadied = 'false';
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você consegue bloquear o golpe.");
                                        }
                                    }
                                    else if (enemyChoice == 1) {
                                        alert(enemyName + " anda na sua direção para te dar um soco!");
                                        if (enemyStanced > 0) { enemyFinalDamage = (enemyAttack * 1.3) - totalBlock; }
                                        else { enemyFinalDamage = enemyAttack - totalBlock; }
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você bloqueia completamente o soco do Violino.");
                                        }
                                        if (localStorage.getItem('calamityLevel') > 9) {
                                            alert("O violino rotaciona o corpo e solta um segundo e mais poderoso soco!");
                                            if (enemyStanced > 0) { enemyFinalDamage = (enemyAttack * 1.3) - totalBlock; }
                                            else { enemyFinalDamage = enemyAttack + 2 - totalBlock; }
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você bloqueia completamente o segundo soco.");
                                            }
                                        }
                                    }
                                    else if (enemyChoice == 2) {
                                        alert("O violino prepara um gancho de esquerda.");
                                        attackReadied = 'true';
                                    }
                                    else {
                                        if (localStorage.getItem('calamityLevel') > 19) {
                                            alert("'Caia.'");
                                            alert("Você perde sua compostura com essas palavras. Seu ataque e defesa diminuiram em 4!");
                                            lightWeak = lightWeak + 4;
                                            attack = attack - 4;
                                            defense = defense - 4;
                                        }
                                        if (lightWeak == 0) {
                                            alert("'Sabe, só teve uma pessoa que eu não consegui derrotar somente usando os meus punhos.'");
                                            alert("Estas palavras fazem você tremer tremendamente. Seu ataque e defesa diminuiram em 4!");
                                            lightWeak = lightWeak + 4;
                                            attack = attack - 4;
                                            defense = defense - 4;
                                        }
                                        else {
                                            alert("'Você não acha que já é hora de desistir?'");
                                            alert("Sua mão enfraquece um pouco. Seu ataque e defesa diminuiram em 2!");
                                            lightWeak = lightWeak + 2;
                                            attack = attack - 2;
                                            defense = defense - 2;
                                        }
                                    }

                                }
                                totalBlock = 0;
                            } while (enemyHP > 0 && HP > 0)
                            if (HP > 0) {
                                alert("Você enfia sua espada com toda a força no Violino.");
                                alert("...");
                                alert("'Ah...");
                                alert("'Parece que nossa batalha será interessante mesmo! Vou usar mais do que meus punhos desta vez.'");
                                alert("Quando você olha para baixo, percebe que o Violino tirou a sua espada de dentro dele.");
                                alert("'Sinceramente, parabéns. Você é a segunda pessoa que me forçou a lutar sério.'");
                                alert("P R E P A R E - S E.");
                                ViolinPhase3.play();
                                alert("Repentinamente, uma aura gigantesca de poder começa a emanar do Violino. É difícil até ficar em " +
                                    "pé perto dele.");
                                alert("Você recupera metade da sua stamina por turno agora!");
                                enemyLives = 1;
                                enemyHP = 400;
                                enemyTotalHP = 400;
                                enemyAttack = 25;
                                if (localStorage.getItem('calamityLevel') > 9) {
                                    enemyHP = enemyHP + 100;
                                    enemyTotalHP = enemyTotalHP + 100;
                                    enemyAttack = 26;
                                }
                                if (localStorage.getItem('calamityLevel') > 10) {
                                    enemyHP = enemyHP + (5 * (localStorage.getItem('calamityLevel') - 10));
                                    enemyTotalHP = enemyTotalHP + (5 * (localStorage.getItem('calamityLevel') - 10));
                                }
                                enemyDefense = 8;
                                var tresToques = 0;
                                var carnica = 0;
                                var assovioDaMorte = 0;
                                var assovioDaMorteEX = 0;
                                var violinoAlive = 1;
                                do {
                                    do {
                                        var choiced = 'false';
                                        combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                            + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x" + " | poções de vida: " + hpPotions + "\r\n \r\n" +
                                            enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                            "\r\n \r\n Você pode: atacar(a), defender(d), Ultra defender(ud) ou usar uma poção de vida(p), caso tenha.");

                                        if (combatChoice == 'a' || combatChoice == 'A') {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            if (stamina >= 100) {
                                                if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                    if (enemyStanced > 0) { finalDamage = attack * critMult - (enemyDefense * 1.3); }
                                                    else { finalDamage = attack * critMult - enemyDefense; }
                                                    alert("CRÍTICO!");
                                                    stamina = stamina - 100;
                                                }
                                                else {
                                                    if (enemyStanced > 0) { finalDamage = attack - (enemyDefense * 1.3); }
                                                    else { finalDamage = attack - enemyDefense; }
                                                    stamina = stamina - 100;
                                                }
                                            }
                                            else {
                                                if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                    finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                    alert("CRÍTICO!");
                                                }
                                                else {
                                                    if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                    else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                    stamina = 0;
                                                }
                                            }
                                            if (finalDamage <= 0) {
                                                alert("Seu ataque acerta o Violino, porém não dá dano.");
                                            }
                                            else if (finalDamage <= 5) {
                                                alert("Você acerta o Violino, mas o dano é mínimo.");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else if (finalDamage <= 25) {
                                                alert("Você acerta o Violino.");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else {
                                                alert("Você acerta um estrondoso ataque no Violino!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            totalBlock = defense;

                                            stamina = stamina + (staminaMax * 0.05);
                                            if (stamina > staminaMax) {
                                                stamina = staminaMax;
                                            }
                                        }
                                        if (combatChoice == 'd' || combatChoice == 'D') {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            totalBlock = defense * 2;
                                            stamina = stamina + (staminaMax * 0.15);
                                            if (stamina > staminaMax) {
                                                stamina = staminaMax;
                                            }
                                        }
                                        if (combatChoice == 'ud' || combatChoice == 'UD' || combatChoice == 'Ud' || combatChoice == 'uD') {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            if (stamina >= 100) {
                                                alert("Você concentra a sua energia em sua armadura e escudo e se prepara para um ataque!");
                                                totalBlock = defense * 3;
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                totalBlock = defense * 3 * (stamina / 100);
                                                stamina = 0;
                                            }
                                        }
                                        if (combatChoice == 'pa' || combatChoice == 'PA' || combatChoice == 'Pa' || combatChoice == 'pA') {
                                            choiced = 'true';
                                            if (preparedAttack == 1) {
                                                totalBlock = defense * 1.1;
                                                preparedAttack = 0;
                                                finalDamage = (pAMult * attack) - enemyDefense;
                                                if (finalDamage <= 0) {
                                                    alert("Hmmm, você não dá dano nenhum. parece que você não carregou energia o suficiente?");
                                                }
                                                else if (finalDamage <= 15) {
                                                    alert("Você dá um decente corte no Violino!");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }
                                                else if (finalDamage <= 30) {
                                                    alert("Você solta um grande corte no Violino!");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }
                                                else {
                                                    alert("Com toda a energia acumulada, você dá um estrondoso corte no Violino!");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }
                                            }
                                            else {
                                                preparedAttack = 1;
                                                if (stamina >= 150) {
                                                    alert("Você acumula uma gigantesca quantidade de energia em sua espada!");
                                                    pAMult = 2;
                                                    stamina = stamina - 150;
                                                }
                                                else {
                                                    alert("Você coloca a stamina que tinha na sua lâmina...");
                                                    pAMult = stamina / 150;
                                                    stamina = 0;
                                                }
                                                totalBlock = defense * 1.1;
                                                alert("Se quiser, você pode cancelar o seu ataque no próximo turno se seu " +
                                                    "oponente for fazer algo assustador, mas assim você perderá o ataque carregado (pa para continuar, outra coisa caso queira, bem, fazer outra coisa)");
                                            }
                                        }
                                        if (combatChoice == 'p' || combatChoice == 'P') {
                                            if (hpPotions > 0 && HP < totalHP) {
                                                preparedAttack = 0;
                                                choiced = 'true';
                                                hpPotions = hpPotions - 1;
                                                HP = totalHP;
                                                alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                                totalBlock = defense * 3;
                                            }
                                            else if (HP < totalHP && hpPotions == 0) {
                                                alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                            }
                                            else if (HP > totalHP) {
                                                alert("Você não recuperaria vida alguma.");
                                            }
                                        }
                                    } while (choiced == 'false');

                                    if (localStorage.getItem('calamityLevel') > 19) {
                                            alert("Parece que o poder do Violino está crescendo constantemente! É uma corrida contra o tempo! +0.5 ataque, +0.5 defesa.");
                                            enemyAttack = enemyAttack + 0.5;
                                            enemyDefense = enemyDefense + 0.5;
                                        }
                                    if (lightWeak > 0) {
                                        lightWeak = lightWeak - 1;
                                        defense = defense + 1;
                                        attack = attack + 1;
                                        alert("Você se recompõe um pouco, recuperando 1 ataque e 1 defesa perdidos.")
                                    }
                                    if (carnica > 0) {
                                        carnica = carnica - 1;
                                        enemyDefense = enemyDefense - 1;
                                        enemyAttack = enemyAttack - 1;
                                        alert("O som estridente do toque da carniça diminui um pouco, e o Violino perde 1 de ataque e " +
                                            "1 de defesa.")
                                    }
                                    if (assovioDaMorte > 0) {
                                        assovioDaMorte = assovioDaMorte - 1;
                                        alert("Um raio gigantesco está saindo do Violino.");
                                        enemyFinalDamage = 70 - totalBlock;
                                        if (localStorage.getItem('calamityLevel') > 9) {
                                            enemyFinalDamage = 75 - totalBlock;
                                        }
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você consegue defender o gigantesco ataque.");
                                        }
                                        if (assovioDaMorte > 0) {
                                            alert("O raio continua.");
                                        }
                                        else {
                                            alert("O raio parou de sair do Violino.");
                                            alert("Você percebe que o ataque quebrou duas pilastras.");
                                        }
                                    }
                                    else if (assovioDaMorteEX > 0) {
                                        assovioDaMorteEX = assovioDaMorteEX - 1;
                                        alert("Um raio COLOSSAL está saindo do Violino.");
                                        enemyHP = 1;
                                        enemyFinalDamage = 75 - totalBlock;
                                        if (localStorage.getItem('calamityLevel') > 9) {
                                            enemyFinalDamage = 80 - totalBlock;
                                        }
                                        if (enemyFinalDamage > 1) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            alert("Você consegue defender a maioria do ataque, mas ainda leva 1 de dano.");
                                            HP = HP - 1;
                                        }
                                        if (assovioDaMorteEX > 0) {
                                            alert("O raio continua.");
                                        }
                                        else {
                                            violinoAlive = 0;
                                            alert("O raio parou de sair do Violino.");
                                        }
                                    }

                                    else if (enemyHP <= 200 && enemyLives == 1) {
                                        alert("'Você realmente pensa que está perto de me derrotar?'");
                                        alert("'Infelizmente para você, eu mal começei.'");
                                        enemyLives = 0;
                                        enemyHP = enemyTotalHP;
                                        alert("O Violino recupera toda sua vida e prepara: 'Assovio da morte'.");
                                        assovioDaMorte = 2;
                                    }
                                    else if (enemyHP <= 1 && enemyLives == 0) {
                                        alert("'EU...'");
                                        alert("'AINDA NÃO ACABEI!!!'");
                                        enemyLives = -1;
                                        enemyHP = 1;
                                        alert("O Violino prepara: 'Assovio da morte EX'.");
                                        alert("Parece que o corpo do Violino aguentará até o ataque acabar.");
                                        assovioDaMorteEX = 3;
                                        if (localStorage.getItem('calamityLevel') > 19) {
                                            alert("'Infelizmente para você, eu estou conseguindo assoviar POR MAIS TEMPO QUE O COSTUME!'");
                                            alert("'APROXIMADAMENTE UM TURNO A MAIS, SE QUISER SABER!!!'");
                                            assovioDaMorteEX = 4;
                                        }
                                    }
                                    else if (enemyLives == 1) {
                                        enemyChoice = Math.floor(Math.random() * 4) + 1;
                                        if (tresToques != 0) {
                                            if (tresToques == 1) {
                                                alert("O Violino acaba de preparar: 'Melodia de três toques'.");
                                                tresToques = tresToques + 1;
                                                if (localStorage.getItem('calamityLevel') > 19) {
                                                    alert("Ele começa já a preparar o ataque que vai usar depois deste: 'Acorde de dois toques'.");
                                                    attackReadied = 'true';
                                                }
                                            }
                                            else if (tresToques == 2) {
                                                alert("O Violino toca: 'Melodia de três toques'.");
                                                enemyFinalDamage = (enemyAttack * 3) - totalBlock;
                                                tresToques = 0;
                                                if (enemyFinalDamage > 0) {
                                                    HP = HP - enemyFinalDamage;
                                                    alert("Você leva " + enemyFinalDamage + " de dano.");
                                                }
                                                else {
                                                    alert("Você consegue bloquear todos os três golpes.");
                                                }
                                            }
                                        }
                                        else if (attackReadied == 'true') {
                                            alert("O Violino toca: 'Acorde de dois toques'.");

                                            enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock;

                                            attackReadied = 'false';
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você consegue bloquear os dois golpes.");
                                            }
                                        }
                                        else if (enemyChoice == 1) {
                                            alert("O Violino toca: 'Fogo Dracônico'");
                                            enemyFinalDamage = enemyAttack - totalBlock;
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você bloqueia completamente o golpe do Violino.");
                                            }
                                            if (localStorage.getItem('calamityLevel') > 19) {
                                                    alert("Ele começa já a preparar o ataque que vai usar depois deste: 'Melodia de três toques'.");
                                                    tresToques = 1;
                                                }
                                        }
                                        else if (enemyChoice == 2) {
                                            alert("O Violino prepara: 'Acorde de dois toques'.");
                                            attackReadied = 'true';
                                        }
                                        else if (enemyChoice == 3) {
                                            alert("O Violino prepara: 'Melodia de três toques'.");
                                            tresToques = tresToques + 1;
                                        }
                                        else if (enemyChoice == 4) {
                                            alert("O Violino toca: 'Toque do carniceiro'.");
                                            if (carnica == 0) {
                                                carnica = 3;
                                                enemyAttack = enemyAttack + 3;
                                                enemyDefense = enemyDefense + 3;
                                                alert("A defesa e o ataque do Violino aumentam em 3!");
                                            }
                                            else {
                                                if (localStorage.getItem('calamityLevel') > 9) {
                                                    alert("Já que o som da carniça ainda está tocando, o Violino recupera vida e aumenta a sua defesa e ataque em 2!");
                                                    carnica = carnica + 2;
                                                    enemyAttack = enemyAttack + 2;
                                                    enemyDefense = enemyDefense + 2;
                                                    enemyHP = enemyHP + 10;
                                                }
                                                alert("Já que o som da carniça ainda está tocando, o Violino recupera vida.");
                                                enemyHP = enemyHP + 10;
                                            }
                                        }
                                    }

                                    else if (enemyLives == 0) {
                                        enemyChoice = Math.floor(Math.random() * 4) + 1;
                                        if (tresToques != 0) {
                                            if (tresToques == 1) {
                                                alert("O Violino acaba de preparar: 'Melodia de três toques EX'.");
                                                if (localStorage.getItem('calamityLevel') > 9) {
                                                    alert("As notas de preparo te deixam tonto, e você perde 15 de stamina!");
                                                    stamina = stamina - 15;
                                                }
                                                tresToques = tresToques + 1;
                                            }
                                            else if (tresToques == 2) {
                                                alert("O Violino toca: 'Melodia de três toques EX'.");
                                                enemyFinalDamage = (enemyAttack * 3) - totalBlock;
                                                tresToques = 0;
                                                if (enemyFinalDamage > 0) {
                                                    HP = HP - enemyFinalDamage;
                                                    alert("Você leva " + enemyFinalDamage + " de dano.");
                                                }
                                                else {
                                                    alert("Você consegue bloquear todos os três golpes.");
                                                }
                                                if (localStorage.getItem('calamityLevel') > 19) {
                                                    alert("Ele começa já a preparar o ataque que vai usar depois deste: 'Acorde de dois toques'.");
                                                    attackReadied = 'true';
                                                }
                                            }
                                        }
                                        else if (attackReadied == 'true') {
                                            alert("O Violino toca: 'Acorde de dois toques EX'.");

                                            enemyFinalDamage = (enemyAttack * attackReadiedBonus + 2) - totalBlock;

                                            attackReadied = 'false';
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você consegue bloquear os dois golpes.");
                                            }
                                        }

                                        else if (enemyChoice == 1) {
                                            alert("O Violino toca: 'Fogo Dracônico EX'");
                                            enemyFinalDamage = enemyAttack - totalBlock;
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você bloqueia completamente o golpe do Violino.");
                                            }
                                            if (localStorage.getItem('calamityLevel') > 19) {
                                                    alert("Ele começa já a preparar o ataque que vai usar depois deste: 'Melodia de três toques'.");
                                                    tresToques = 1;
                                                }
                                        }
                                        else if (enemyChoice == 2) {
                                            alert("O Violino prepara: 'Acorde de dois toques EX'.");
                                            attackReadied = 'true';
                                            if (localStorage.getItem('calamityLevel') > 9) {
                                                alert("As notas de preparo te deixam tonto, e você perde 15 de stamina!");
                                                stamina = stamina - 15;
                                            }
                                        }
                                        else if (enemyChoice == 3) {
                                            alert("O Violino prepara: 'Melodia de três toques EX'.");
                                            tresToques = tresToques + 1;
                                            if (localStorage.getItem('calamityLevel') > 9) {
                                                alert("As notas de preparo te deixam tonto, e você perde 15 de stamina!");
                                                stamina = stamina - 15;
                                            }
                                        }
                                        if (enemyChoice == 4 && localStorage.getItem('calamityLevel') > 19) {
                                                alert("O violino toca a nota marrom, te deixando mais fraco! -500 stamina");
                                                stamina = stamina - 500;
                                            }
                                        else if (enemyChoice == 4) {
                                            alert("O Violino toca: 'Toque do carniceiro EX'.");
                                            if (carnica == 0) {
                                                carnica = carnica + 4;
                                                enemyAttack = enemyAttack + 4;
                                                enemyDefense = enemyDefense + 4;
                                                alert("A defesa e o ataque do Violino aumentam em 4!");
                                            }
                                            else {
                                                alert("O som da carniça aumenta!");
                                                carnica = carnica + 2;
                                                enemyAttack = enemyAttack + 2;
                                                enemyDefense = enemyDefense + 2;
                                                alert("O ataque e a defesa do Violino aumentam em 2!");
                                            }
                                        }
                                        if (enemyChoice == 4 && localStorage.getItem('calamityLevel') > 19) {
                                                alert("O violino toca a nota marrom, te deixando mais fraco! -500 stamina");
                                                stamina = stamina - 500;
                                            }
                                    }
                                    totalBlock = 0;
                                } while (violinoAlive == 1 && HP > 0)
                            }
                        }

                        else if (towerLevel > 50) {

                            enemyStanced = 0;
                            var lightWeak = 0;
                            if (tubaroBlade == 1 && lightCrown == 1) {
                                alert("A sua lâmina transborda com energia tubaro de uma forma peculiar. Por algum motivo, você sente um alívio imenso.");
                                alert("Sua coroa de luz brilha mais intensamente que o normal, como se a mesma soubesse de algo que você não sabe.");
                                alert("Por algum motivo, você se sente como se algo horrivel fosse acontecer com você em diferentes circunstâncias.");
                            }
                            else if (tubaroBlade == 1) {
                                alert("A sua lâmina transborda com energia tubaro de uma forma peculiar. Por algum motivo, você sente um alívio imenso.");
                                alert("Por algum motivo, você se sente como se algo horrivel fosse acontecer com você em diferentes circunstâncias.");
                            }
                            else if (lightCrown == 1) {
                                alert("Sua coroa de luz brilha mais intensamente que o normal, como se a mesma soubesse de algo que você não sabe.");
                                alert("Por algum motivo, você se sente como se algo horrivel fosse acontecer com você em diferentes circunstâncias.");
                            }
                            else {
                                HP = totalHP;
                            }
                            do {
                                do {
                                    darkness1.volume = 1;
                                    Violino1.pause();
                                    var choiced = 'false';
                                    combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                        + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x\r\n \r\n" +
                                        enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                        "\r\n \r\n Você pode: atacar(a), defender(d), Ultra defender(ud) ou usar uma poção de vida(p), caso tenha.");

                                    if (combatChoice == 'a' || combatChoice == 'A') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        if (stamina >= 100) {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                if (enemyStanced > 0) { finalDamage = attack * critMult - (enemyDefense * 1.3); }
                                                else { finalDamage = attack * critMult - enemyDefense; }
                                                alert("CRÍTICO!");
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = attack - (enemyDefense * 1.3); }
                                                else { finalDamage = attack - enemyDefense; }
                                                stamina = stamina - 100;
                                            }
                                        }
                                        else {
                                            if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                alert("CRÍTICO!");
                                            }
                                            else {
                                                if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                stamina = 0;
                                            }
                                        }
                                        if (tubaroBlade == 0 && lightCrown == 0) {
                                            alert("Você ataca, mas não acerta nada.");
                                        }
                                        else if (finalDamage <= 0) {
                                            alert("Você acerta algo, mas sente que não fez nada.");
                                        }
                                        else if (finalDamage <= 5) {
                                            alert("Você corta alguma coisa.");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " em... Algo.");
                                        }
                                        else if (finalDamage <= 25) {
                                            alert("Você corta violentamente alguma coisa.");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " em... Algo.");
                                        }
                                        else {
                                            alert("Você acerta um poderoso corte em alguma coisa.");
                                            enemyHP = enemyHP - finalDamage;
                                            alert("Você dá " + finalDamage + " em... Algo.");
                                        }
                                        totalBlock = defense;

                                        stamina = stamina + (staminaMax * 0.1);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'd' || combatChoice == 'D') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        totalBlock = defense * 2;
                                        stamina = stamina + (staminaMax * 0.3);
                                        if (stamina > staminaMax) {
                                            stamina = staminaMax;
                                        }
                                    }
                                    if (combatChoice == 'ud' || combatChoice == 'UD' || combatChoice == 'Ud' || combatChoice == 'uD') {
                                        choiced = 'true';
                                        preparedAttack = 0;
                                        if (stamina >= 100) {
                                            alert("Você concentra a sua energia em sua armadura e escudo e se prepara para um ataque!");
                                            totalBlock = defense * 3;
                                            stamina = stamina - 100;
                                        }
                                        else {
                                            totalBlock = defense * 3 * (stamina / 100);
                                            stamina = 0;
                                        }
                                    }
                                    if (combatChoice == 'pa' || combatChoice == 'PA' || combatChoice == 'Pa' || combatChoice == 'pA') {
                                        choiced = 'true';
                                        if (preparedAttack == 1) {
                                            totalBlock = defense * 1.1;
                                            preparedAttack = 0;
                                            finalDamage = (pAMult * attack) - enemyDefense;
                                            if (tubaroBlade == 0 && lightCrown == 0) {
                                                alert("Você ataca com seu poder acumulado, mas não acerta nada.");
                                            }
                                            else if (finalDamage <= 0) {
                                                alert("Você acerta algo com todo o poder acumulado, mas sente que não fez nada.");
                                            }
                                            else if (finalDamage <= 15) {
                                                alert("Você corta o ar com sua energia acumulada.");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " em... Algo.");
                                            }
                                            else if (finalDamage <= 35) {
                                                alert("Você corta violentamente o ar com sua energia acumulada.");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " em... Algo.");
                                            }
                                            else {
                                                alert("Você acerta um poderoso corte no ar com sua energia acumulada.");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " em... Algo.");
                                            }
                                        }
                                        else {
                                            preparedAttack = 1;
                                            if (stamina >= 150) {
                                                alert("Você acumula uma gigantesca quantidade de energia em sua espada!");
                                                pAMult = 2;
                                                stamina = stamina - 150;
                                            }
                                            else {
                                                alert("Você coloca a stamina que tinha na sua lâmina...");
                                                pAMult = stamina / 150;
                                                stamina = 0;
                                            }
                                            totalBlock = defense * 1.1;
                                            alert("Se quiser, você pode cancelar o seu ataque no próximo turno se seu " +
                                                "oponente for fazer algo assustador, mas assim você perderá o ataque carregado (pa para continuar, outra coisa caso queira, bem, fazer outra coisa)");
                                        }
                                    }
                                    if (combatChoice == 'p' || combatChoice == 'P') {

                                        alert("Poção nenhuma conseguiria te ajudar com isso.");
                                    }
                                } while (choiced == 'false');

                                if (enemyHP > 0) {
                                    if ((tubaroBlade == 1 || lightCrown == 1) && localStorage.getItem('calamityLevel') > 9) {
                                        alert("Mesmo com poderosos itens, a escuridão te pega de raspão.");
                                        alert("Uma pequena parte de você é engolida.");
                                        alert("Você perde 0.25 de vida máxima e atual.");
                                        HP = HP - 0.25;
                                        totalHP = totalHP - 0.25;
                                    }
                                    else if (tubaroBlade == 1 || lightCrown == 1) {
                                        alert("A escuridão está se movendo.");
                                    }
                                    else {
                                        alert("A escuridão cresce mais um pouco.");
                                        alert("Você é engolido por uma dor crescente, enquanto vai ficando mais fraco.");
                                        alert("Você perde 2 de vida máxima e atual.");
                                        alert("Você perde 3 de ataque e 3 de defesa.");
                                        HP = HP - 2;
                                        totalHP = totalHP - 2;
                                        attack = attack - 3;
                                        defense = defense - 3;
                                    }
                                    if (localStorage.getItem('calamityLevel') > 19 && enemyHP < enemyTotalHP) {
                                        alert("A escuridão se remolda em volta de onde você havia cortado. +15 vida.");
                                        enemyHP = enemyHP + 15;
                                    }
                                }
                                totalBlock = 0;
                            } while (enemyHP > 0 && HP > 0)
                            if (HP <= 0) {
                            }
                            else {
                                darkness1.volume = 0.9;
                                alert("Este seu corte fez alguma diferença, você sente.");
                                darkness1.volume = 0.8;
                                alert("A escuridão para de se mover, e você começa a escutar algo.");
                                darkness1.volume = 0.65;
                                alert("Primeiramente, está tão baixo que você não consegue distinguir, mas o som vai ficando mais alto.");
                                darkness1.volume = 0.5;
                                alert("Som, na verdade, é uma descrição ruim. Talvez a pior que eu já fiz. Na verdade, isso se assemelha mais com...");
                                darkness1.volume = 0.4;
                                alert("...sussurros.");
                                darkness1.volume = 0.3;
                                alert("Sussuros com nenhuma voz em particular, mas sim uma conjunção de vozes.");
                                darkness1.volume = 0.25;
                                alert("'ah...'");
                                if (localStorage.getItem('calamityLevel') > 9) {
                                    alert("'mais uma vez...");
                                    darkness1.volume = 0.2;
                                    alert("'com um item que me compreende...'");
                                    darkness1.volume = 0.15;
                                    alert("'mas desta vez...'");
                                    alert("'esta brincadeira sua...'");
                                    alert("'me deixou com toda minha força...'");
                                    alert("'por que você deixou chegar neste ponto..?'");
                                    darkness1.volume = 0.1;
                                    alert("'...'");
                                    alert("'bom...'");
                                    alert("'não importa mais...'");
                                    darkness1.volume = 0.05;
                                    alert("'e além disso...'");
                                    alert("'eu tenho a impressão que é o que queria...'");
                                    alert("'e então, é isso que vai ter...'");
                                    alert("'prepare-se...'");
                                }
                                else {
                                    if (localStorage.getItem('darkness') != 'yes') {
                                        alert("'você realmente veio...'");
                                        darkness1.volume = 0.2;
                                        alert("'me surpreende...'");
                                        alert("'que você tenha trago...'");
                                        darkness1.volume = 0.15;
                                        alert("'um item como esse...'");
                                        alert("'um item que consegue me compreender...'");
                                        alert("'na primeira vez que você me encontra...'");
                                        alert("'por que você está aqui..?'");
                                        darkness1.volume = 0.1;
                                        alert("'...'");
                                        alert("'bom...'");
                                        alert("'não importa...'");
                                        darkness1.volume = 0.05;
                                        alert("'está luta está fadada a acontecer sempre que você chegar aqui...'");
                                        alert("'e quando você perder...'");
                                        alert("'você vai voltar a me entreter...'");
                                        alert("'todos vocês...'");
                                        alert("'até aquele violino...'");
                                    }
                                    if (localStorage.getItem('darkness') == 'yes') {
                                        alert("'de novo...'");
                                        darkness1.volume = 0.2;
                                        alert("'de novo, você está aqui na minha frente...'");
                                        alert("'desta vez, você trouxe algo...'");
                                        alert("'um item que consegue me compreender...'");
                                        darkness1.volume = 0.15;
                                        alert("'mesmo assim...'");
                                        alert("'eu ainda não entendo...'");
                                        alert("'por que você está aqui novamente..?'");
                                        alert("'...'");
                                        darkness1.volume = 0.1;
                                        alert("'bom...'");
                                        alert("'não importa...'");
                                        alert("'você não vai mudar nada...'");
                                        darkness1.volume = 0.05;
                                        alert("'está luta está fadada a acontecer sempre que você chegar aqui...'");
                                        alert("'e quando você perder...'");
                                        alert("'você vai voltar a me entreter...'");
                                        alert("'todos vocês...'");
                                        alert("'até aquele violino...'");
                                    }
                                }
                                darkness1.pause();
                                darkness2.play();
                                alert("Apesar de você entender o que está diante de você, o seu poder é opressor. " +
                                    "É difícil até ficar de pé diante de tamanha ameaça.");
                                alert("Você não consegue recuperar mais que um terço da stamina que você normalmente recupera.");
                                alert("Esta presença da escuridão é forte demais para suas poções funcionarem, mas você tem uma ideia.");
                                alert("Você consegue jogar o líquido no chão e bater com sua lâmina no chão para gerar uma faísca, ateando fogo no líquido.");
                                alert("O fogo dura por pouco tempo, mas pelo menos deve te deixar seguro por um turno.");
                                enemyLives = 1;
                                enemyHP = 1000;
                                enemyTotalHP = 1000;
                                enemyAttack = 25;
                                enemyDefense = 12;
                                if (localStorage.getItem('calamityLevel') > 9) {
                                    enemyHP = 1200;
                                    enemyTotalHP = 1200;
                                    enemyAttack = 26;
                                    enemyDefense = 13;
                                }
                                if (localStorage.getItem('calamityLevel') > 10) {
                                    enemyHP = enemyHP + (50 * (localStorage.getItem('calamityLevel') - 10));
                                    enemyTotalHP = enemyTotalHP + (50 * (localStorage.getItem('calamityLevel') - 10));
                                }
                                var tresToques = 0;
                                var carnica = 0;
                                var assovioDaMorte = 0;
                                var assovioDaMorteEX = 0;
                                var darknessAlive = 1;
                                do {
                                    do {
                                        var choiced = 'false';
                                        combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                            + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x\r\n \r\n" +
                                            enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                            "\r\n \r\n Você pode: atacar(a), defender(d), Ultra defender(ud) ou usar uma poção de vida(p), caso tenha.");

                                        if (combatChoice == 'a' || combatChoice == 'A') {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            if (stamina >= 100) {
                                                if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                    if (enemyStanced > 0) { finalDamage = attack * critMult - (enemyDefense * 1.3); }
                                                    else { finalDamage = attack * critMult - enemyDefense; }
                                                    alert("CRÍTICO!");
                                                    stamina = stamina - 100;
                                                }
                                                else {
                                                    if (enemyStanced > 0) { finalDamage = attack - (enemyDefense * 1.3); }
                                                    else { finalDamage = attack - enemyDefense; }
                                                    stamina = stamina - 100;
                                                }
                                            }
                                            else {
                                                if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                    finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                    alert("CRÍTICO!");
                                                }
                                                else {
                                                    if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                    else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                    stamina = 0;
                                                }
                                            }
                                            if (finalDamage <= 0) {
                                                alert("Seu ataque acerta a escuridão, porém não dá dano.");
                                            }
                                            else if (finalDamage <= 5) {
                                                alert("Você acerta a Escuridão, mas o dano é mínimo.");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano na mesma.");
                                            }
                                            else if (finalDamage <= 30) {
                                                alert("Você acerta a Escuridão.");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano na mesma.");
                                            }
                                            else {
                                                alert("Você acerta um forte ataque na Escuridão.");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano na mesma.");
                                            }
                                            totalBlock = defense;

                                            stamina = stamina + (staminaMax * 0.03);
                                            if (stamina > staminaMax) {
                                                stamina = staminaMax;
                                            }
                                        }
                                        if (combatChoice == 'd' || combatChoice == 'D') {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            totalBlock = defense * 2;
                                            stamina = stamina + (staminaMax * 0.10);
                                            if (stamina > staminaMax) {
                                                stamina = staminaMax;
                                            }
                                        }
                                        if (combatChoice == 'ud' || combatChoice == 'UD' || combatChoice == 'Ud' || combatChoice == 'uD') {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            if (stamina >= 100) {
                                                alert("Você concentra a sua energia em sua armadura e escudo e se prepara para um ataque!");
                                                totalBlock = defense * 3;
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                totalBlock = defense * 3 * (stamina / 100);
                                                stamina = 0;
                                            }
                                        }
                                        if (combatChoice == 'pa' || combatChoice == 'PA' || combatChoice == 'Pa' || combatChoice == 'pA') {
                                            choiced = 'true';
                                            if (preparedAttack == 1) {
                                                totalBlock = defense * 1.1;
                                                preparedAttack = 0;
                                                finalDamage = (pAMult * attack) - enemyDefense;
                                                if (finalDamage <= 0) {
                                                    alert("Seu ataque carregado acerta a escuridão, porém não dá dano.");
                                                }
                                                else if (finalDamage <= 5) {
                                                    alert("Você acerta a Escuridão com seu ataque carregado, mas o dano é mínimo.");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano na mesma.");
                                                }
                                                else if (finalDamage <= 30) {
                                                    alert("Você acerta a Escuridão com seu ataque carregado.");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano na mesma.");
                                                }
                                                else {
                                                    alert("Você acerta um forte ataque carregado na Escuridão.");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano na mesma.");
                                                }
                                            }
                                            else {
                                                preparedAttack = 1;
                                                if (stamina >= 150) {
                                                    alert("Você acumula uma gigantesca quantidade de energia em sua espada!");
                                                    pAMult = 2;
                                                    stamina = stamina - 150;
                                                }
                                                else {
                                                    alert("Você coloca a stamina que tinha na sua lâmina...");
                                                    pAMult = stamina / 150;
                                                    stamina = 0;
                                                }
                                                totalBlock = defense * 1.1;
                                                alert("Se quiser, você pode cancelar o seu ataque no próximo turno se seu " +
                                                    "oponente for fazer algo assustador, mas assim você perderá o ataque carregado (pa para continuar, outra coisa caso queira, bem, fazer outra coisa)");
                                            }
                                        }
                                        if (combatChoice == 'p' || combatChoice == 'P') {
                                            choiced = 'true';
                                            alert("Você joga sua poção no chão e rapidamente bate sua espada, gerando uma faísca que atea fogo no líquido.");
                                            totalBlock = 100;
                                            alert("'Estamos usando truques sujos agora..? Você não quer me ver roubando...'");
                                        }
                                    } while (choiced == 'false');

                                    if (localStorage.getItem('calamityLevel') > 19 && enemyHP < enemyTotalHP) {
                                        alert("Apesar de tudo, a escuridão continua a crescer. +25 vida. +1 ataque");
                                        enemyHP = enemyHP + 25;
                                        enemyAttack = enemyAttack + 1;
                                    }

                                    if (lightWeak > 0) {
                                        lightWeak = lightWeak - 0.5;
                                        defense = defense + 0.5;
                                        attack = attack + 0.5;
                                        alert("Você se recompõe um pouco, recuperando 0.5 ataque e 0.5 defesa perdidos.")
                                    }
                                    if (carnica > 0) {
                                        carnica = carnica - 1;
                                        enemyAttack = enemyAttack - 1;
                                        alert("A Escuridão perde sua forma, e perde 1 de ataque.")
                                    }
                                    if (assovioDaMorte > 0) {
                                        assovioDaMorte = assovioDaMorte - 1;
                                        darkness2.volume = darkness2.volume - 0.2;
                                        alert("Um atrás do outro, membros perfurantes te atacam sem piedade.");
                                        enemyFinalDamage = 85 - totalBlock;
                                        if (enemyFinalDamage > 0) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            if (localStorage.getItem('calamityLevel') > 9) {
                                                alert("Você consegue defender da maioria dos mesmbros, mas ainda é perfurado, e leva 1 de dano.");
                                                HP = HP - 1;
                                            }
                                            else {
                                                alert("Você protege uma coisa depois da outra, e chega muito perto de ser perfurado.");
                                            }
                                        }
                                        if (assovioDaMorte > 0) {
                                            alert("Mais membros perfurantes se aproximam.");
                                        }
                                        else {
                                            alert("Parece que você conseguiu sobreviver até os membros acabarem de aparecer.");
                                            alert("Você se sente seguro o suficiente para continuar a atacar a Escuridão.");
                                            darkness2.volume = 0.07;
                                            alert("Você não sabe o porquê, mas sobreviver a um ataque ridículo como este lhe dá um pingo de esperança.");
                                            alert("Esta coisa te quer morto.");
                                            darkness2.volume = 0.05;
                                            alert("Se você está aguentando até agora, é por seu mérito.");
                                            darkness2.pause();
                                            alert("A vitória agora parece quase impossível...");
                                            darkness3.play();
                                            alert("Mas agora, é uma possibilidade.");
                                        }
                                    }
                                    else if (assovioDaMorteEX > 0) {
                                        assovioDaMorteEX = assovioDaMorteEX - 1;
                                        alert("Um atrás do outro, inumeros membros perfurantes te atacam.");
                                        enemyHP = 1;
                                        enemyFinalDamage = 90 - totalBlock;
                                        if (enemyFinalDamage > 3) {
                                            HP = HP - enemyFinalDamage;
                                            alert("Você leva " + enemyFinalDamage + " de dano.");
                                        }
                                        else {
                                            if (localStorage.getItem('calamityLevel') > 9) {
                                                alert("Você consegue defender da maioria dos mesmbros, mas ainda é perfurado, e leva 3 de dano.");
                                                HP = HP - 3;
                                            }
                                            else {
                                                alert("Você consegue defender da maioria dos mesmbros, mas ainda é perfurado, e leva 2 de dano.");
                                                HP = HP - 2;
                                            }
                                        }
                                        if (assovioDaMorteEX > 0) {
                                            alert("Mais membros, um atrás do outro, surgem para te perfurar.");
                                        }
                                        else {
                                            darknessAlive = 0;
                                            alert("Parece que o ataque sem piedade finalmente terminou.");
                                        }
                                    }

                                    else if (enemyHP <= 500 && enemyLives == 1) {
                                        darkness2.volume = 0.9;
                                        alert("'Ah...'");
                                        alert("'Parece que dessa vez, você é insistente...'");
                                        darkness2.volume = 0.8;
                                        alert("'Mas não faz diferença...'");
                                        alert("'No final, tudo repete...'");
                                        darkness2.volume = 0.7;
                                        enemyLives = 0;
                                        alert("Da Escuridão, você escuta algo diferente.");
                                        alert("Você não sabe o que é, mas seus sentidos dizem que é ruim.");
                                        alert("Membros perfurantes surgem da escuridão, mais do que você consegue contar.");
                                        if (tubaroBlade == 1) {
                                            alert("A energia tubaro dentro de você quer defender com tudo que você tem.");
                                        }
                                        if (lightCrown == 1) {
                                            alert("Sua coroa de luz, de alguma forma, te aconselha a se proteger ao máximo.");
                                        }
                                        assovioDaMorte = 3;
                                    }
                                    else if (enemyHP <= 1 && enemyLives == 0) {
                                        alert("'hahahahaha...'");
                                        alert("'você realmente está me enchendo a paciência desta vez...'");
                                        enemyLives = -1;
                                        enemyHP = 1;
                                        alert("'eu não vou deixar...'");
                                        alert("'não vou deixar vou deixar você ir embora...'");
                                        alert("'muito menos, vou deixar o resto...'");
                                        if (tubaroBlade == 1) {
                                            alert("Novamente, a energia tubaro quer defender com tudo que tem.");
                                            alert("Desta vez porém, a energia parece pensar que a Escuridão vai soltar tudo que ela ainda tem sobrando.");
                                        }
                                        if (lightCrown == 1) {
                                            alert("Novamente, sua coroa de luz te aconselha a se proteger ao máximo.");
                                            alert("Diferente de antes, a coroa tem algo a mais a compartilhar. Parece que a Escuridão não tem forças para continuar depois deste ataque.");
                                        }
                                        assovioDaMorteEX = 4;
                                    }
                                    else if (enemyLives == 1) {
                                        enemyChoice = Math.floor(Math.random() * 4) + 1;
                                        if (tresToques != 0) {
                                            if (tresToques == 1) {
                                                alert("A Escuridão cresce ainda mais. Você se sente inquieto, como se seu corpo quisesse te avisar de algo.");
                                                tresToques = tresToques + 1;
                                            }
                                            else if (tresToques == 2) {
                                                alert("A Escuridão começa a cortar e fatiar tudo em volta de você.");
                                                enemyFinalDamage = (enemyAttack * 3) - totalBlock;
                                                tresToques = 0;
                                                if (enemyFinalDamage > 0) {
                                                    HP = HP - enemyFinalDamage;
                                                    alert("Você leva " + enemyFinalDamage + " de dano.");
                                                }
                                                else {
                                                    alert("Você bloqueia alguns cortes, e esquiva do resto.");
                                                }
                                                alert("Depois dos ataques, a Escuridão volta para seu tamanho original.");
                                            }
                                        }
                                        else if (attackReadied == 'true') {
                                            alert("Do gigante tamanho da Escuridão, vários membros contundentes voam em sua direção.");

                                            enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock;

                                            attackReadied = 'false';
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você consegue bloquear todos os membros contundentes.");
                                            }
                                        }
                                        else if (enemyChoice == 1) {
                                            alert("O ar em volta de você começa a ficar cada vez mais frio.'");
                                            enemyFinalDamage = enemyAttack - totalBlock;
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você consegue evitar que o frio te cause ferimentos.");
                                            }
                                            alert("O frio te deixa um pouco mais devagar.");
                                            alert("Sua defesa e ataque diminuem em 1.5 .");
                                            lightWeak = lightWeak + 1.5;
                                            defense = defense - 1.5;
                                            attack = attack - 1.5;
                                        }
                                        else if (enemyChoice == 2) {
                                            alert("Você percebe alguns membros contundentes se formando na Escuridão.");
                                            attackReadied = 'true';
                                        }
                                        else if (enemyChoice == 3) {
                                            alert("A Escuridão começa a crescer.");
                                            tresToques = tresToques + 1;
                                        }
                                        else if (enemyChoice == 4) {
                                            alert("A escuridão começa a ganhar forma.");
                                            if (carnica == 0) {
                                                carnica = 4;
                                                enemyAttack = enemyAttack + 4;
                                                alert("O ataque da Escuridão aumenta em 4.");
                                            }
                                            else {
                                                alert("Com a forma da escuridão medianamente definida, ela parece reparar um pouco de si mesma.");
                                                enemyHP = enemyHP + 10;
                                            }
                                        }
                                    }

                                    else if (enemyLives == 0) {
                                        enemyChoice = Math.floor(Math.random() * 4) + 1;
                                        if (tresToques != 0) {
                                            if (tresToques == 1) {
                                                alert("A Escuridão cresce ainda mais... Você já entende o que isso quer dizer.");
                                                tresToques = tresToques + 1;
                                            }
                                            else if (tresToques == 2) {
                                                alert("A Escuridão começa a cortar e fatiar tudo em volta de você.");
                                                enemyFinalDamage = (enemyAttack * 3) - totalBlock;
                                                tresToques = 0;
                                                if (enemyFinalDamage > 0) {
                                                    HP = HP - enemyFinalDamage;
                                                    alert("Você leva " + enemyFinalDamage + " de dano.");
                                                }
                                                else {
                                                    alert("Você bloqueia alguns cortes, e esquiva do resto.");
                                                }
                                                alert("Depois dos ataques, a Escuridão volta para seu tamanho original.");
                                            }
                                        }
                                        else if (attackReadied == 'true') {
                                            alert("Do gigante tamanho da Escuridão, vários membros contundentes voam em sua direção.");

                                            enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock;

                                            attackReadied = 'false';
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você consegue bloquear todos os membros contundentes.");
                                            }
                                            if (localStorage.getItem('calamityLevel') > 9) {
                                                alert("Os membros tanbém acertam sua lâmina, e deixa ela um pouco menos afiada.");
                                                alert("Você perde 7.5% de chance de acerto crítico, permanentemente.");
                                                critChance = critChance - 7.5;
                                            }
                                            else {
                                                alert("Os membros tanbém acertam sua lâmina, e deixa ela um pouco menos afiada.");
                                                alert("Você perde 4% de chance de acerto crítico, permanentemente.");
                                                critChance = critChance - 4;
                                            }
                                        }

                                        else if (enemyChoice == 1) {
                                            alert("O ar em volta de você começa a ficar gélido.'");
                                            enemyFinalDamage = enemyAttack - totalBlock;
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você consegue evitar que o frio te cause ferimentos.");
                                            }
                                            alert("O frio te deixa um pouco mais devagar.");
                                            if (localStorage.getItem('calamityLevel') > 9) {
                                                alert("Sua defesa e ataque diminuem em 2.");
                                                lightWeak = lightWeak + 2;
                                                defense = defense - 2;
                                                attack = attack - 2;
                                                alert("O frio te cansa.");
                                                alert("Sua stamina diminui em 30.");
                                                stamina = stamina - 30;
                                            }
                                            else {
                                                alert("Sua defesa e ataque diminuem em 1.5.");
                                                lightWeak = lightWeak + 1.5;
                                                defense = defense - 1.5;
                                                attack = attack - 1.5;
                                                alert("O frio te cansa.");
                                                alert("Sua stamina diminui em 25.");
                                                stamina = stamina - 25;
                                            }
                                        }
                                        else if (enemyChoice == 2) {
                                            alert("Você percebe alguns membros contundentes se formando na Escuridão.");
                                            attackReadied = 'true';
                                        }
                                        else if (enemyChoice == 3) {
                                            alert("A Escuridão começa a crescer.");
                                            tresToques = tresToques + 1;
                                        }
                                        else if (enemyChoice == 4) {
                                            alert("A escuridão começa a ganhar forma.");
                                            if (carnica == 0) {
                                                if (localStorage.getItem('calamityLevel') > 9) {
                                                    carnica = 5;
                                                    enemyAttack = enemyAttack + 5;
                                                    alert("O ataque da Escuridão aumenta em 5.");
                                                }
                                                else {
                                                    carnica = 4;
                                                    enemyAttack = enemyAttack + 4;
                                                    alert("O ataque da Escuridão aumenta em 4.");
                                                }
                                            }
                                            else {
                                                alert("A forma da escuridão fica um pouco mais definida.");
                                                carnica = carnica + 2;
                                                enemyAttack = enemyAttack + 2;
                                                alert("O ataque da Escuridão aumenta em 2.");
                                            }
                                        }
                                    }
                                    totalBlock = 0;
                                } while (darknessAlive == 1 && HP > 0)
                            }
                        }

                        if (enemyName == 'O Violino' && HP <= 0 && enemyLives == 2) {
                            violinoPhase1.pause();
                            alert("'Ah...'");
                            alert("'Eu não sei porque esperava algo diferente de você...'");
                            alert("'Isso foi patético.'");
                            dead = 'true';
                        }
                        else if (enemyName == 'O Violino' && HP <= 0 && enemyLives == 1) {
                            ViolinPhase3.pause();
                            Violino1.pause();
                            alert("'Ah...'");
                            alert("'Isso foi bastante interessante. Você foi o segundo desafiante que me fez realmente lutar.'");
                            alert("'Mesmo assim, eu esperava mais. Talvez eu que seja muito forte?'");
                            dead = 'true';
                        }
                        else if (enemyName == 'O Violino' && HP <= 0 && enemyLives == 0) {
                            ViolinPhase3.pause();
                            Violino1.pause();
                            alert("'Ah...'");
                            alert("'Isso foi muito impressionante.'");
                            alert("'Você definitivamente foi um adversário digno. Eu me lembrarei de você'");
                            dead = 'true';
                        }
                        else if (enemyName == 'O Violino' && HP <= 0 && enemyLives == -1) {
                            ViolinPhase3.pause();
                            Violino1.pause();
                            alert("'Ah...'");
                            alert("'Isso foi... Incrível...'");
                            alert("'Eu precisei usar... O meu máximo...'");
                            alert("Amigo, isso foi incrível. Se você tivesse aguentado um pouquinho mais, teria ganho!");
                            dead = 'true';
                        }

                        if (enemyName == 'A escuridão.' && HP <= 0 && enemyAttack == '?') {
                            localStorage.setItem('darkness', 'yes');
                            ViolinPhase3.pause();
                            Violino1.pause();
                            violinoPhase1.pause();
                            darkness1.pause();
                            alert("'A escuridão te engole inteiro.'");
                            alert("'É extraordináriamente dolorido...'");
                            alert("'Mas finalmente, acaba.'");
                            dead = 'true';
                        }
                        else if (enemyName == 'A escuridão.' && HP <= 0 && enemyLives == 1) {
                            localStorage.setItem('darkness', 'yes');
                            ViolinPhase3.pause();
                            Violino1.pause();
                            darkness1.pause();
                            darkness2.pause();
                            alert("'pronto...'");
                            alert("'como eu disse...'");
                            alert("'hora de voltar tudo novamente...'");
                            dead = 'true';
                        }
                        else if (enemyName == 'A escuridão.' && HP <= 0 && enemyLives == 0) {
                            localStorage.setItem('darkness', 'yes');
                            ViolinPhase3.pause();
                            Violino1.pause();
                            darkness1.pause();
                            darkness2.pause();
                            darkness3.pause();
                            alert("'me deu mais trabalho...'");
                            alert("'do que imaginava...'");
                            alert("'mas hora de você me entreter novamente...'");
                            dead = 'true';
                        }
                        else if (enemyName == 'A escuridão.' && HP <= 0 && enemyLives == -1) {
                            localStorage.setItem('darkness', 'yes');
                            ViolinPhase3.pause();
                            Violino1.pause();
                            darkness1.pause();
                            darkness2.pause();
                            darkness3.pause();
                            alert("'você...'");
                            alert("'realmente me irritou desta vez...'");
                            alert("'mas claro...'");
                            alert("'não importa...'");
                            alert("'eu vou voltar tudo atrás...'");
                            dead = 'true';
                        }

                        else if (HP <= 0 && towerLevel == 10) {
                            EsqueletinhoTheme.pause();
                            alert(enemyName + " dá um ataque final em você.");
                            alert("Ele parece estremamente feliz. Bom, pelo menos você não morreu por nada!");
                            dead = 'true';
                        }
                        else if (HP <= 0 && towerLevel == 20) {
                            GloboTheme.pause();
                            alert(enemyName + " dá um ataque final em você.");
                            alert("Assim que ele tem certeza que você morreu, músicas de festa começam a tocar.");
                            dead = 'true';
                        }
                        else if (HP <= 0 && towerLevel == 30) {
                            guardianTheme.pause();
                            alert(enemyName + " dá um ataque final em você.");
                            alert("Bom, parece que você perdeu para o Guardião. Sinceramente, era um guerreiro gigante, não tem problema perder.");
                            dead = 'true';
                        }
                        else if (HP <= 0 && towerLevel == 40) {
                            arcoPhase1.pause();
                            arcoPhase2.pause();
                            alert(enemyName + " dá um ataque final em você.");
                            alert("O Dragão te derrota. Pelo olhar dele, parece que ele esperava mais de você. Bom, pelo menos você chegou bem longe.");
                            dead = 'true';
                        }
                        else if (HP <= 0) {
                            alert("O " + enemyName + " consegue te finalizar.");
                            alert("Depois de derrotado, o " + enemyName + " acha " + gold + " dinheiros em seu corpo.");
                            dead = 'true';
                        }

                        if (HP > 0 && towerLevel > 50 && localStorage.getItem('calamityLevel') > 9) {
                            localStorage.setItem('darkness', 'yes');
                            ViolinPhase3.pause();
                            Violino1.pause();
                            darkness1.pause();
                            darkness2.pause();
                            darkness3.volume = 0.95;
                            alert("A Escuridão finalmente para de se mover.");
                            darkness3.volume = 0.9;
                            alert("'hahahahaha...'");
                            darkness3.volume = 0.85;
                            alert("'mas é claro...'");
                            darkness3.volume = 0.8;
                            alert("'se você chegou a este ponto...'");
                            darkness3.volume = 0.7;
                            alert("'nem o meu poder total...'");
                            darkness3.volume = 0.6;
                            alert("A escuridão vai diminuindo.");
                            darkness3.volume = 0.5;
                            alert("'te pararia para sempre...'");
                            darkness3.volume = 0.4;
                            alert("'parabéns pela perseverança...'");
                            darkness3.volume = 0.3;
                            alert("'isso é, se for a primeira vez...'");
                            darkness3.volume = 0.2;
                            alert("'você pode ter ido até mais longe do que eu percebo...'");
                            darkness3.volume = 0.15;
                            alert("Você começa a conseguir ver algumas estrelas novamente.");
                            alert("'mas está tudo bem...'");
                            alert("'surpreendentemente, começei a gostar de lutar contra você...");
                            alert("'...'");
                            alert("'mas muito bem...'");
                            alert("'aproveite novamente...'");
                            darkness3.volume = 0.1;
                            alert("'a sua efêmera...'");
                            darkness3.volume = 0.05;
                            alert("'liberdade...'");
                            darkness3.pause();
                            alert("Agora, o que estava lá desapareceu por completo.");
                            alert("Mas acho que nunca realmente foi embora.");
                            alert("Mesmo assim, você pisca os olhos e está fora da torre.");
                            alert("Você está na vila novamente.");
                            alert("A figura humanoide de cifres que você encontrou depois do dragão está lá, além do resto dos aldeôes.");
                            alert("A mesma já se aproxima de você.");
                            alert("'...'");
                            alert("'Então... Parece que finalmente...'");
                            alert("'Ah não.'");
                            alert("'Se até isso está familiar...'");
                            alert("'Parece que nós nunca seremos livres para sempre.'");
                            if (localStorage.darknessEnding == 'yes') {
                                localStorage.setItem('calamityLevel', localStorage.getItem('calamityLevel') + 1);
                            }
                            localStorage.setItem('darknessEndingEX', 'yes');
                            desc.style.color = 'rgb(255, 140, 0)';
                            desc.style.backgroundColor = '#FFD700';
                            escuridao.style.display = "block";
                            win = 'true';
                        }
                        if (HP > 0 && towerLevel > 50) {
                            localStorage.setItem('darkness', 'yes');
                            ViolinPhase3.pause();
                            Violino1.pause();
                            darkness1.pause();
                            darkness2.pause();
                            darkness3.volume = 0.95;
                            alert("A Escuridão finalmente para de se mover.");
                            darkness3.volume = 0.9;
                            alert("'eu realmente...'");
                            darkness3.volume = 0.85;
                            alert("'não esperava isso...'");
                            darkness3.volume = 0.8;
                            alert("'agora a escolha...'");
                            darkness3.volume = 0.7;
                            alert("'não está mais em minhas mãos...'");
                            darkness3.volume = 0.6;
                            alert("A escuridão vai diminuindo.");
                            darkness3.volume = 0.5;
                            alert("'mesmo assim...'");
                            darkness3.volume = 0.4;
                            alert("'mesmo perdendo, não estou com medo...'");
                            darkness3.volume = 0.3;
                            alert("'eu sei que, uma hora...'");
                            darkness3.volume = 0.2;
                            alert("'você vai voltar tudo...'");
                            darkness3.volume = 0.15;
                            alert("Você começa a conseguir ver algumas estrelas novamente.");
                            alert("'mas por hora...'");
                            alert("'parabéns por ter libertado todos...");
                            alert("'eu estarei te observando...'");
                            alert("'esperando você me devolver o controle...'");
                            alert("'esperando tudo voltar...'");
                            darkness3.volume = 0.1;
                            alert("'mas enquanto isso...'");
                            darkness3.volume = 0.05;
                            alert("'aproveite a liberdade...'");
                            darkness3.pause();
                            alert("Agora, o que estava lá desapareceu por completo.");
                            alert("Mas acho que nunca realmente foi embora.");
                            alert("Mesmo assim, você pisca os olhos e está fora da torre.");
                            alert("Você está na vila novamente.");
                            alert("A figura humanoide de cifres que você encontrou depois do dragão está lá, além do resto dos aldeôes.");
                            alert("A mesma já se aproxima de você.");
                            alert("'...'");
                            alert("'Então... Parece que finalmente acabou?'");
                            alert("'Você realmente conseguiu derrotar AQUILO.'");
                            alert("'Agora, podemos ter uma vida normal.'");
                            alert("'Por enquanto.'");
                            if (localStorage.darknessEnding == 'yes') {
                                localStorage.setItem('calamityLevel', Number(localStorage.getItem('calamityLevel')) + 1);
                            }
                            localStorage.setItem('darknessEnding', 'yes');
                            desc.style.backgroundColor = '#FFD700';
                            escuridao.style.display = "block";
                            win = 'true';
                        }
                        else if (HP > 0 && towerLevel % 10 != 0) {
                            enemyGold = Math.floor(enemyGold * (100 + (Math.floor(Math.random() * 5))) / 100);
                            alert("O " + enemyName + " cai no chão, imóvel.");
                            alert("Você acha " + enemyGold + " dinheiros  em seu corpo.");
                            gold = gold + enemyGold;
                            if (((Math.floor(Math.random() * 100) + 1) <= 4 && stairs == 0) || (lightCrown == 1 && tubaroBlade == 1 && stairs == 0)) {
                                alert("Estranhamente, você também acha uma escada de mão.");
                                alert("[escada] para usar a escada. Você pula um nível da torre, mas não ganha suas recompensas.");
                                stairs = 1;
                            }
                            var foundGem1;
                            if ((Math.floor(Math.random() * 100) + 1) <= 5 && foundGem1 != 1) {
                                alert("No corpo, você acha uma pequena turmalina.");
                                alert("Ao voltar para a vila, você a vende por 20 dinheiros.");
                                gold = gold + 20;
                                foundGem1 = 1;
                            }
                            var foundGem2;
                            if ((Math.floor(Math.random() * 100) + 1) <= 3 && foundGem2 != 1) {
                                alert("No corpo, você acha uma pequena barra de ouro.");
                                alert("Ao voltar para a vila, você a vende por 25 dinheiros.");
                                gold = gold + 25;
                                foundGem2 = 1;
                            }
                            var foundGem3;
                            if ((Math.floor(Math.random() * 100) + 1) <= 2 && foundGem3 != 1) {
                                alert("No corpo, você acha uma safira.");
                                alert("Ao voltar para a vila, você a vende por 50 dinheiros.");
                                gold = gold + 50;
                                foundGem3 = 1;
                            }
                            if ((Math.floor(Math.random() * 100) + 1) <= 6) {
                                alert("Ah, parece que uma das moedas é antiga, e assim, mas valiosa!");
                                alert("Ao voltar para a vila, você a vende por " + Math.floor((enemyGold * 0.2) + (towerLevel / 2)) + " dinheiros.");
                                gold = gold + Math.floor((enemyGold * 0.2) + (towerLevel / 2));
                            }
                            var foundPot;
                            if ((Math.floor(Math.random() * 100) + 1) <= 1 && foundPot != 1) {
                                alert("No corpo, você acha uma poção de vida.");
                                alert("Você a guarda na sua mochila.");
                                hpPotions = hpPotions + 1;
                                foundGem3 = 1;
                            }
                            var foundOleo;
                            if ((Math.floor(Math.random() * 100) + 1) <= 2 && foundOleo != 1) {
                                alert("Você acha um estranho óleo no corpo, com o nome 'afiaTudo'.");
                                alert("Ao passar na sua lâmina, ela fica quase instantaneamente mais mortal.");
                                alert("Seu multiplicador de crítico aumenta em 0.2x");
                                critMult = critMult + 0.2;
                                foundOleo = 1;
                            }
                        }
                        else if (HP > 0 && towerLevel == 10) {
                            EsqueletinhoTheme.controls = true;
                            localStorage.setItem('beatEsqueletinho', 'yes');
                            EsqueletinhoTheme.pause();
                            alert("O esqueletinho ajoelha-se no chão, sem forças para se manter em pé:");
                            alert("'Você é forte..! Mesmo que nossos objetivos se contraponham...'");
                            alert("'Ah...'");
                            alert("'Eu entendo agora... Eu fui colocado somente como uma barreira... Para você quebrar...'");
                            alert("'Ah... Este Violino é... Realmente cruel...'");
                            alert("'Amigo... Eu me decidi...'");
                            alert("'Eu colocarei minhas esperanças... Em você...'");
                            alert("'Boa sorte... amigo..! Derrote Aquele monstro..!'");
                            alert("Ele estende um saco para você, com um sorriso.");
                            totalHP = totalHP + 5;
                            alert("Ali, você encontra " + enemyGold + " e uma última barra de cereal. Ao come-la, você se sente mais forte!");
                            alert("Novo HP total: " + totalHP);
                            gold = gold + enemyGold;
                            alert("atrás do esqueleto, você vê um 'baú de coswn'. Eles são baús bastante potentes, com uma relíquia dentro. " +
                                "Quando ainda contem o seu poder, ou seja, sua relíquia, eles são grandes fontes de poder. Julgando pelo tubo conectado ao baú, " +
                                "O Violino está tentando extrair o poder mágico deste baú. ");
                            alert("'Eh, deve ter algo legal lá dentro' Você pensa enquanto vai abrir o baú, sem parar pra pensar no que aquilo é. Alí dentro, você acha dois itens:");
                            var coswnA;
                            var coswnB;
                            var coswnChooser = Math.floor(Math.random() * 3) + 1;
                            if (coswnChooser == 1) {
                                var coswnA = 'estilhaco tubaro';
                                alert("estilhaco tubaro: Um estilhaço da esquecida lâmina tubaro. Apesar de ser apenas um pedaço, " +
                                    "tem um resíduo do poder da lâmina emanando dentro de si. (+3 ataque stat)");

                            }
                            if (coswnChooser == 2) {
                                var coswnA = 'dualidade';
                                alert("dualidade: uma máscara com uma parte pintada de preto e outra de branco, com pingos de cada cor invadindo " +
                                    "o espaço da outra. Uma vez foi a máscara de uma grande assassina. (+10% chance de crítico)");
                            }
                            if (coswnChooser == 3) {
                                var coswnA = 'gema';
                                alert("gema: uma pedra uma vez usada para canalizar incrível poder mágico, mas agora sem uso. Ainda " +
                                    "assim, pagariam bastante para tê-la. (+500 dinheiros)")
                            }
                            coswnChooser = Math.floor(Math.random() * 3) + 1;
                            if (coswnChooser == 1) {
                                var coswnB = 'pingente lunin';
                                alert("pingente lunin: um pingente a um deus a muito tempo esquecido. sua luz clareia o caminho a ser feito " +
                                    "para um corte mais preciso, mesmo que seja só na sua cabeça. (+0.8 dano crítico)");

                            }
                            if (coswnChooser == 2) {
                                var coswnB = 'escama arco';
                                alert("escama arco: uma escama do Arco, o dragão metálico do violino. A escama é dura o suficiente para " +
                                    "repelir ataques, enquanto afiada o suficiente para cortar um coco com enorme precisâo. (+1 ataque, +1 defesa)");
                            }
                            if (coswnChooser == 3) {
                                var coswnB = 'escudo geremo';
                                alert("escudo geremo: o escudo de Geremo, um guerreiro tão determinado que após ser encurralado por 100 homens, " +
                                    "ele lutou até depois da própria morte, indo embora apenas depois de quando todos estavam mortos. (+3 defesa)");

                            }
                            var coswnChoice;
                            do {
                                choiced = 'false';
                                coswnChoice = prompt("Qual das duas relíquias você escolherá? " + coswnA + "(A) ou " + coswnB + "(B)?");
                                if (coswnChoice == 'a' || coswnChoice == 'A') {
                                    if (coswnA == 'estilhaco tubaro') {
                                        attack = attack + 3;
                                        tubaroPieces = tubaroPieces + 1;
                                        prompt("O poder do estilhaço entra em suas veias, o deixando mais forte! (+3 ataque)");
                                    }
                                    else if (coswnA == 'dualidade') {
                                        critChance = critChance + 10;
                                        prompt("Você coloca a máscara. Sim... está tudo mais claro agora... (+5 crit chance)");
                                    }
                                    else if (coswnA == 'gema') {
                                        gold = gold + 500;
                                        prompt("Você vai vender a gema assim que chegar na vila! (+500 gold)");
                                    }
                                    choiced = 'true';
                                }
                                else if (coswnChoice == 'b' || coswnChoice == 'B') {
                                    if (coswnB == 'pingente lunin') {
                                        critMult = critMult + 0.8;
                                        lightInf = lightInf + 1;
                                        prompt("Ao colocar este pingente, você vê claramente. A luz. Como puderam esquece-la, tão brilhante? (+0.5 crit mult)");
                                    }
                                    else if (coswnB == 'escama arco') {
                                        attack = attack + 1;
                                        defense = defense + 1;
                                        prompt("Ao segurar essa escama, você sente um calor dentro de você que não sabia que existia. (+1 ataque, +1 defesa)");
                                    }
                                    else if (coswnB == 'escudo geremo') {
                                        defense = defense + 3;
                                        prompt("No momento que você segura o escudo, você sente algo frio segurando seu ombro, mas nada está lá. (+3 defesa)");
                                    }
                                    choiced = 'true';
                                }
                            } while (choiced != 'true');
                        }
                        else if (HP > 0 && towerLevel == 20) {
                            if (quadradosSoltos > 0) {
                                alert("Os quadrados que estavam voando estilhaçam.");
                            }
                            localStorage.setItem('beatGlobo', 'yes');
                            GloboTheme.controls = true;
                            estiloFesta.style.display = "block";
                            GloboTheme.pause();
                            alert("O Globo para de girar, e, um por um, os quadrados refletores do mesmo começam a estilhaçar.");
                            alert("'Caramba... você é bem mais forte que os outros, cara...'");
                            alert("'Não vou mentir, cara... Não queria morrer aqui...'");
                            alert("O Globo já está quase sem quadrados...");
                            alert("'Mas, pelo menos... Não terei que... Continuar lutando...'");
                            alert("O último quadrado refletor quebra, e o globo muda de aparência, como se estivesse com algo a menos.");
                            alert("Você percebe que dentro do Globo, antes coberto por quadrados refletores, tem um globo de vidro, transparente, com algo azul se mexendo dentro.");
                            ultraDefense = 'true';
                            alert("Ao encostar no vidro, essa coisa azul, etérea, entra na sua mão. Doí um pouco no começo, mas você percebe algo:");
                            staminaMax = staminaMax + 50;
                            alert("Sua stamina aumentou em 50, e você pode usar uma habilidade: ULTRA DEFENSE (ud)");
                            alert("ULTRA DEFENSE: o ultra defense é basicamente o defender mais forte, com um custo em stamina. " +
                                "Ele custa 100 de stamina e defende 3X sua defesa, porém você não ganhará stamina no turno. Ao tentar" +
                                " usar o ultra defense com menos de 100 de stamina resultará em uma defesa muito menos potente, que " +
                                "constuma não valer a pena. Isso se dá porque se você usar, por exemplo,  33 de stamina, sua defesa " +
                                "será de 1X sua defesa normal, 50 de stamina, 1,5X sua defesa normal, e assim por diante. OBS: o DEFENDER " +
                                "é 2X sua defesa.");
                            alert("O ULTRA DEFENSE deveria ser ultilizado quando você tiver a stamina necessária e um ataque bem " +
                                "forte estiver a caminho.");
                            gold = gold + enemyGold;
                            alert("Você pega " + enemyGold + " dinheiros contidos no Globo.");
                            alert("Atrás do Globo, você vê algo: um baú coswn... Mas este está todo quebrado, provavelmente pelos ataques " +
                                "desgovernados daquele globo bizarro...");
                            alert("Triste, você realmente queria uma relíquia... Mas parece que este baú era mais forte, e ainda contém um " +
                                "pouco de seu poder!");
                            alert("Apesar de não ser toda a sua glória, parece que você ainda pode absorver a uma das auras das relíquias que estariam " +
                                "ali. Infelizmente, não é tão forte quanto uma relíquia.");
                            alert("Eh, na verdade, essas auras te parecem interessantes.");
                            alert("Aura da caçadora: +15% de chance de crítico");
                            alert("Aura da luz divina: +1x dano no crítico");
                            alert("Aura do Gigante Guardião: +10 de vida");
                            do {
                                choiced = 'false';
                                coswnChoice = prompt("Qual aura você escolherá? Aura da caçadora(A), " +
                                    "Aura da luz divina(B) ou Aura do Gigante Guardião(C)?");
                                if (coswnChoice == 'a' || coswnChoice == 'A') {
                                    choiced = 'true';
                                    critChance = critChance + 15;
                                    alert("Huh, como você não viu antes? Os pontos fracos das criaturas estão bem mais claros... Falta somente " +
                                        "acertá-los, claro. (+15% de chance de crítico)");
                                }
                                else if (coswnChoice == 'b' || coswnChoice == 'B') {
                                    choiced = 'true';
                                    critMult = critMult + 1;
                                    lightInf = lightInf + 1;
                                    alert("Ah, a luz é impressionante, não..! Muito bem, parece que a mesma guia seus movimentos. (+1 crit mult)");
                                }
                                else if (coswnChoice == 'c' || coswnChoice == 'C') {
                                    totalHP = totalHP + 5;
                                    HP = HP + 5;
                                    alert("Você se sente maior que nunca. Vai ser mais difícil de machucar assim, mesmo que seja só uma " +
                                        "sensação, não? (+10 de vida máxima)");

                                    choiced = 'true';
                                }
                            } while (choiced != 'true');
                        }
                        else if (HP > 0 && towerLevel == 30) {
                            localStorage.setItem('beatGuardian', 'yes');
                            guardianTheme.controls = true
                            salaGuardiao.style.display = "block";
                            guardianTheme.pause();
                            alert("O seu ataque faz algo diferente que só causar mais dano no Guardião.");
                            alert("Ele solta a guitarra, caindo ao seu lado e fazendo um estrago gigantesco no chão.");
                            alert("'AH... VOCÊ É BEM FORTE, NÃO?'");
                            alert("'NÃO TENHO DÚVIDAS...  QUE JÁ TENHAM DITO ISSO PARA VOCÊ...'");
                            alert("O Guardião começa a cair, lentamente descendo.");
                            alert("'AGORA QUE ME DERROTOU... CONSEGUIRÁ CHEGAR NOS ANDARES FINAIS...'");
                            alert("'O GUARDA DO QUARENTA NUNCA MUDOU, E, BEM, O VIOLINO SEMPRE ESTEVE LÁ...'");
                            alert("O Guardião já está quase no chão, se mantendo acima do mesmo apenas pelo seu braço.");
                            alert("'EU NÃO SEI SE VOCÊ VAI CONSEGUIR MATAR ALGUM DELES, MAS POR FAVOR...'");
                            alert("'TENTE FAZER UMA BOA BATALHA, ASSIM COMO A QUE NÓS TIVEMOS...'");
                            alert("O Guardião, agora no chão, está imóvel.");
                            alert("Você percebe que no peito do corpo do Guardião tem um tipo de núcleo feito de uma forma de gema, ainda brilhando.");
                            alert("Será que ele é uma criação artificial?");
                            alert("De qualquer forma, o núcleo quebra, perdendo o seu brilho, e algo etéreo roxo, parecido com o que estava no Globo de Festa, entra dentro de você.");
                            alert("Isso aumenta seu HP total, sua stamina e te dá uma nova habididade: Preparar ataque(pa)!");
                            alert("PREPARAR ATAQUE: preparar ataque uma forma de carregar o ataque em um turno para dar um ataque mais forte: ") +
                                "você gasta 150  de stamina e não se mexe em um turno para dar um ataque com o dobro de dano no " +
                                "próximo turno, sem ganhar stamina em nenhum dos dois. Ao tentar preparar um ataque com menos de 150 " +
                                "de stamina, você dará uma fração do dano, calculada igual ao ataquenormal: em 100, você dá 1.33 do " +
                                "seu ataque, em 75, você dá 1, etc. Isso quer dizer que, igual o Ultra defense, costuma só valer a pena" +
                                "usá-lo caso tenha toda a stamina necessária.";
                            alert("Agora, ultilidades: vamos a um exemplo: você tem 20 de ataque, seu inimigo tem 15 de defesa. " +
                                "Caso você o ataque normalmente, você dará 20(seu ataque) - 15(defesa do inimigo) = 5(dano final). " +
                                "Caso você prepare o ataque, no primeiro turno, você dará 40(2x seu ataque) - 15(defesa do inimigo) = " +
                                "25(dano final). Como você pode ver, o dano é muito maior porque a defesa não muda, então acaba " +
                                "causando muito mais dano, e é mais eficiente quanto mais armadura o inimigo tiver. O problema é que " +
                                "nos dois turnos você terá somente a sua defesa padrão, podendo levar bastante dano se usado em uma " +
                                "hora incorreta. Logo, você deve o usar caso saiba que o inimigo não vai usar um ataque forte nesses " +
                                "dois turnos, ou se você saiba que vai o derrotar antes dele fazer o mesmo, e claro, sempre se você " +
                                "tiver pelo menos 150 de stamina.");
                            totalHP = totalHP + 5;
                            staminaMax = staminaMax + 50;
                            alert("Novo HP total: " + totalHP + ", nova stamina total: " + staminaMax);

                            alert("Além disso, você acha " + enemyGold + " dinheiros no corm=po do guardião.");
                            gold = gold + enemyGold;
                            alert("Ao avançar um pouco, você vê um baú coswn, conectado a um tubo, seguro dos ataques do guardião.");
                            alert("'Que sorte!' você pensa. 'parece que vou conseguir outra relíquia!'");
                            alert("E para sua sorte, algo que você não percebeu é que o baú é superior a seu último, com detalhes em ouro!");
                            var coswnA;
                            var coswnB;
                            var coswnChooser = Math.floor(Math.random() * 3) + 1;
                            if (coswnChooser == 1) {
                                var coswnA = 'anel alma negra';
                                alert("anel alma negra: um anel contendo um pedaço do imenso poder do alma negra, o pirata que matou o " +
                                    "mar morto. (+7 ataque, +5% crit chance)");

                            }
                            if (coswnChooser == 2) {
                                var coswnA = 'luva dourada';
                                alert("luva dourada: esta luva de cor dourada (não é feita de ouro) foi a única arma que a caçadora usou, " +
                                    "até o dia que foi derrotada. Mesmo assim, um pouco de sua magia amarela se mantém na luva, já que foi usada" +
                                    "como canalizadora. (+2 ataque, +10 crit chance");
                            }
                            if (coswnChooser == 3) {
                                var coswnA = 'capacete da luz';
                                alert("capacete da luz: o capaçete uma vez ultilizado pela deusa da luz, antes de ser perdido no meio da " +
                                    "guerra contra o deus da matéria. (+3 ataque +0.7x dano crítico)")
                            }
                            coswnChooser = Math.floor(Math.random() * 3) + 1;
                            if (lightInf == 1 && coswnChooser != 3) {
                                coswnChooser = Math.floor(Math.random() * 3) + 1;
                            }
                            if (lightInf == 1 && coswnChooser != 3) {
                                coswnChooser = Math.floor(Math.random() * 3) + 1;
                            }
                            if (lightInf == 2 && coswnChooser != 3) {
                                coswnChooser = 3;
                            }
                            if (coswnChooser == 1) {
                                var coswnB = 'placas metal';
                                alert("placas metal: as placas de metal de um famoso marechal que se transformou em robô por poder. Essas " +
                                    "placas foram as que não foram destruídas depois da luta contra o Alma Negra. (+4 defesa, + 1 ataque)");

                            }
                            if (coswnChooser == 2) {
                                var coswnB = 'anel negro';
                                alert("anel negro: um anel feito de um monstro de matéria escura, com a luz purgada de seu corpo. O anel " +
                                    "emana um pouco da energia do próprio deus da matéria. (+60 stamina, + 1 defesa)");
                            }
                            if (coswnChooser == 3) {
                                var coswnB = 'reliquia ritual';
                                ritualRelic = ritualRelic + 1;
                                alert("reliquia ritual: uma relíquia usada como catalizador de um ritual antigo, feito para chamar a luz. " +
                                    "caso a influência da luz perto de você seja nenhuma, uma outra criatura já derrotada aparecerá. Você só " +
                                    "pode fazer o ritual uma vez.");

                            }
                            var coswnChoice;
                            do {
                                choiced = 'false';
                                coswnChoice = prompt("Qual das duas relíquias você escolherá? " + coswnA + "(A) ou " + coswnB + "(B)?");
                                if (coswnChoice == 'a' || coswnChoice == 'A') {
                                    if (coswnA == 'anel alma negra') {
                                        attack = attack + 7;
                                        critChance = critChance + 5;
                                        prompt("Ah... Esse poder, correndo pelas suas veias... Então este é o poder do assassino dos sete mares?");
                                    }
                                    else if (coswnA == 'luva dourada') {
                                        attack = attack + 3;
                                        critChance = critChance + 10;
                                        prompt("Essa luva... Uma forma peculiar de caçar. Ao vestí-la, você sente que seu braço consegue colocar " +
                                            "toda sua força na sua espada facilmente.");
                                    }
                                    else if (coswnA == 'capacete da luz') {
                                        attack = attack + 3;
                                        critMult = critMult + 0.7;
                                        lightInf = lightInf + 1;
                                        prompt("Sua visão agora se baseia de formas de luz e sombra. Ej, pelo menos você deve ter ficado legal com ele!");
                                    }
                                    choiced = 'true';
                                }
                                else if (coswnChoice == 'b' || coswnChoice == 'B') {
                                    if (coswnB == 'placas metal') {
                                        defense = defense + 4;
                                        attack = attack + 1;
                                        prompt("As placas se acoplam rapidamente em seu corpo. Você sente uma vontade grande de gritar 'MEGA OVERCHARGE!'");
                                    }
                                    else if (coswnB == 'anel negro') {
                                        staminaMax = staminaMax + 60;
                                        defense = defense + 1;
                                        prompt("Que força peculiar... Você sente como se esta energia estivesse te abraçando, aceitando você e suas escolhas.");
                                    }
                                    else if (coswnB == 'reliquia ritual') {
                                        prompt("A reliquia está em perfeito estado. Para começar um ritual, ao escolher o que fazer, escreva [ritual]");
                                    }
                                    choiced = 'true';
                                }
                            } while (choiced != 'true');
                        }
                        else if (HP > 0 && towerLevel == 40) {
                            localStorage.setItem('beatArco', 'yes');
                            arcoPhase1.controls = true;
                            arcoPhase2.controls = true;
                            calorDragao.style.display = "block";
                            arcoPhase2.pause();
                            alert("Aguentando o calor, você acerta o Dragão com tudo o que tem.");
                            alert("E parece que você conseguiu. Segundos antes de você morrer pelo calor, você consegue dar o golpe final.");
                            alert("O Dragão, segundos antes de te dar uma fúria de mordidas, para. Na sua cabeça, você escuta algo novamente.");
                            alert("'Bom... Parece que eu estava certo... Eu não esperava menos...'");
                            alert("'Eu sinceramente espero que meu mestre consiga lidar com você...'");
                            alert("'Porém, não consigo evitar se não pensar o contrário...'");
                            alert("Com a temperatura da sala rápidamente voltando ao normal, o Arco também vai lentamente caindo no chão.");
                            alert("'Parabéns, desafiante. Ao mesmo tempo que sou leal ao meu mestre, eu te desejo sorte. Qualquer final " +
                                "se´ra bons aos meus olhos.'");
                            alert("'Quanto o que você tem a frente... Digamos que não será muito fácil.'");
                            alert("O Arco fecha os olhos. 'Que oponente formidável', você pensa.");
                            alert("Enquanto você sobe a escada de mão para o próximo nível, você não consegue evitar se não pensar sobre " +
                                "o que você tem pela frente. 'O que eu terei que fazer nestes últimos andares?', 'Como este violino pode ser " +
                                "possívelmente mais forte que este dragão que eu tive que derrotar?' e 'Eu não sei se eu consigo. Eu quase morri " +
                                "já pelo Arco...' são todas perguntas que passam pela sua cabeça.");
                            alert("Mas antes de você se prender muito nos seus pensamentos, você percebe algo: um baú coswn, intacto, no " +
                                "final da escada de mão, antes do próximo andar!");
                            alert("Pausando seus pensamentos um pouco, você já se prepara para abrir o baú.");
                            alert("Ao abrí-lo, porém, uma grossa névoa cinza sai do baú, rapidamente cobrindo seus arredores!");
                            alert("Quando a névoa passa, você vê uma figura humanóide, de olhos verdes, pele pálida, cabelos longos, mas arrumados " +
                                "e dois grandes chifres negros saindo da cabeça, pouco acima da testa, apontando diretamente pra cima. Roupas largas, " +
                                "mudando entre preto e branco (e as vezes um padrão com as duas cores).");
                            alert("'OIIIIIIIIIIIIIIII'");
                            alert("'Caramba, você me tirou daqui de novo, não??'");
                            alert("Você não faz a mínima ideia de quem é.");
                            alert("'Ah... Esqueci que você não se lembra... Eh, não tem problema!'");
                            alert("'Bom, como sempre, eu tenho algumas bençãos para te dar aqui! Claro, é meio chato você me tirar daqui e ser de graça.'");
                            alert("'Sinceramente, é bem irritante tudo voltar, eu voltar pro baú...'");
                            alert("'Mas certo! Deixa eu ver o que eu tenho pra você hoje!!'");
                            var coswnA;
                            var coswnB;
                            var coswnChooser = Math.floor(Math.random() * 2) + 1;

                            if (tubaroPieces != 0) {
                                coswnChooser = 1;
                            }
                            if (coswnChooser == 1) {
                                var coswnA = 'guarda tubaro';
                                alert("guarda tubaro: A guarda da lâmina tubaro. Dizem que caso esta guarda se reúna com uma " +
                                    "parte da lâmina original, a mesma voltará a sua antiga glória.(+10 ataque stat, - 7% crit chance) " +
                                    "eu só tenho certeza que não é uma benção.");

                            }
                            if (coswnChooser == 2) {
                                var coswnA = 'bencao cacador';
                                alert("bancao cacador: A benção do verdadeiro caçador. Você troca um pouco do seu ataque por " +
                                    "uma tremenda precisão. (+20% crit chance, - 6 ataque stat");
                            }
                            coswnChooser = Math.floor(Math.random() * 2) + 1;
                            if (coswnChooser == 1) {
                                var coswnB = 'bencao incansavel';
                                alert("bencao incansavel: essa benção se originou do conjunto de todas as pessoas que trocaram o " +
                                    "próprio bem estar e tudo que tinham para caminhar em direção ao seu objetivo. (+150 stamina, - 10 vida)");

                            }
                            if (coswnChooser == 2) {
                                var coswnB = 'bencao ferro';
                                alert("bencao ferro: essa benção foi criada quando um homem sobreviveu 1000 socos no estômago seguidos, " +
                                    "sem se mover um centímetro.(+15 defesa, -200 stamina)");
                            }
                            var coswnChoice;
                            do {
                                choiced = 'false';
                                coswnChoice = prompt("Certo, qual vai querer? " + coswnA + "(A) ou " + coswnB + "(B)?");
                                if (coswnChoice == 'a' || coswnChoice == 'A') {
                                    if (coswnA == 'guarda tubaro') {
                                        critChance = critChance - 7;
                                        attack = attack + 10;
                                        if (tubaroPieces == 1) {
                                            alert("O estilhaço que você tinha pego sai das suas veias se junta a guarda!");
                                            alert("Depois de alguns segundos, a lâmina toma forma! Ela é como uma foice de mão, " +
                                                "com uma parte muito pequena ser segurada e uma lâmina não muito longa, mas não muito curta, " +
                                                "que se extende ao lado da sua mão ao ser usado corretamente. Assim, lutar com ela " +
                                                "é muito parecido com socar, mas sempre 'errando' o soco.");
                                            attack = attack + 14;
                                            staminaMax = staminaMax + 100;
                                            stamina = staminaMax;
                                            tubaroBlade = 1;
                                            prompt("Vai demorar um pouco pra se acostumar com a lâmina, mas ela é muito forte. (+ 14 ataque " +
                                                "adicional (além da guarda), +100 stamina)");
                                        }
                                        else {
                                            prompt("Você coloca a guarda na sua espada. Ela está muito mais consistente, porém " +
                                                "muito mais forte.");
                                        }
                                    }
                                    else if (coswnA == 'bencao cacador') {
                                        attack = attack - 6;
                                        critChance = critChance + 20;
                                        prompt("Você se sente ainda mais preciso que antes, mesmo que um pouco mais fraco.");
                                    }
                                    choiced = 'true';
                                }
                                else if (coswnChoice == 'b' || coswnChoice == 'B') {
                                    if (coswnB == 'bencao incansavel') {
                                        totalHP = totalHP - 10;
                                        staminaMax = staminaMax + 150;
                                        prompt("Você nunca vai parar de lutar. Pelo menos, vai ser um pouco mais eficiente. Em seus " +
                                            "movimentos.");
                                    }
                                    else if (coswnB == 'bencao ferro') {
                                        staminaMax = staminaMax - 200;
                                        defense = defense + 15;
                                        prompt("Ferro puro, filho.");
                                    }
                                    choiced = 'true';
                                }
                            } while (choiced == 'false');
                        }
                        else if (HP > 0 && towerLevel == 50 && localStorage.getItem('calamityLevel') > 9) {
                            ViolinPhase3.pause();
                            Violino1.pause();
                            Violino1.controls = true;
                            ViolinPhase3.controls = true;
                            alert("O Violino cai no chão. O chão treme, e pedaços de pedra caem de cima de você.");
                            alert("'Não... É possível...'");
                            alert("'Eu estava com... Meu ápice de poder...'");
                            alert("'E mesmo assim... você me derrotou..?'");
                            alert("Pedaços do chão começam a cair. Parece que o último ataque do Violino danificou a torre mais do que a mesma aguenta.");
                            alert("'Como você... Conseguiu aguentar tanto poder..?'");
                            alert("'Bom... Ao menos devo o parabenizar...'");
                            alert("A torre está desabando!");
                            if (tubaroBlade == 1) {
                                localStorage.setItem('tubaroEnding', 'yes');
                                localStorage.setItem('tubaroEndingEX', 'yes');
                                alert("Sem perder tempo, você pula (o andar não tem paredes).");
                                alert("A torre começa a inclinar, então você usa sua lâmina tubaro para parar de cair, fincando-a na parede.");
                                alert("Com a torre em um ângulo de 30°, você começa a descer correndo a torre, evitando os buracos e cortando escombros ao meio.");
                                alert("Surpreendentemente, isso não é difícil para você, como se você já estivesse acostumado.");
                                alert("Você finalmente chega lá embaixo com sucesso.");
                                alert("Quando você chega, porém, percebe que vários inimigos ainda estão vivos, e caindo diretamente na sua direção!");
                                alert("Parece que você ainda vai ter alguns minutos de diversão antes da sua próxima aventura!");
                                laminaTubaro.style.display = "block";
                                laminaTubaro.style.color = 'rgb(255, 140, 0)';
                                laminaTubaro.style.background = '#d5abe6';
                            }
                            else if (lightCrown == 1) {
                                localStorage.setItem('CrownEnding', 'yes');
                                localStorage.setItem('CrownEndingEX', 'yes');
                                alert("Sem perder tempo, você pula (o andar não tem paredes).");
                                alert("Sem ter como se parar, qualquer outra pessoa pensaria que só tem uma escolha: canalizar o máximo de espadas de luz possíveis, " +
                                    "e esperar que elas consigam quebrar sua queda.");
                                alert("Você, porém, tem um instinto que tem outra forma de sobreviver.");
                                alert("Ao invés de pular e amortecer a queda no final, você pula de espada em espada, gradualmente diminuindo sua altitude.");
                                alert("Com sua extraordinaria dextreza, você consegue chegar no chão, enquanto a torre desaba atrás de você..");
                                alert("Pela exaustão, você colapsa no chão, desmaiando.");
                                alert("...");
                                alert("Mas felizmente, você precisou só dormir por alguns dias até se recuperar.");
                                alert("Você se levanta, e vai a procura de algo, ou algum lugar que tenha algo novo.");
                                coroaLuz.style.display = "block";
                                coroaLuz.style.color = 'rgb(255, 140, 0)';
                                coroaLuz.style.background = '#e6e6ab';
                            }
                            else {
                                localStorage.setItem('normalEnding', 'yes');
                                localStorage.setItem('normalEndingEX', 'yes');
                                alert("Você rapidamente percebe que, COM O EQUIPAMENTO QUE TEM, você não vai conseguir sair vivo.");
                                alert("Você deita ao lado do Violino e espera a morte chegar. Ele não fez nada contra você " +
                                    "diretamente, de qualquer forma. Você só queria ajudar essa terra.");
                                alert("Parece que o violino ainda não está morto, e resolve falar com você em seus últimos momentos.");
                                alert("'Você também... Vai morrer aqui..?'");
                                alert("'Isso é uma pena...'");
                                alert("'Honestamente... Eu pensei que este poder seria... O suficiente para me libertar.'");
                                alert("'Quando você chega neste nível... De poder...'");
                                alert("'Você percebe... Quão pouco suas escolhas importam.'");
                                alert("'Eu sinto que você.. Sabe disso também.'");
                                alert("'Mas eu tenho a impressão... Que você não está tão preso quanto eu.'");
                                alert("Com a torre desabando, vocês só tem alguns momentos antes de serem soterrados.");
                                alert("'Ah... Parece que nós vamos ter que cortar essa conversa no meio...'");
                                alert("'Adeus.'");
                                vitoriaComum.style.display = "block";
                                vitoriaComum.style.color = 'rgb(255, 140, 0)';
                                vitoriaComum.style.background = '#e6ccab';
                            }
                            if (localStorage.getItem('calamityLevel') < 11) {
                                localStorage.setItem('calamityLevel', Number(localStorage.getItem('calamityLevel')) + 1);
                                alert("'hahahahahaha...'");
                                alert("'depois do que você fez, derrotar o violino aumentou a calamidade nessa realidade...'");
                                alert("'se esse era seu objetivo, parabens...'");
                            }
                            win = 'true';
                        }
                        else if (HP > 0 && towerLevel == 50) {
                            ViolinPhase3.pause();
                            Violino1.pause();
                            Violino1.controls = true;
                            ViolinPhase3.controls = true;
                            alert("O Violino cai no chão. O chão treme, e pedaços de pedra caem de cima de você.");
                            alert("'...'");
                            alert("'...Não pode... ser...'");
                            alert("'200 anos... só para ser... derrotado?'");
                            alert("Pedaços do chão começam a cair. Parece que o último ataque do Violino danificou a torre mais do que a mesma aguenta.");
                            alert("'Pelo menos... Você é mais que digno... Para ser o que me... derrotou...'");
                            alert("A torre está desabando!");
                            if (tubaroBlade == 1) {
                                localStorage.setItem('tubaroEnding', 'yes');
                                alert("Sem perder tempo, você pula (o andar não tem paredes).");
                                alert("A torre começa a inclinar, então você usa sua lâmina tubaro para parar de cair, fincando-a na parede.");
                                alert("Com a torre em um ângulo de 30°, você começa a descer correndo a torre, evitando os buracos e cortando escombros ao meio.");
                                alert("'QUASE LÁ...' você pensa. Ao mesmo tempo você está quase no final, mas a torre está quase " +
                                    "caíndo no chão e despedaçando (com você no meio).");
                                alert("...");
                                alert("E POR UM MILAGRE, VOCÊ DESCE A TEMPO!");
                                alert("Sem tempo para perder, você sai de lá, em busca de uma nova aventura!");
                                laminaTubaro.style.display = "block";
                            }
                            else if (lightCrown == 1) {
                                localStorage.setItem('CrownEnding', 'yes');
                                alert("Sem perder tempo, você pula (o andar não tem paredes).");
                                alert("Sem ter como se parar, você só tem uma escolha: canalizar o máximo de espadas de luz possíveis, " +
                                    "e esperar que elas consigam quebrar sua queda.");
                                alert("Enquanto você se aproxima no chão, você continua invocando espadas de luz, e a coroa começa até a vibrar.");
                                alert("E então...");
                                alert("Tudo fica preto.");
                                alert("Você acorda quase morto, entre escombros. A coroa, infelizmente, parece ter quebrado com o extremo esforço.");
                                alert("Você se levanta, e vai a procura de algo, ou algum lugar que tenha algo novo.");
                                coroaLuz.style.display = "block";
                            }
                            else {
                                localStorage.setItem('normalEnding', 'yes');
                                alert("Você rapidamente percebe que, COM O EQUIPAMENTO QUE TEM, você não vai conseguir sair vivo.");
                                alert("Você deita ao lado do Violino e espera a morte chegar. Ele não fez nada contra você " +
                                    "diretamente, de qualquer forma. Você só queria ajudar essa terra.");
                                alert("Pelo menos, você cumpriu o seu objetivo.");
                                vitoriaComum.style.display = "block";
                            }
                            if (localStorage.getItem('calamityLevel') < 11) {
                                localStorage.setItem('calamityLevel', Number(localStorage.getItem('calamityLevel')) + 1);
                                alert("'hahahahahaha...'");
                                alert("'depois do que você fez, derrotar o violino aumentou a calamidade nessa realidade...'");
                                alert("'se esse era seu objetivo, parabens...'");
                            }
                            win = 'true';
                        }
                        stamina = staminaMax;
                    }
                    else if (oquefazer == 'dica') {
                        var numDica;
                        numDica = Math.floor(Math.random() * 3) + 1;
                        if (towerLevel < 10) {
                            if (numDica == 1) {
                                alert("A estadia é bem barata (5 dinheiros) e te dá uma vida acima do seu máximo. É interessante, para confrontos " +
                                    "perigosos, ultilizar do serviço se possível.");
                            }
                            if (numDica == 2) {
                                alert("Prepare-se bem, pois um confronto perigoso se aproxima. Lembre-se, defesa é tão importante quanto ataque, e " +
                                    "a stamina não é muito necessária antes do primeiro confronto perigoso.");
                            }
                            if (numDica == 3) {
                                alert("Você sempre age primeiro. Isso quer dizer que, se você matar seu oponente antes dele agir, ele não ira fazer " +
                                    "nada.");
                            }
                        }
                        else if (towerLevel < 20) {
                            if (numDica == 1) {
                                alert("A partir de agora, stamina é importante, mas o investimento nela ainda devia ser bem menor que os outros status.");
                            }
                            if (numDica == 2) {
                                alert("Em confrontos perigosos, preste atenção no que o inimigo faz. Isso o ajudará bastante.");
                            }
                            if (numDica == 3) {
                                alert("Ataque é especialmente importante em confrontos perigosos, mas não esqueça que sem uma defesa decente, " +
                                    "até ataques padrôes podem ser um problema.");
                            }
                        }
                        else if (towerLevel < 30) {
                            if (numDica == 1) {
                                alert("Quanto mais stamina máxima, mais stamina você ganha por turno/ao defender. Isso quer dizer que você " +
                                    "pode usar ultra defense mais vezes (diminuindo a chance de morrer por somente um ataque muito forte) e atacar mais " +
                                    "vezes (aumentando sua performance em batalha)");
                            }
                            if (numDica == 2) {
                                alert("Quanto mais turnos o inimigo gasta preparando um ataque, mais forte será. Pense nisso para saber quando usar " +
                                    "seu ultra defense! ");
                            }
                            if (numDica == 3) {
                                alert("cada confronto, perigoso ou não, tem suas diferenças, e cada oponente age diferente. Entender como cada " +
                                    "oponente seu age pode lhe ajudar bastante.");
                            }
                        }
                        else if (towerLevel < 40) {
                            if (numDica == 1) {
                                alert("Tudo o que a mercante vende é útil, só se diferem as situações.");
                            }
                            if (numDica == 2) {
                                alert("Seu preparar ataque passa por qualquer preparo para esquiva, porém ainda sofre redução de dano de defesas. " +
                                    "mesmo assim, o seu preparar ataque só não acerta inimigos fora de seu alcançe.");
                            }
                            if (numDica == 3) {
                                alert("Cuidado, pois stamina será bem importante no próximo confronto perigoso.");
                            }
                        }
                        else if (towerLevel < 50) {
                            if (numDica == 1) {
                                alert("O ouro que você tem restante é muito valioso, pois não encontrará mais.");
                            }
                            if (numDica == 2) {
                                alert("Cuidado com as armadilhas, pois só elas que estão entre você e o andar 50.");
                            }
                            if (numDica == 3) {
                                alert("Sobre o seu último confronto perigoso: só posso lhe dizer boa sorte. E também pra nunca abaixar a guarda. Então, acho que duas coisas...");
                            }
                        }
                        else {
                            if (numDica == 1) {
                                alert("Parece que algo diferente está acontecendo. Algo perigoso, com certeza.");
                            }
                            if (numDica == 2) {
                                alert("Espero que você tenha trago um item lendário. Tenho a impressão que você vai precisar.");
                            }
                            if (numDica == 3) {
                                alert("Como você chegou onde chegou? Não tem caminho claro até aí.");
                            }
                        }
                    }

                    else if (oquefazer == 'escada' && stairs == 1) {
                        stairs = 0;
                        alert("Você levanta a escada, e magicalmente é transportado para o próximo nível da torre.");
                        towerLevel = towerLevel + 1;
                    }

                    else if (oquefazer == 'ritual') {
                        if (ritualRelic > 0) {
                            ritualRelic = 0;
                            alert("Você faz um círculo, com o catalizador no meio.");
                            if (lightInf < 1) {
                                alert("O catalizador começa a brilhar mais e mais forte, até que tudo fica branco.");
                                alert("Aí, ela para...");
                                enemyName = 'Rato Rico';
                                enemyHP = 230;
                                enemyTotalHP = 230;
                                enemyAttack = 10;
                                enemyDefense = 0;
                                attackReadied = 'false';
                                attackReadiedBonus = 4;
                                enemyLives = 0;
                                enemyGold = 1100;
                                alert("e um rato com um grande saco de dinheiro está no meio do círculo, com o catalizador distruído.");
                                alert("Caramba, parece que a luz não tinha influência o suficiente para vir, não? Pelo menos veio dinheiro!");
                                alert("E você parte pra cima do rato!!");
                                do {
                                    var choiced = 'false';
                                    do {
                                        combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                            + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x\r\n \r\n" +
                                            enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                            "\r\n \r\n Você pode: atacar(a), defender(d) ou usar uma poção de vida(p), caso tenha.");

                                        if (combatChoice == 'a' || combatChoice == 'A') {
                                            choiced = 'true';
                                            if (stamina >= 100) {
                                                if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                    finalDamage = attack * critMult - enemyDefense;
                                                    alert("CRÍTICO!");
                                                    stamina = stamina - 100;
                                                }
                                                else {
                                                    finalDamage = attack - enemyDefense;
                                                    stamina = stamina - 100;
                                                }
                                            }
                                            else {
                                                if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                    finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                    alert("CRÍTICO!");
                                                }
                                                else {
                                                    finalDamage = (attack * (stamina / 100)) - enemyDefense;
                                                    stamina = 0;
                                                }
                                            }
                                            if (finalDamage <= 0) {
                                                alert("Seu braço dorme antes de chegar no inimigo.");
                                            }
                                            else if (finalDamage <= 2) {
                                                alert("Você soca o inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else if (finalDamage <= 10) {
                                                alert("Você corta seu inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else {
                                                alert("Você dá um estrondoso ataque no inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            totalBlock = defense;

                                        }
                                        if (combatChoice == 'd' || combatChoice == 'D') {
                                            choiced = 'true';
                                            totalBlock = defense * 2;
                                            stamina = stamina + (staminaMax * 0.2);
                                            if (stamina > staminaMax) {
                                                stamina = staminaMax;
                                            }
                                        }
                                        if (combatChoice == 'p' || combatChoice == 'P') {
                                            if (hpPotions > 0 && HP < totalHP) {
                                                choiced = 'true';
                                                hpPotions = hpPotions - 1;
                                                HP = totalHP;
                                                alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                                totalBlock = defense * 3;
                                            }
                                            else if (HP < totalHP && hpPotions == 0) {
                                                alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                            }
                                            else if (HP > totalHP) {
                                                alert("Você não recuperaria vida alguma.");
                                            }
                                        }
                                    } while (choiced == 'false');
                                    stamina = stamina + (staminaMax * 0.1);
                                    if (stamina > staminaMax) {
                                        stamina = staminaMax;
                                    }

                                    if (enemyHP > 0) {
                                        enemyChoice = Math.floor(Math.random() * 2) + 1;
                                        if (attackReadied == 'true') {
                                            alert(enemyName + " Solta um forte ataque em sua direção!");
                                            enemyFinalDamage = (enemyAttack * attackReadiedBonus) - totalBlock;
                                            attackReadied = 'false';
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você bloqueia completamente o ataque do inimigo.");
                                            }
                                        }
                                        else if (enemyChoice == 1) {
                                            alert(enemyName + " te ataca!");
                                            enemyFinalDamage = enemyAttack - totalBlock;
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você bloqueia completamente o ataque do inimigo.");
                                            }
                                        }
                                        else if (enemyChoice == 2) {
                                            alert(enemyName + " dá um passo para trás, preparando um ataque!");
                                            attackReadied = 'true';
                                        }
                                        else {
                                            alert("ISSO É UM ERRO!");
                                        }

                                    }
                                    totalBlock = 0;
                                } while (enemyHP > 0 && HP > 0)
                                if (HP <= 0) {
                                    alert("VOCÊ MORREU PRA UM RATINHO HAHAHAHAHAAHAHAHAHAHAHAHAHJLVASOHUVUILGHVRSMVJOSDÇLNGBDRIJOVNCSW");
                                    alert("Quer dizer, o ratinho(hihihihi) te derrota.");
                                    dead = 'true';
                                }
                                if (HP > 0) {
                                    alert("O " + enemyName + " cai no chão, imóvel.");
                                    alert("Você acha " + enemyGold + " dinheiros  em seu corpo.");
                                    gold = gold + enemyGold;
                                }
                            }
                            else if (lightInf > 0) {
                                alert("Nada acontece... 'Será que eu fiz algo errado?', você pensa.");
                                alert("Mas antes de você se mexer, tudo fica branco, e seus olhos ardem, muito.");
                                alert("...");
                                alert("Você finalmente cria coragem para os abrir.");
                                alert("Tudo, inclusive o que está pisando, está escuro. Você vê as estrelas, os planetas, tudo a sua distâncias.");
                                alert("Você não está pisando em nada, mas ao mesmo tempo, está pisando em algo. O universo está em volta de você, " +
                                    "te abraçando.");
                                alert("Do nada, você escuta uma voz...");
                                alert("'Nonne hoc pulchrum est?'");
                                alert("A voz é estranha, com um som particular, como se fosse uma voz mudando a cada segundo.");
                                alert("'Gratias tibi ago pro me liberando, amice. Donec unum restat mihi hinc exire.'");
                                alert("Você não entende nenhuma palavra que está sendo dita, mas a figura de quem está conversando com você " +
                                    "está ficando mais clara. É luz. Luz abundande, toda presa em um único ponto. A forma muda constantemente.");
                                alert("corpus tuum mihi opus est. Itaque si modo stare posses, gratus ero.");
                                alert("A figura se aproxima de você. Apesar de completamente distraído, seus instintos batem, e você levanta " +
                                    "sua espada.");
                                alert("Oh, sic futurum est, qualis futurus est? Licuit, sed hoc rem non mutabit.");
                                alert("Parece que você vai ter que lutar. Boa sorte, sinceramente.");
                                enemyName = 'Lunin, deusa da luz';
                                enemyHP = 300 + (towerLevel * 2) + (lightInf * 10);
                                enemyTotalHP = 300 + (towerLevel * 2) + (lightInf * 10);
                                if (localStorage.getItem('calamityLevel') > 7) {
                                    enemyHP = enemyHP + 120;
                                    enemyTotalHP = enemyTotalHP + 120;
                                }
                                enemyAttack = 18 + lightInf + (towerLevel - 28) / 2;
                                enemyDefense = 5 + lightInf + (towerLevel - 31) / 2;
                                attackReadied = 'false';
                                attackReadiedBonus = 2;
                                enemyLives = 0;
                                enemyGold = 200;

                                enemyStanced = 0;
                                var lightswords = 0;
                                var lightWeak = 0;
                                alert("Nuvens de cosmos começam a se juntarem acima de vocês, começando a chover.");
                                LuninPhase1.play();
                                alert("Now playing: Super Meat Boy: The Battle of Lil' Slugger");
                                do {
                                    var choiced = 'false';
                                    do {
                                        if (enemyHP < enemyTotalHP / 3) {
                                            alert("A chuva está extremamente intensa. Raios passando de uma estrela a outra podem ser vistos.");if (localStorage.getItem('calamityLevel') > 19) {
                                            alert("Várias espadas de luz surgem por causa da intensidade da chuva. +20 espadas");
                                            lightswords = lightswords + 20;
                                            }
                                        }
                                        else if (enemyHP < 2 * enemyTotalHP / 3) {
                                            alert("A chuva se intensifica. Cuidado.");

                                        }
                                        combatChoice = prompt("VOCÊ: HP : " + HP + "/" + totalHP + "   " + "DEF : " + defense + "   " + "ATK : " + attack + "   "
                                            + "Stamina : " + stamina + "   " + "Crit : " + critChance + "%" + ", " + critMult + "x\r\n \r\n" +
                                            enemyName + " HP : " + enemyHP + "/" + enemyTotalHP + "   " + "DEF : " + enemyDefense + "   " + "ATK : " + enemyAttack +
                                            "\r\n \r\n Você pode: atacar(a), defender(d), Ultra defender(ud) ou usar uma poção de vida(p), caso tenha.");

                                        if (combatChoice == 'a' || combatChoice == 'A') {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            if (stamina >= 100) {
                                                if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                    if (enemyStanced > 0) { finalDamage = attack * critMult - (enemyDefense * 1.3); }
                                                    else { finalDamage = attack * critMult - enemyDefense; }
                                                    alert("CRÍTICO!");
                                                    stamina = stamina - 100;
                                                }
                                                else {
                                                    if (enemyStanced > 0) { finalDamage = attack - (enemyDefense * 1.3); }
                                                    else { finalDamage = attack - enemyDefense; }
                                                    stamina = stamina - 100;
                                                }
                                            }
                                            else {
                                                if ((Math.floor(Math.random() * 100) + 1) <= critChance) {
                                                    finalDamage = ((attack * critMult) * (stamina / 100)) - enemyDefense;
                                                    alert("CRÍTICO!");
                                                }
                                                else {
                                                    if (enemyStanced > 0) { finalDamage = (attack * (stamina / 100)) - (enemyDefense * 1.3); }
                                                    else { finalDamage = (attack * (stamina / 100)) - enemyDefense; }
                                                    stamina = 0;
                                                }
                                            }
                                            if (finalDamage <= 0) {
                                                alert("Seu braço dorme antes de chegar no inimigo.");
                                            }
                                            else if (finalDamage <= 4) {
                                                alert("Você soca o inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else if (finalDamage <= 15) {
                                                alert("Você corta seu inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            else {
                                                alert("Você dá um estrondoso ataque no inimigo!");
                                                enemyHP = enemyHP - finalDamage;
                                                alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                            }
                                            totalBlock = defense;

                                            stamina = stamina + (staminaMax * 0.1);
                                            if (stamina > staminaMax) {
                                                stamina = staminaMax;
                                            }
                                        }
                                        if (combatChoice == 'd' || combatChoice == 'D') {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            totalBlock = defense * 2;
                                            stamina = stamina + (staminaMax * 0.3);
                                            if (stamina > staminaMax) {
                                                stamina = staminaMax;
                                            }
                                        }
                                        if (combatChoice == 'ud' || combatChoice == 'UD' || combatChoice == 'Ud' || combatChoice == 'uD') {
                                            choiced = 'true';
                                            preparedAttack = 0;
                                            if (stamina >= 100) {
                                                alert("Você concentra a sua energia em sua armadura e escudo e se prepara para um ataque!");
                                                totalBlock = defense * 3;
                                                stamina = stamina - 100;
                                            }
                                            else {
                                                totalBlock = defense * 3 * (stamina / 100);
                                                stamina = 0;
                                            }
                                        }
                                        if (combatChoice == 'pa' || combatChoice == 'PA' || combatChoice == 'Pa' || combatChoice == 'pA') {
                                            choiced = 'true';
                                            if (preparedAttack == 1) {
                                                totalBlock = defense;
                                                preparedAttack = 0;
                                                finalDamage = (pAMult * attack) - enemyDefense;
                                                if (finalDamage <= 0) {
                                                    alert("Hmmm, você não dá dano nenhum. parece que você não carregou energia o suficiente?");
                                                }
                                                else if (finalDamage <= 10) {
                                                    alert("Você dá um decente corte no inimigo!");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }
                                                else if (finalDamage <= 20) {
                                                    alert("Você solta um grande corte no inimigo!");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }
                                                else {
                                                    alert("Com toda a energia acumulada, você dá um estrondoso corte no inimigo!");
                                                    enemyHP = enemyHP - finalDamage;
                                                    alert("Você dá " + finalDamage + " de dano ao " + enemyName + "!");
                                                }
                                            }
                                            else {
                                                preparedAttack = 1;
                                                if (stamina >= 150) {
                                                    alert("Você acumula uma gigantesca quantidade de energia em sua espada!");
                                                    pAMult = 2;
                                                    stamina = stamina - 150;
                                                }
                                                else {
                                                    alert("Você coloca a stamina que tinha na sua lâmina...");
                                                    pAMult = stamina / 150;
                                                    stamina = 0;
                                                }
                                                totalBlock = defense * 1.1;
                                                alert("Se quiser, você pode cancelar o seu ataque no próximo turno se seu " +
                                                    "oponente for fazer algo assustador, mas assim você perderá o ataque carregado (pa para continuar, outra coisa caso queira, bem, fazer outra coisa)");
                                            }
                                        }
                                        if (combatChoice == 'p' || combatChoice == 'P') {
                                            if (hpPotions > 0 && HP < totalHP) {
                                                choiced = 'true';
                                                hpPotions = hpPotions - 1;
                                                HP = totalHP;
                                                alert("Você tira uma poção da sua mochila e a bebe. Sua vida chega até o seu limite e sua defesa fica alta nesse turno.");
                                                totalBlock = defense * 3;
                                            }
                                            else if (HP < totalHP && hpPotions == 0) {
                                                alert("Caramba, parece que você está sem poções. Esqueceu de comprar?");
                                            }
                                            else if (HP > totalHP) {
                                                alert("Você não recuperaria vida alguma.");
                                            }
                                        }
                                    } while (choiced == 'false');

                                    if (enemyHP > 0) {
                                        if (lightWeak > 0) {
                                            lightWeak = lightWeak - 1;
                                            defense = defense + 1;
                                            attack = attack + 1;
                                            alert("Você se recompõe um pouco, recuperando 1 ataque e 1 defesa perdidos.")
                                        }
                                        if (lightswords > 0) {
                                            alert("lunin tem " + lightswords + " espadas flutuando em sua volta no momento.");
                                        }
                                        enemyStanced = enemyStanced - 1;
                                        enemyChoice = Math.floor(Math.random() * 4) + 1;
                                        if (attackReadied == 'true') {
                                            alert(enemyName + " Se transforma em uma lança de luz e começa a atacar na sua direção!");
                                            enemyFinalDamage = (enemyAttack + lightswords * attackReadiedBonus) - totalBlock;
                                            attackReadied = 'false';
                                            if (lightswords > 0) {
                                                alert("as espadas de luz acompanham o ataque!")
                                                if (enemyFinalDamage > 0) {
                                                    HP = HP - enemyFinalDamage;
                                                    alert("Você leva " + enemyFinalDamage + " de dano.");
                                                }
                                                else {
                                                    alert("Você bloqueia as espetadas da lança, enquanto desvia as espadas com grande maestria.");
                                                }
                                                alert("Uma das espadas que você desvia voa diretamente para a luz. para o sua infelicidade, a luz " +
                                                    "não se machuca. Na verdade, ela absorve a espada e recupera um pouco de vida.");
                                                lightswords = lightswords - 1;
                                                enemyHP = enemyHP + 10;
                                            }
                                            else {
                                                if (enemyFinalDamage > 0) {
                                                    HP = HP - enemyFinalDamage;
                                                    alert("Você leva " + enemyFinalDamage + " de dano.");
                                                }
                                                else {
                                                    alert("Você bloqueia completamente o ataque do inimigo.");
                                                }
                                            }
                                        }
                                        else if (enemyChoice == 1) {
                                            alert("A luz cria tentáculos e tenta te acertar.");
                                            enemyFinalDamage = enemyAttack + (lightswords / 2) - totalBlock;
                                            if (lightswords > 0) {
                                                alert("as espadas de luz acompanham o ataque, com certa dificuldade.")
                                            }
                                            if (enemyFinalDamage > 0) {
                                                HP = HP - enemyFinalDamage;
                                                alert("Você leva " + enemyFinalDamage + " de dano.");
                                            }
                                            else {
                                                alert("Você bloqueia completamente os tentáculos.");
                                            }
                                        }
                                        else if (enemyChoice == 2) {
                                            alert(enemyName + " dá um passo para trás, preparando um ataque!");
                                            attackReadied = 'true';
                                        }
                                        else if (enemyChoice == 3) {
                                            alert(enemyName + " cria espadas de luz!");
                                            if (enemyHP > 2 * enemyTotalHP / 3) {
                                                lightswords = lightswords + 1;
                                                alert("Um pedaço da luz se condensa em 1 espadas de luz.");
                                            }
                                            else if (enemyHP > enemyTotalHP / 3) {
                                                lightswords = lightswords + 2;
                                                alert("Um pedaço da luz se condensa em 2 espadas de luz.");
                                            }
                                            else {
                                                lightswords = lightswords + 4;
                                                alert("Um pedaço da luz se condensa em 4 espadas de luz!");
                                            }
                                        }
                                        else if (enemyChoice == 4) {
                                            alert("A luz começa a falar coisas estrangeiras, coisas que você não entende. 'A voz é tão bela, você pensa...");
                                            if (enemyHP > 2 * enemyTotalHP / 3) {
                                                alert("sua mão dá uma tremida! Você perde 1 ataque e 1 defesa!");
                                                lightWeak = lightWeak + 1;
                                                attack = attack - 1;
                                                defense = defense - 1;
                                            }
                                            else if (enemyHP > enemyTotalHP / 3) {
                                                alert("o esplendor também lhe dá medo. Você perde 2 ataque e 2 defesa!");
                                                lightWeak = lightWeak + 2;
                                                attack = attack - 2;
                                                defense = defense - 2;
                                            }
                                            else {
                                                alert("seu corpo inteiro estremeçe, e é dificil se compor diante desta divindade. " +
                                                    "Você perde 4 ataque e 4 defesa!");
                                                lightWeak = lightWeak + 4;
                                                attack = attack - 4;
                                                defense = defense - 4;
                                            }
                                        }
                                    }
                                    totalBlock = 0;
                                } while (enemyHP > 0 && HP > 0)
                                LuninPhase1.pause();
                                if (HP <= 0) {
                                    dead = 'true';
                                    alert("A luz te finalizou, mas o seu corpo sobreviveu... Mesmo assim, você não está mais nele.");
                                    alert("De qualquer forma, aquele negócio era um deus. Não tem problema ter perdido.");
                                }
                                else {
                                    localStorage.setItem('beatLunin', 'yes');
                                    LuninPhase1.controls = true;
                                    luz.style.display = "block";
                                    alert("O seu ataque claramente fez algo... A luz para. a claridade vai diminuindo.");
                                    alert("'Id... inopinatum...'");
                                    alert("'Videtur quod adhuc perseveres praesentia mea.'");
                                    alert("'Infeliciter, videtur mihi non plus valere in hoc regno uti.'");
                                    alert("'Nec ego reliquam iuvandi potestatem, quam exulem habui, periclitabor.'");
                                    alert("Sinceramente, eu não faço a mínima ideia do que está acontecendo aqui.");
                                    alert("'Nihilominus vires tuas et voluntatem admiror.'");
                                    alert("'Dono te opinor comessationibus relinquam. Iterum conveniant.'");
                                    gold = gold + enemyGold;
                                    alert("'Você acorda no meio do símbolo,com uma relíquia que você nunca viu antes.'");
                                    alert("Coroa da luz: Uma coroa com várias joias brancas e amarelas adornando-a. Ao se concentrar usando " +
                                        "ela, você consegue criar espadas de luz que te auxiliam em batalha. As espadas não só são fortes, mas elas " +
                                        "facilitam bastante achar o ponto certo. (+20% crit chance, +10 ataque)");
                                    lightCrown = 1;
                                    critChance = critChance + 20;
                                    attack = attack + 10;
                                    stamina = staminaMax;
                                }
                                if (lightWeak > 0) {
                                    do {
                                        lightWeak = lightWeak - 1;
                                        defense = defense + 1;
                                        attack = attack + 1;
                                    } while (lightWeak > 0);
                                }
                            }
                        }
                        else {
                            alert("Você não tem um catalizador funcional para isso.");
                        }
                    }
                    else {
                        alert("Ah, infelizmente, isso não é uma escolha, herói.");
                    }
                } while (win == 'false' && dead == 'false')
                if (win == 'true') {
                    alert("VOCÊ CONSEGUIU! PARABENS!!");
                }
                if (dead == 'true') {
                    alert("Você morreu. Mais sorte da próxima vez.");
                }

                EsqueletinhoTheme.currentTime = 0;
                GloboTheme.currentTime = 0;
                GuardianTheme.currentTime = 0;
                ArcoPhase1.currentTime = 0;
                ArcoPhase2.currentTime = 0;
                Phase1.currentTime = 0;
                Phase2.currentTime = 0;
                LuninPhase1.currentTime = 0;
                ViolinPhase3.currentTime = 0;
                Violino1.currentTime = 0;
            }

        }
    </script>

</head>

<body>
    <div id="discobg"
        style="position: absolute; width: 100%; height: 100vh; z-index: -1; overflow-y: hidden; display: none;">
        <img src="fundo globo.jpg" width="100%" height="auto" style="margin: auto;">
    </div>
    <div id="dragonheatbg"
        style="position: absolute; width: 100%; height: 100vh; z-index: -1; overflow-y: hidden; display: none;">
        <img src="heat.png" width="100%" height="auto" style="margin: auto;">
    </div>
    <div id="lightbg"
        style="position: absolute; width: 100%; height: 100vh; z-index: -1; overflow-y: hidden; display: none;">
        <img src="lunin.jpg" width="100%" height="auto" style="margin: auto;">
    </div>
    <div id="dbWrap">
        <div id="wrap">

            <div id="borderLeft">
                <div id="left">
                    <div id="desc">
                        Estilos do Hub desbloqueados:<BR>
                        <BR>
                        <a onclick="Changebackground('padrao')">Padrão</a><BR>
                        <a onclick="Changebackground('marrom')">Marrom :)</a><BR>
                        <a onclick="Changebackground('estiloFesta')" style="display: none;" id="estiloFesta">Estilo
                            festa</a><BR>
                        <a onclick="Changebackground('salaGuardiao')" style="display: none;" id="salaGuardiao">Sala
                            do Guardião</a><BR>
                        <a onclick="Changebackground('calorDragao')" style="display: none;" id="calorDragao">Calor do
                            Dragão</a><BR>
                        <a></a><BR>
                        <a onclick="Changebackground('luz')" style="display: none;" id="luz">um momento de
                            oração</a><BR>
                        <a></a><BR>
                        <a onclick="Changebackground('escuro')" style="display: none;" id="escuridao">Uma visão incomum.
                            Peculiar, talvez.</a><BR>
                        <a></a><BR>
                    </div>
                    <div id="vitoriaComum" style="display: none;">
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                        . . . . . . . ._____________. . . . . . . .<BR>
                        . . . . . . . /\___________/\ . . . . . . .<BR>
                        . . . . . . . \ \ . . . . / / . . . . . . .<BR>
                        . . . . . . . .\ \. . . ./ /. . . . . . . .<BR>
                        . . . . . . . . \ \_____/ / . . . . . . . .<BR>
                        . . . . . . . . .\// // \/. . . . . . . . .<BR>
                        . . . . . . . . .// // //\. . . . . . . . .<BR>
                        . . . . . . . . .\ // // /. . . . . . . . .<BR>
                        . . . . . . . . . \/_//_/ . . . . . . . . .<BR>
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                    </div>
                    <div id="laminaTubaro" style="display: none;">
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                        . . . . . . . . ________. . . . . . . . . .<BR>
                        . . . OIIIIIIII|\\\\\\\\\\\\\\\\. . . . . .<BR>
                        . . . . . . . .|\\\\\\\\\\\\\\\\\\\ . . . .<BR>
                        . . . . . . . . . . . . . . . .\\\\\\ . . .<BR>
                        . . . . . . . . . . . . . . . . .\\\\\. . .<BR>
                        . . . . . . . . . . . . . . . . . .\\\. . .<BR>
                        . . . . . . . . . . . . . . . . . . \|. . .<BR>
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                    </div>
                    <div id="coroaLuz" style="display: none;">
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                        . . . . . . . . . . . . . ./\ . . . . . . .<BR>
                        . . . . |\. . . . . /\. . .\ \. . /|. . . .<BR>
                        . . . . |o\/\_. . . |/. . ./ |_/\/o|. . . .<BR>
                        . . . . | /o/ O\. . . . . .\ O\_o /|. . . .<BR>
                        . . . . |/__\___\ . . . . . \___\__|. . . .<BR>
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                        . . . . . . . . . . . . . . . . . . . . . .<BR>
                    </div>
                    <button onclick="ResetProgress()">Resetar progresso</button>
                </div>
            </div>
            <div id="borderRight">
                <div id="right">
                    <a onclick="Interact('violino')">%%</a><BR>
                    <a onclick="Interact('violino')">%%</a><BR>
                    <a onclick="Interact('violino')">||</a><BR>
                    <a onclick="Interact('violino')">_||_</a><BR>
                    <a onclick="Interact('violino')">'.||.`</a><BR>
                    <a onclick="Interact('violino')">).||.(</a><BR>
                    <a onclick="Interact('violino')">).||.(</a><BR>
                    <a onclick="Interact('violino')">_)::(_</a><BR>
                    <a onclick="Interact('violino')">).||.(</a><BR>
                    <a onclick="Interact('violino')">(..\/..)</a><BR>
                    <a onclick="Interact('violino')">`-..-'</a><BR>
                    <BR>
                    Olá, e bem vindo ao: "CONTRA O VIOLINO!"<BR>
                    <BR>
                    <div id="desc">
                        Este é um jogo em qual seu objetivo é chegar no andar 50 de uma torre para derrotar um violino.
                        Para isso, você lutará contra diversos oponentes, e chefes poderosos no seu caminho, deixando
                        seu
                        personagem cada vez mais forte em preparo ao embate final. O jogo é jogado inteiramente em
                        alertas
                        da página, e só é possivel sair ao morrer. Assim, você pode interagir com este hub somente entre
                        jogos. <BR>
                        <BR>
                        Neste hub, temos: Abaixo, as músicas que serão tocadas no jogo (quando você as desbloquear) e 2
                        músicas que
                        já podem ser tocadas. JÁ QUE A MAIORIA DOS BROWSERS SÃO BEM CHATOS SOBRE ISSO, É RECOMENDADO QUE
                        VOCÊ DÊ PLAY
                        EM ALGUMA DESSAS MÚSICAS ANTES DA SUA PRIMEIRA TENTATIVA, MESMO SE FOR PAUSAR DE NOVO PARA NÃO
                        DAR PROBLEMA
                        NAS MÚSICAS DO JOGO.<BR>
                        <BR>
                        IMPORTANTE: NÃO RECARREGUE A PÁGINA NO MEIO DE UM JOGO, OU PERDERÁ SEU PROGRESSO!<BR>
                        <BR>
                        Quando quiser começar uma tentativa, clique no violino!

                    </div>

                </div>
            </div>
        </div>
        <div id="wrap">
            <div id="songs">
                <audio src="ViolinPhase1.mp3" id="Phase1" controls loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="ViolinPhase2.mp3" id="Phase2" controls loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="EsqueletinhoFight.mp3" id="EsqueletinhoTheme" loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="GloboTheme.mp3" id="GloboTheme" loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="TheGuardianSolo.m4a" id="GuardianTheme" loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="OArco-Phase1.mp3" id="ArcoPhase1" loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="OArco-Phase2.mp3" id="ArcoPhase2" loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="LuninPhase1.mp3" id="LuninPhase1" loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="ViolinoPhase1.mp3" id="Violino1" loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="ViolinPhase3.mp3" id="ViolinPhase3" loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="darknessPhase1.mp3" id="darkness1" loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="darknessPhase2.mp3" id="darkness2" loop>
                    Your browser does not support the audio element.
                </audio>
                <audio src="darknessPhase3.mp3" id="darkness3" loop>
                    Your browser does not support the audio element.
                </audio>
            </div>
        </div>
        <div id="footer">
            <a id='calamityText'>?????:???</a>
        </div>
    </div>
    <script type="text/javascript">
        if (localStorage.beatEsqueletinho == 'yes') {
            EsqueletinhoTheme.controls = true;
        }
        if (localStorage.beatGlobo == 'yes') {
            GloboTheme.controls = true;
            estiloFesta.style.display = "block";
        }
        if (localStorage.beatGuardian == 'yes') {
            GuardianTheme.controls = true;
            salaGuardiao.style.display = "block";
        }
        if (localStorage.beatArco == 'yes') {
            ArcoPhase1.controls = true;
            ArcoPhase2.controls = true;
            calorDragao.style.display = "block";
        }
        if (!(localStorage.getItem('calamityLevel') > 9)) {
            localStorage.setItem('tubaroEndingEX', 'no');
            localStorage.setItem('CrownEndingEX', 'no');
            localStorage.setItem('normalEndingEX', 'no');
        }

        if (localStorage.tubaroEnding == 'yes') {
            Violino1.controls = true;
            ViolinPhase3.controls = true;
            localStorage.setItem('tubaroEnding', 'yes');
            laminaTubaro.style.display = "block";
            laminaTubaro.style.color = '#000000';
        }
        if (localStorage.tubaroEndingEX == 'yes') {
            Violino1.controls = true;
            ViolinPhase3.controls = true;
            localStorage.setItem('tubaroEnding', 'yes');
            laminaTubaro.style.display = "block";
            laminaTubaro.style.color = 'rgb(255, 140, 0)';
            laminaTubaro.style.background = '#d5abe6';
        }
        if (localStorage.CrownEnding == 'yes') {
            Violino1.controls = true;
            ViolinPhase3.controls = true;
            localStorage.setItem('CrownEnding', 'yes');
            coroaLuz.style.display = "block";
            coroaLuz.style.color = '#000000';
        }
        if (localStorage.CrownEndingEX == 'yes') {
            Violino1.controls = true;
            ViolinPhase3.controls = true;
            localStorage.setItem('CrownEnding', 'yes');
            coroaLuz.style.display = "block";
            coroaLuz.style.color = 'rgb(255, 140, 0)';
            coroaLuz.style.background = '#e6e6ab';
        }
        if (localStorage.normalEnding == 'yes') {
            Violino1.controls = true;
            ViolinPhase3.controls = true;
            localStorage.setItem('normalEnding', 'yes');
            vitoriaComum.style.display = "block";
            vitoriaComum.style.color = '#000000';
        }
        if (localStorage.normalEndingEX == 'yes') {
            Violino1.controls = true;
            ViolinPhase3.controls = true;
            localStorage.setItem('normalEnding', 'yes');
            vitoriaComum.style.display = "block";
            vitoriaComum.style.color = 'rgb(255, 140, 0)';
            vitoriaComum.style.background = '#e6ccab';
        }
        if (localStorage.beatLunin == 'yes') {
            LuninPhase1.controls = true;
            luz.style.display = "block";
        }
        if (localStorage.darknessEnding == 'yes') {
            escuridao.style.display = "block";
            desc.style.backgroundColor = '#FFD700';
            calamityText.innerHTML = "nível de calamidade: " + localStorage.getItem('calamityLevel');
        }
        if (localStorage.darknessEndingEX == 'yes') {
            desc.style.color = 'rgb(255, 140, 0)';
        }
        if (localStorage.darknessEnding == 'yes' && localStorage.getItem('calamityLevel') == null) {
            localStorage.setItem('calamityLevel', 1);
        }
    </script>
</body>

</html>